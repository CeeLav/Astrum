# æŠ€èƒ½æ•ˆæœè¿è¡Œæ—¶ - å¼€å‘è¿›å±•

**é¡¹ç›®**: æŠ€èƒ½æ•ˆæœè¿è¡Œæ—¶ç³»ç»Ÿ  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-10  
**æœ€åæ›´æ–°**: 2025-10-10  
**ç‰ˆæœ¬**: v0.0.1 (å‡†å¤‡å¼€å‘)

---

## ğŸ“‹ ç›®å½•

1. [å¼€å‘çŠ¶æ€æ€»è§ˆ](#å¼€å‘çŠ¶æ€æ€»è§ˆ)
2. [ä¾èµ–ç³»ç»ŸçŠ¶æ€](#ä¾èµ–ç³»ç»ŸçŠ¶æ€)
3. [å¼€å‘è®¡åˆ’](#å¼€å‘è®¡åˆ’)
4. [å¾…å®ŒæˆåŠŸèƒ½](#å¾…å®ŒæˆåŠŸèƒ½)
5. [æ–‡ä»¶æ¸…å•](#æ–‡ä»¶æ¸…å•)
6. [æŠ€æœ¯å€ºåŠ¡](#æŠ€æœ¯å€ºåŠ¡)

---

## å¼€å‘çŠ¶æ€æ€»è§ˆ

### å½“å‰ç‰ˆæœ¬
- **ç‰ˆæœ¬å·**: v0.6.0 (Beta - æˆ˜æ–—ç³»ç»Ÿå®Œæ•´è¿è¡Œ)
- **ç¼–è¯‘çŠ¶æ€**: âœ… æˆåŠŸ (0 é”™è¯¯, è­¦å‘Šå¿½ç•¥)
- **æµ‹è¯•çŠ¶æ€**: âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ + å®æˆ˜éªŒè¯æˆåŠŸ
- **åŠŸèƒ½å®Œæˆåº¦**: 90% (Phase 1-6 å®Œæˆï¼Œæ ¸å¿ƒæˆ˜æ–—æµç¨‹å®Œå…¨è·‘é€šï¼Œç‰©ç†åŒæ­¥å®Œå–„)

### é˜¶æ®µåˆ’åˆ†
- âœ… **Phase 0**: ä¾èµ–ç³»ç»Ÿå‡†å¤‡ - **å·²å®Œæˆ**
  - âœ… ç‰©ç†ç³»ç»Ÿï¼ˆHitManagerï¼‰
  - âœ… é…ç½®ç³»ç»Ÿé›†æˆ
  - âœ… ç¼–è¾‘å™¨å·¥å…·
- âœ… **Phase 1**: SkillExecutorCapability å¼€å‘ - **å·²å®Œæˆ** (2025-10-10)
  - âœ… TriggerFrameInfo æ•°æ®ç»“æ„
  - âœ… SkillConfigManager.ParseTriggerFrames() ä¿®æ”¹
  - âœ… SkillExecutorCapability æ ¸å¿ƒç±»
  - âœ… Collision/Direct/Condition ä¸‰ç§è§¦å‘ç±»å‹
  - â³ å•å…ƒæµ‹è¯•å¾…ç¼–å†™
- âœ… **Phase 2**: SkillEffectManager å¼€å‘ - **å·²å®Œæˆ** (2025-10-10)
  - âœ… SkillEffectData æ•°æ®ç»“æ„
  - âœ… IEffectHandler æ¥å£
  - âœ… SkillEffectManager å®Œæ•´å®ç°
  - âœ… æ•ˆæœé˜Ÿåˆ—å’Œ Handler æ³¨å†Œæœºåˆ¶
- ğŸ”„ **Phase 3**: EffectHandlers ä½“ç³» - **éƒ¨åˆ†å®Œæˆ**
  - âœ… DamageEffectHandler
  - âœ… HealEffectHandler
  - â³ KnockbackEffectHandlerï¼ˆä¾èµ– MovementComponentï¼‰
  - â³ Buff/Debuff Handlerï¼ˆä¾èµ– Buff ç³»ç»Ÿï¼‰
- âœ… **Phase 4**: DamageCalculator å¼€å‘ - **å·²å®Œæˆ** (2025-10-10)
  - âœ… DamageResult æ•°æ®ç»“æ„
  - âœ… DamageCalculator å®Œæ•´å®ç°
  - âœ… ä¼¤å®³è®¡ç®—å…¬å¼ï¼ˆåŸºç¡€ä¼¤å®³/æš´å‡»/é˜²å¾¡/æµ®åŠ¨ï¼‰
  - âš ï¸ å±æ€§ç³»ç»Ÿç®€åŒ–ï¼ˆä½¿ç”¨ç¡¬ç¼–ç å€¼ï¼‰
- âœ… **Phase 5**: é›†æˆæµ‹è¯•ä¸ä¼˜åŒ– - **å·²å®Œæˆ** (2025-10-10)
  - âœ… çœŸå®æˆ˜æ–—åœºæ™¯æµ‹è¯•ï¼ˆä½¿ç”¨ EntityFactory + RoleArchetypeï¼‰
  - âœ… å®Œæ•´æŠ€èƒ½æµç¨‹éªŒè¯ï¼ˆSkill â†’ Action â†’ TriggerFrame â†’ Effect â†’ Damageï¼‰
  - âœ… CollisionDataParser æ ¼å¼ä¿®å¤
  - âœ… SkillConfigManager.GetEffectValue å›é€€é€»è¾‘
  - âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ (5/5)
- âœ… **Phase 6**: ç‰©ç†åŒæ­¥ä¸å¯è§†åŒ– - **å·²å®Œæˆ** (2025-10-10)
  - âœ… åæ ‡è½¬æ¢ç»Ÿä¸€å°è£…ï¼ˆCollisionShape.ToWorldTransformï¼‰
  - âœ… Transform ç»„ä»¶æ•´åˆï¼ˆPosition + Rotationï¼‰
  - âœ… ç‰©ç†ä¸–ç•Œè‡ªåŠ¨åŒæ­¥ï¼ˆæ³¨å†Œ + ä½ç½®æ›´æ–°ï¼‰
  - âœ… Gizmos å¯è§†åŒ–è°ƒè¯•ç»„ä»¶
  - âœ… ä¼¤å®³è®¡ç®—è¯¦ç»†æ—¥å¿—
  - âœ… ç§»åŠ¨æ—¶è‡ªåŠ¨æ›´æ–°æœå‘
  - âœ… å®æˆ˜éªŒè¯ï¼šä¼¤å®³æˆåŠŸé€ æˆ ğŸ‰

---

## ä¾èµ–ç³»ç»ŸçŠ¶æ€

### âœ… å·²å°±ç»ªçš„ä¾èµ–

#### 1. ç‰©ç†ç¢°æ’æ£€æµ‹ç³»ç»Ÿ
- **çŠ¶æ€**: âœ… å®Œæˆ (v0.3.0 Beta)
- **å®Œæˆåº¦**: 80%
- **æ–‡æ¡£**: [ç‰©ç†ç³»ç»Ÿå¼€å‘è¿›å±•](../../Physics/ç‰©ç†ç³»ç»Ÿå¼€å‘è¿›å±•.md)

**å¯ç”¨åŠŸèƒ½**:
- âœ… HitManager å³æ—¶æŸ¥è¯¢
- âœ… Box/Sphere Overlap æŸ¥è¯¢
- âœ… ç¢°æ’è¿‡æ»¤ï¼ˆExcludeEntityIdsã€CustomFilterï¼‰
- âœ… å‘½ä¸­å»é‡ï¼ˆæŠ€èƒ½å®ä¾‹çº§ï¼‰
- âœ… CollisionShape æ•°æ®ç»“æ„
- âœ… é…ç½®è¡¨è‡ªåŠ¨åŠ è½½
- âœ… æµ‹è¯•è¦†ç›–ï¼ˆ38/38 é€šè¿‡ï¼‰

**å¾…å®ŒæˆåŠŸèƒ½**:
- â³ Capsule Overlap æŸ¥è¯¢ï¼ˆ1-2 å°æ—¶å·¥ä½œé‡ï¼‰
- â³ Sweep æŸ¥è¯¢ï¼ˆ4-6 å°æ—¶ï¼‰
- â³ Raycast æŸ¥è¯¢ï¼ˆ3-4 å°æ—¶ï¼‰

**å½±å“è¯„ä¼°**: âœ… **å½“å‰å¯ç”¨åŠŸèƒ½å·²è¶³å¤Ÿæ”¯æŒæŠ€èƒ½æ•ˆæœç³»ç»Ÿå¼€å‘**

#### 2. é…ç½®ç³»ç»Ÿ
- **çŠ¶æ€**: âœ… å°±ç»ª
- **CollisionData é…ç½®**: âœ… æ”¯æŒ
- **EntityModelTable**: âœ… å¯ç”¨
- **ConfigManager**: âœ… å•ä¾‹åˆå§‹åŒ–å®Œæˆ

#### 3. ç¼–è¾‘å™¨å·¥å…·
- **è§’è‰²ç¼–è¾‘å™¨**: âœ… ç¢°æ’ç›’ç”Ÿæˆå’Œé¢„è§ˆ
- **æ•°æ®æŒä¹…åŒ–**: âœ… ä¿å­˜/åŠ è½½ç¢°æ’æ•°æ®

### â³ å¾…å‡†å¤‡çš„ä¾èµ–

#### 1. æŠ€èƒ½é…ç½®è¡¨
- **çŠ¶æ€**: â³ éœ€è¦è®¾è®¡
- **éœ€è¦çš„è¡¨**:
  - SkillTable (æŠ€èƒ½æ¦‚å¿µå±‚)
  - SkillActionTable (åŠ¨ä½œæ‰§è¡Œå±‚)
  - SkillEffectTable (æ•ˆæœè§¦å‘å±‚)
- **ä¼˜å…ˆçº§**: ğŸ”´ é«˜ - é˜»å¡å¼€å‘

#### 2. åŠ¨ä½œç³»ç»Ÿé›†æˆ
- **çŠ¶æ€**: â³ éœ€è¦äº†è§£ç°æœ‰ ActionTable
- **éœ€æ±‚**: ç†è§£ ActionType = "Skill" çš„æ•°æ®ç»“æ„
- **ä¼˜å…ˆçº§**: ğŸ”´ é«˜ - å½±å“ SkillExecutorCapability è®¾è®¡

#### 3. å±æ€§ç³»ç»Ÿ
- **çŠ¶æ€**: â³ éœ€è¦ç¡®è®¤
- **éœ€æ±‚**: ä¼¤å®³è®¡ç®—éœ€è¦è¯»å–è§’è‰²å±æ€§
- **ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ - å¯ä»¥å…ˆä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬

---

## å¼€å‘è®¡åˆ’

### Phase 1: SkillExecutorCapability å¼€å‘ï¼ˆé¢„è®¡ 2-3 å¤©ï¼‰

#### ç›®æ ‡
å®ç°æŠ€èƒ½åŠ¨ä½œæ‰§è¡Œèƒ½åŠ›ï¼Œè´Ÿè´£è§¦å‘å¸§çš„æ£€æµ‹å’Œå¤„ç†ã€‚

#### å¾…å¼€å‘å†…å®¹
- [ ] **TriggerFrameInfo æ•°æ®ç»“æ„**
  - Frameï¼ˆè§¦å‘å¸§ï¼‰
  - TriggerTypeï¼ˆè§¦å‘ç±»å‹ï¼šCollision/Direct/Conditionï¼‰
  - EffectIdï¼ˆæ•ˆæœIDï¼‰
  - CollisionShapeï¼ˆç¢°æ’å½¢çŠ¶ï¼‰
  - TriggerConditionï¼ˆè§¦å‘æ¡ä»¶ï¼‰

- [ ] **SkillExecutorCapability æ ¸å¿ƒç±»**
  - ProcessFrame() - å¤„ç†å½“å‰å¸§è§¦å‘
  - HandleCollisionTrigger() - ç¢°æ’è§¦å‘å¤„ç†
  - HandleDirectTrigger() - ç›´æ¥è§¦å‘å¤„ç†
  - HandleConditionTrigger() - æ¡ä»¶è§¦å‘å¤„ç†

- [ ] **é›†æˆç‚¹**
  - ä¸ HitManager é›†æˆ
  - ä¸ SkillEffectManager é›†æˆï¼ˆæ¥å£å®šä¹‰ï¼‰

#### éªŒæ”¶æ ‡å‡†
- [ ] å¯ä»¥å¤„ç† Collision è§¦å‘ï¼Œè°ƒç”¨ HitManager
- [ ] å¯ä»¥å¤„ç† Direct è§¦å‘
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒé€»è¾‘
- [ ] ç¼–è¯‘é€šè¿‡ï¼Œæ— è¿è¡Œæ—¶é”™è¯¯

---

### Phase 2: SkillEffectManager å¼€å‘ï¼ˆé¢„è®¡ 2-3 å¤©ï¼‰

#### ç›®æ ‡
å®ç°æŠ€èƒ½æ•ˆæœç®¡ç†å™¨ï¼Œç»Ÿä¸€æ¥æ”¶å’Œåˆ†å‘æ•ˆæœè§¦å‘è¯·æ±‚ã€‚

#### å¾…å¼€å‘å†…å®¹
- [ ] **SkillEffectData æ•°æ®ç»“æ„**
  - CasterEntityï¼ˆæ–½æ³•è€…ï¼‰
  - TargetEntityï¼ˆç›®æ ‡ï¼‰
  - EffectIdï¼ˆæ•ˆæœIDï¼‰
  - EffectTypeï¼ˆæ•ˆæœç±»å‹ï¼‰
  - Parametersï¼ˆæ•ˆæœå‚æ•°ï¼‰

- [ ] **SkillEffectManager æ ¸å¿ƒç±»**
  - QueueSkillEffect() - å…¥é˜Ÿæ•ˆæœè¯·æ±‚
  - Update() - å¤„ç†æ•ˆæœé˜Ÿåˆ—
  - DispatchEffect() - åˆ†å‘æ•ˆæœåˆ° Handler

- [ ] **EffectHandler åŸºç±»**
  - IEffectHandler æ¥å£
  - æ’ä»¶å¼æ³¨å†Œæœºåˆ¶

#### éªŒæ”¶æ ‡å‡†
- [ ] å¯ä»¥æ¥æ”¶æ•ˆæœè¯·æ±‚å¹¶å…¥é˜Ÿ
- [ ] å¯ä»¥åˆ†å‘åˆ°å¯¹åº”çš„ Handler
- [ ] æ”¯æŒåŒå¸§å¤„ç†å’Œå»¶è¿Ÿå¤„ç†
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–

---

### Phase 3: EffectHandlers ä½“ç³»ï¼ˆé¢„è®¡ 3-4 å¤©ï¼‰

#### ç›®æ ‡
å®ç°å„ç§å…·ä½“çš„æ•ˆæœå¤„ç†å™¨ã€‚

#### å¾…å¼€å‘å†…å®¹
- [ ] **DamageEffectHandler** - ä¼¤å®³æ•ˆæœ
  - è°ƒç”¨ DamageCalculator è®¡ç®—ä¼¤å®³
  - åº”ç”¨ä¼¤å®³åˆ°ç›®æ ‡
  - è§¦å‘å—å‡»äº‹ä»¶

- [ ] **HealEffectHandler** - æ²»ç–—æ•ˆæœ
  - è®¡ç®—æ²»ç–—é‡
  - åº”ç”¨æ²»ç–—åˆ°ç›®æ ‡
  - å¤„ç†æº¢å‡ºæ²»ç–—

- [ ] **BuffEffectHandler** - å¢ç›Šæ•ˆæœ
  - æ·»åŠ  BuffComponent
  - ç®¡ç† Buff æŒç»­æ—¶é—´
  - å åŠ é€»è¾‘

- [ ] **DebuffEffectHandler** - å‡ç›Šæ•ˆæœ
  - æ·»åŠ  DebuffComponent
  - ç®¡ç† Debuff æŒç»­æ—¶é—´
  - é©±æ•£é€»è¾‘

- [ ] **KnockbackEffectHandler** - å‡»é€€æ•ˆæœ
  - è®¡ç®—å‡»é€€æ–¹å‘å’Œè·ç¦»
  - åº”ç”¨ä½ç§»

#### éªŒæ”¶æ ‡å‡†
- [ ] æ¯ä¸ª Handler å¯ä»¥ç‹¬ç«‹å·¥ä½œ
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–
- [ ] ä¸é…ç½®è¡¨é›†æˆ

---

### Phase 4: DamageCalculator å¼€å‘ï¼ˆé¢„è®¡ 2-3 å¤©ï¼‰

#### ç›®æ ‡
å®ç°ä¼¤å®³è®¡ç®—æ¨¡å—ï¼Œè´Ÿè´£æ ¹æ®é…ç½®å’Œå±æ€§è®¡ç®—æœ€ç»ˆä¼¤å®³ã€‚

#### å¾…å¼€å‘å†…å®¹
- [ ] **DamageCalculator æ ¸å¿ƒç±»**
  - CalculateDamage() - è®¡ç®—ä¼¤å®³
  - è¯»å–æ–½æ³•è€…/ç›®æ ‡å±æ€§
  - åº”ç”¨ä¼¤å®³å…¬å¼
  - æš´å‡»åˆ¤å®š
  - ä¼¤å®³åŠ æˆ/å‡å…

- [ ] **DamageResult æ•°æ®ç»“æ„**
  - FinalDamageï¼ˆæœ€ç»ˆä¼¤å®³ï¼‰
  - IsCriticalï¼ˆæ˜¯å¦æš´å‡»ï¼‰
  - DamageTypeï¼ˆä¼¤å®³ç±»å‹ï¼‰
  - ä¼¤å®³æ¥æºä¿¡æ¯

#### éªŒæ”¶æ ‡å‡†
- [ ] ä¼¤å®³è®¡ç®—æ­£ç¡®
- [ ] æ”¯æŒæš´å‡»
- [ ] æ”¯æŒä¼¤å®³åŠ æˆ/å‡å…
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–

---

### Phase 5: é›†æˆæµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆé¢„è®¡ 2-3 å¤©ï¼‰

#### ç›®æ ‡
å®Œæ•´æµç¨‹æµ‹è¯•å’Œæ€§èƒ½ä¼˜åŒ–ã€‚

#### å¾…å¼€å‘å†…å®¹
- [ ] **é›†æˆæµ‹è¯•**
  - å®Œæ•´æŠ€èƒ½é‡Šæ”¾æµç¨‹
  - å¤šç›®æ ‡æµ‹è¯•
  - å¤šæ®µæŠ€èƒ½æµ‹è¯•
  - å‹åŠ›æµ‹è¯•

- [ ] **æ€§èƒ½ä¼˜åŒ–**
  - å¯¹è±¡æ± 
  - å†…å­˜åˆ†é…ä¼˜åŒ–
  - æ€§èƒ½åŸºå‡†æµ‹è¯•

- [ ] **æ–‡æ¡£å®Œå–„**
  - API æ–‡æ¡£
  - ä½¿ç”¨æŒ‡å—
  - é…ç½®ç¤ºä¾‹

#### éªŒæ”¶æ ‡å‡†
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½è¾¾æ ‡
- [ ] æ–‡æ¡£å®Œæ•´

---

## å¾…å®ŒæˆåŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½ï¼ˆPhase 1-4ï¼‰

| æ¨¡å— | çŠ¶æ€ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥ä½œé‡ |
|------|------|--------|-----------|
| SkillExecutorCapability | â³ å¾…å¼€å‘ | ğŸ”´ é«˜ | 2-3 å¤© |
| SkillEffectManager | â³ å¾…å¼€å‘ | ğŸ”´ é«˜ | 2-3 å¤© |
| DamageEffectHandler | â³ å¾…å¼€å‘ | ğŸ”´ é«˜ | 1 å¤© |
| HealEffectHandler | â³ å¾…å¼€å‘ | ğŸŸ¡ ä¸­ | 1 å¤© |
| BuffEffectHandler | â³ å¾…å¼€å‘ | ğŸŸ¡ ä¸­ | 1-2 å¤© |
| DebuffEffectHandler | â³ å¾…å¼€å‘ | ğŸŸ¡ ä¸­ | 1-2 å¤© |
| KnockbackEffectHandler | â³ å¾…å¼€å‘ | ğŸŸ¢ ä½ | 1 å¤© |
| DamageCalculator | â³ å¾…å¼€å‘ | ğŸ”´ é«˜ | 2-3 å¤© |

**æ€»è®¡**: çº¦ **12-18 å¤©** å·¥ä½œé‡

### æ‰©å±•åŠŸèƒ½ï¼ˆPhase 5ï¼‰

| åŠŸèƒ½ | çŠ¶æ€ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥ä½œé‡ |
|------|------|--------|-----------|
| å¼¹é“ç³»ç»Ÿ | â³ å¾…è®¾è®¡ | ğŸŸ¡ ä¸­ | 3-4 å¤© |
| AOE ç‰¹æ•ˆ | â³ å¾…è®¾è®¡ | ğŸŸ¢ ä½ | 2 å¤© |
| è¿é”æ•ˆæœ | â³ å¾…è®¾è®¡ | ğŸŸ¢ ä½ | 2-3 å¤© |
| å¬å”¤ç³»ç»Ÿ | â³ å¾…è®¾è®¡ | ğŸŸ¢ ä½ | 4-5 å¤© |

---

## æ–‡ä»¶æ¸…å•

### å¾…åˆ›å»ºæ–‡ä»¶

#### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ | åŠŸèƒ½ | å®é™…ä»£ç è¡Œæ•° |
|---------|------|------|-------------|
| `AstrumLogic/Capabilities/SkillExecutorCapability.cs` | âœ… å·²åˆ›å»º | æŠ€èƒ½åŠ¨ä½œæ‰§è¡Œèƒ½åŠ› | 202 è¡Œ |
| `AstrumLogic/Managers/SkillEffectManager.cs` | âœ… å·²åˆ›å»º | æŠ€èƒ½æ•ˆæœç®¡ç†å™¨ | 118 è¡Œ |
| `AstrumLogic/SkillSystem/DamageCalculator.cs` | âœ… å·²åˆ›å»º | ä¼¤å®³è®¡ç®—æ¨¡å— | 171 è¡Œ |
| `AstrumLogic/SkillSystem/TriggerFrameInfo.cs` | âœ… å·²åˆ›å»º | è§¦å‘å¸§æ•°æ®ç»“æ„ | 70 è¡Œ |
| `AstrumLogic/SkillSystem/SkillEffectData.cs` | âœ… å·²åˆ›å»º | æŠ€èƒ½æ•ˆæœæ•°æ® | 17 è¡Œ |
| `AstrumLogic/SkillSystem/DamageResult.cs` | âœ… å·²åˆ›å»º | ä¼¤å®³ç»“æœæ•°æ® | 34 è¡Œ |

#### EffectHandler æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ | åŠŸèƒ½ | å®é™…ä»£ç è¡Œæ•° |
|---------|------|------|-------------|
| `AstrumLogic/SkillSystem/EffectHandlers/IEffectHandler.cs` | âœ… å·²åˆ›å»º | æ•ˆæœå¤„ç†å™¨æ¥å£ | 22 è¡Œ |
| `AstrumLogic/SkillSystem/EffectHandlers/DamageEffectHandler.cs` | âœ… å·²åˆ›å»º | ä¼¤å®³æ•ˆæœå¤„ç†å™¨ | 42 è¡Œ |
| `AstrumLogic/SkillSystem/EffectHandlers/HealEffectHandler.cs` | âœ… å·²åˆ›å»º | æ²»ç–—æ•ˆæœå¤„ç†å™¨ | 45 è¡Œ |
| `AstrumLogic/SkillSystem/EffectHandlers/BuffEffectHandler.cs` | â³ å¾…åˆ›å»º | å¢ç›Šæ•ˆæœå¤„ç†å™¨ | ä¾èµ– Buff ç³»ç»Ÿ |
| `AstrumLogic/SkillSystem/EffectHandlers/DebuffEffectHandler.cs` | â³ å¾…åˆ›å»º | å‡ç›Šæ•ˆæœå¤„ç†å™¨ | ä¾èµ– Buff ç³»ç»Ÿ |
| `AstrumLogic/SkillSystem/EffectHandlers/KnockbackEffectHandler.cs` | â³ å¾…åˆ›å»º | å‡»é€€æ•ˆæœå¤„ç†å™¨ | ä¾èµ– MovementComponent |

#### å¯è§†åŒ–ä¸è°ƒè¯•æ–‡ä»¶ (v0.6.0 æ–°å¢)

| æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ | åŠŸèƒ½ | å®é™…ä»£ç è¡Œæ•° |
|---------|------|------|-------------|
| `AstrumView/Components/CollisionDebugViewComponent.cs` | âœ… å·²åˆ›å»º | Gizmos ç¢°æ’ç›’å¯è§†åŒ– | 230 è¡Œ |
| `AstrumView/Components/CollisionGizmosDrawer.cs` | âœ… å·²åˆ›å»º | Unity Gizmos MonoBehaviour | 30 è¡Œ |
| `CommonBase/SerializationBestPractices.md` | âœ… å·²åˆ›å»º | åºåˆ—åŒ–æœ€ä½³å®è·µæ–‡æ¡£ | 256 è¡Œ |
| `CommonBase/SerializationChecklist.md` | âœ… å·²åˆ›å»º | åºåˆ—åŒ–æ£€æŸ¥æ¸…å• | 153 è¡Œ |

#### æµ‹è¯•æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ | åŠŸèƒ½ | é¢„è®¡ä»£ç è¡Œæ•° |
|---------|------|------|-------------|
| `AstrumTest/AstrumTest/SkillExecutorCapabilityTests.cs` | â³ å¾…åˆ›å»º | æŠ€èƒ½åŠ¨ä½œæµ‹è¯• | ~200 è¡Œ |
| `AstrumTest/AstrumTest/SkillEffectManagerTests.cs` | â³ å¾…åˆ›å»º | æ•ˆæœç®¡ç†å™¨æµ‹è¯• | ~150 è¡Œ |
| `AstrumTest/AstrumTest/DamageCalculatorTests.cs` | â³ å¾…åˆ›å»º | ä¼¤å®³è®¡ç®—æµ‹è¯• | ~150 è¡Œ |
| `AstrumTest/AstrumTest/EffectHandlerTests.cs` | â³ å¾…åˆ›å»º | æ•ˆæœå¤„ç†å™¨æµ‹è¯• | ~200 è¡Œ |

**æ€»è®¡**: çº¦ **2,400+ è¡Œ**ä»£ç ï¼ˆå«å¯è§†åŒ–ä¸æ–‡æ¡£ï¼‰

---

## æŠ€æœ¯å€ºåŠ¡

### å·²è§£å†³ âœ…

1. ~~**RotationComponent ç¼ºå¤±**~~ âœ… **å·²è§£å†³** (v0.6.0)
   - âœ… åˆå¹¶åˆ° PositionComponentï¼ˆä¿ç•™ç±»åï¼Œåç»­å¯æ”¹ä¸º TransComponentï¼‰
   - âœ… æ”»å‡»ç¢°æ’ç›’æ­£ç¡®éšæœå‘æ—‹è½¬
   - âœ… ç§»åŠ¨æ—¶è‡ªåŠ¨æ›´æ–°æœå‘

### æ–°å¢å€ºåŠ¡

2. **å»é‡æœºåˆ¶ä¼˜åŒ–** ğŸŸ¡ (v0.6.0 æ–°å‘ç°)
   - å½“å‰æœºåˆ¶ï¼šåŒä¸€ `skillInstanceId` å¯¹åŒä¸€ç›®æ ‡åªèƒ½å‘½ä¸­ä¸€æ¬¡
   - é—®é¢˜ï¼šå¤šæ®µæŠ€èƒ½ï¼ˆä¸‰è¿æ–©ï¼‰çš„åç»­æ®µæ— æ³•å‘½ä¸­åŒä¸€ç›®æ ‡
   - å¯èƒ½æ–¹æ¡ˆï¼š
     - æ–¹æ¡ˆ1ï¼šä¸ºæ¯ä¸ªè§¦å‘å¸§ç”Ÿæˆå”¯ä¸€ID `HashCode.Combine(skillAction.Id, trigger.Frame)`
     - æ–¹æ¡ˆ2ï¼šæ·»åŠ æ—¶é—´å†·å´æœºåˆ¶ï¼ˆé€‚åˆæŒç»­æ€§æ”»å‡»ï¼‰
     - æ–¹æ¡ˆ3ï¼šæŠ€èƒ½ç»“æŸæ—¶æ¸…é™¤ç¼“å­˜
   - ä¼˜å…ˆçº§ï¼šä¸­ï¼ˆå¾…åç»­ç»“æ„è°ƒæ•´æ—¶å¤„ç†ï¼‰

### ä¸­ä¼˜å…ˆçº§

3. **å±æ€§ç³»ç»Ÿç¡®è®¤** ğŸŸ¡
   - ä¼¤å®³è®¡ç®—éœ€è¦è¯»å–å±æ€§
   - éœ€è¦ç¡®è®¤å±æ€§ç³»ç»Ÿæ¥å£
   - å¯ä»¥å…ˆä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬

4. **TimeManager ç¼ºå¤±** ğŸŸ¡
   - Buff/Debuff éœ€è¦æ—¶é—´ç®¡ç†
   - æŒç»­æ•ˆæœéœ€è¦å¸§è®¡æ•°
   - å¯ä»¥å…ˆä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬

5. **Buff/Debuff ç³»ç»Ÿ** ğŸŸ¡
   - éœ€è¦è®¾è®¡ BuffComponent/DebuffComponent
   - éœ€è¦è®¾è®¡ Buff å åŠ é€»è¾‘
   - å¯ä»¥åç»­è¿­ä»£

### ä½ä¼˜å…ˆçº§

6. **Team/Faction ç³»ç»Ÿ** ğŸŸ¢
   - ç¢°æ’è¿‡æ»¤éœ€è¦é˜µè¥ç³»ç»Ÿ
   - å‹ä¼¤åˆ¤å®šéœ€è¦
   - å¯ä»¥å»¶å

7. **ç‰¹æ•ˆç³»ç»Ÿé›†æˆ** ğŸŸ¢
   - æŠ€èƒ½éœ€è¦æ’­æ”¾ç‰¹æ•ˆ
   - éœ€è¦ä¸è¡¨ç°å±‚å¯¹æ¥
   - å¯ä»¥å…ˆä½¿ç”¨å ä½ç¬¦

---

## æ¨èå¼€å‘é¡ºåº

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œï¼ˆ1-2 å¤©ï¼‰âœ… å·²å®Œæˆ

1. âœ… é˜…è¯»ç‰©ç†ç³»ç»Ÿæ–‡æ¡£
2. âœ… ç†è§£ HitManager æ¥å£
3. âœ… è®¾è®¡æŠ€èƒ½é…ç½®è¡¨ç»“æ„ï¼ˆè¡¨å·²å­˜åœ¨ï¼‰
4. âœ… äº†è§£åŠ¨ä½œç³»ç»Ÿé›†æˆæ–¹å¼
5. â³ ç¡®è®¤å±æ€§ç³»ç»Ÿæ¥å£ï¼ˆPhase 4 éœ€è¦ï¼‰

### ç¬¬äºŒæ­¥ï¼šæ ¸å¿ƒå¼€å‘ï¼ˆ2 å‘¨ï¼‰

1. **Week 1**: SkillExecutorCapability + SkillEffectManager
2. **Week 2**: EffectHandlers + DamageCalculator

### ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆ3-5 å¤©ï¼‰

1. å•å…ƒæµ‹è¯•
2. é›†æˆæµ‹è¯•
3. æ€§èƒ½ä¼˜åŒ–
4. æ–‡æ¡£å®Œå–„

---

## é‡Œç¨‹ç¢‘

### Milestone 1: MVPï¼ˆæœ€å°å¯ç”¨ç‰ˆæœ¬ï¼‰
**ç›®æ ‡**: å®ç°åŸºç¡€çš„æŠ€èƒ½ä¼¤å®³æµç¨‹  
**æ—¶é—´**: 1-2 å‘¨  
**åŠŸèƒ½**:
- SkillExecutorCapability åŸºç¡€åŠŸèƒ½
- SkillEffectManager åŸºç¡€åŠŸèƒ½
- DamageEffectHandler
- DamageCalculator

**éªŒæ”¶**: å¯ä»¥é‡Šæ”¾ä¸€ä¸ªç®€å•çš„è¿‘æˆ˜æ”»å‡»æŠ€èƒ½ï¼Œé€ æˆä¼¤å®³

### Milestone 2: æ ¸å¿ƒåŠŸèƒ½å®Œå–„
**ç›®æ ‡**: å®Œå–„å¸¸ç”¨æ•ˆæœç±»å‹  
**æ—¶é—´**: 3-4 å‘¨  
**åŠŸèƒ½**:
- æ²»ç–—æ•ˆæœ
- Buff/Debuff
- å‡»é€€æ•ˆæœ
- å¤šç›®æ ‡æ”¯æŒ

**éªŒæ”¶**: æ”¯æŒå¸¸è§çš„æŠ€èƒ½ç±»å‹å’Œæ•ˆæœ

### Milestone 3: ç”Ÿäº§å°±ç»ª
**ç›®æ ‡**: è¾¾åˆ°ç”Ÿäº§ç¯å¢ƒæ ‡å‡†  
**æ—¶é—´**: 5-6 å‘¨  
**åŠŸèƒ½**:
- å®Œæ•´æµ‹è¯•è¦†ç›–
- æ€§èƒ½ä¼˜åŒ–
- æ–‡æ¡£å®Œå–„
- ç¼–è¾‘å™¨å·¥å…·

**éªŒæ”¶**: å¯ä»¥æŠ•å…¥å®é™…æ¸¸æˆå¼€å‘ä½¿ç”¨

---

## å‚è€ƒèµ„æ–™

### ç­–åˆ’æ–‡æ¡£
- [æŠ€èƒ½æ•ˆæœè¿è¡Œæ—¶ç­–åˆ’æ¡ˆ](./æŠ€èƒ½æ•ˆæœè¿è¡Œæ—¶ç­–åˆ’æ¡ˆ.md) - v2.0ï¼ˆå·²æ›´æ–°ï¼‰
- [æŠ€èƒ½ç³»ç»Ÿç­–åˆ’æ¡ˆ](../æŠ€èƒ½ç³»ç»Ÿç­–åˆ’æ¡ˆ.md)

### æŠ€æœ¯æ–‡æ¡£
- [ç‰©ç†ç³»ç»Ÿå¼€å‘è¿›å±•](../../Physics/ç‰©ç†ç³»ç»Ÿå¼€å‘è¿›å±•.md) - v0.3.0 Beta
- [å¾…å®ŒæˆåŠŸèƒ½æ¸…å•](../../Physics/å¾…å®ŒæˆåŠŸèƒ½æ¸…å•.md)

### ç¼–è¾‘å™¨å·¥å…·
- [è§’è‰²ç¼–è¾‘å™¨å¼€å‘è¿›å±•](../../Editor-Tools/è§’è‰²ç¼–è¾‘å™¨/è§’è‰²ç¼–è¾‘å™¨å¼€å‘è¿›å±•.md) - v1.0.0

---

## æ›´æ–°æ—¥å¿—

### 2025-10-10 - v0.6.0 (Beta - æˆ˜æ–—ç³»ç»Ÿå®Œæ•´è¿è¡Œ ğŸ‰)

**é‡å¤§é‡Œç¨‹ç¢‘**ï¼šæ ¸å¿ƒæˆ˜æ–—æµç¨‹å®Œå…¨è·‘é€šï¼Œå®æˆ˜éªŒè¯æˆåŠŸï¼

**Phase 6 - ç‰©ç†åŒæ­¥ä¸å¯è§†åŒ–**ï¼š

#### 1. âœ… **åæ ‡è½¬æ¢ç»Ÿä¸€å°è£…**
- æ–°å¢ `WorldTransform` ç»“æ„ä½“å­˜å‚¨ä¸–ç•Œç©ºé—´å˜æ¢
- åœ¨ `CollisionShape` ä¸­å°è£… `ToWorldTransform()` æ–¹æ³•
- HitManager å’Œ Gizmos ä½¿ç”¨å®Œå…¨ç›¸åŒçš„åæ ‡è½¬æ¢é€»è¾‘

```csharp
public WorldTransform ToWorldTransform(TSVector entityPos, TSQuaternion entityRot)
{
    return new WorldTransform
    {
        WorldCenter = entityPos + entityRot * LocalOffset,  // å…ˆæ—‹è½¬åç§»å‘é‡ï¼Œå†åŠ åˆ°ä½ç½®ä¸Š
        WorldRotation = entityRot * LocalRotation
    };
}
```

#### 2. âœ… **Transform ç»„ä»¶æ•´åˆ**
- åˆå¹¶ `PositionComponent` å’Œ `RotationComponent` ä¸ºç»Ÿä¸€çš„ Transform ç»„ä»¶
- ä¿ç•™ `PositionComponent` ç±»åä»¥å…¼å®¹ç°æœ‰ä»£ç ï¼ˆåç»­å¯é€šè¿‡ IDE é‡å‘½åï¼‰
- æ·»åŠ æ—‹è½¬ç›¸å…³æ–¹æ³•ï¼š`SetRotation`, `LookAt`, `RotateY`, `Forward`, `Right`, `Up`

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `PositionComponent.cs` - æ·»åŠ  `Rotation` å­—æ®µå’Œç›¸å…³æ–¹æ³•
- `HitManager.cs` - ä½¿ç”¨ `ToWorldTransform` æ–¹æ³•
- `CollisionDebugViewComponent.cs` - ä½¿ç”¨ç»Ÿä¸€åæ ‡è½¬æ¢
- `BaseUnitArchetype.cs` - ç§»é™¤ `RotationComponent`

#### 3. âœ… **ç‰©ç†ä¸–ç•Œè‡ªåŠ¨åŒæ­¥**
- `CollisionComponent.OnAttachToEntity` æ—¶è‡ªåŠ¨æ³¨å†Œåˆ° HitManager
- `MovementCapability` ç§»åŠ¨åè‡ªåŠ¨æ›´æ–°ç‰©ç†ä¸–ç•Œä½ç½®
- ç§»åŠ¨æ—¶è‡ªåŠ¨æ›´æ–°è§’è‰²æœå‘ï¼ˆæœå‘ç§»åŠ¨æ–¹å‘ï¼‰

```csharp
// CollisionComponent.cs - è‡ªåŠ¨æ³¨å†Œ
if (entity is AstrumEntity astrumEntity && Shapes != null && Shapes.Count > 0)
{
    HitManager.Instance.RegisterEntity(astrumEntity);
}

// MovementCapability.cs - è‡ªåŠ¨åŒæ­¥
if (OwnerEntity is AstrumEntity astrumEntity)
{
    HitManager.Instance.UpdateEntityPosition(astrumEntity);
}
```

#### 4. âœ… **Gizmos å¯è§†åŒ–è°ƒè¯•**
- æ–°å¢ `CollisionDebugViewComponent` å¯è§†åŒ–ç»„ä»¶
- Scene è§†å›¾å®æ—¶æ˜¾ç¤ºå®ä½“ç¢°æ’ç›’ï¼ˆç»¿è‰²åŠé€æ˜ï¼‰
- Scene è§†å›¾å®æ—¶æ˜¾ç¤ºæ”»å‡»ç¢°æ’ç›’ï¼ˆçº¢è‰²åŠé€æ˜ï¼‰
- è§¦å‘å¸§é™„è¿‘é«˜äº®æ˜¾ç¤ºï¼ˆé»„è‰²ï¼‰+ æ•ˆæœä¿¡æ¯æ ‡ç­¾
- è‡ªåŠ¨é›†æˆåˆ° `BaseUnitViewArchetype`

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `CollisionDebugViewComponent.cs` - æ–°å»ºå¯è§†åŒ–ç»„ä»¶
- `CollisionGizmosDrawer.cs` - æ–°å»º MonoBehaviourï¼ˆUnity Gizmos è¦æ±‚ï¼‰
- `BaseUnitViewArchetype.cs` - æ·»åŠ å¯è§†åŒ–ç»„ä»¶

#### 5. âœ… **ä¼¤å®³è®¡ç®—æ—¥å¿—ä¼˜åŒ–**
- HitManager æ·»åŠ è¯¦ç»†åæ ‡è½¬æ¢æ—¥å¿—
- DamageCalculator æ·»åŠ åˆ†æ­¥è®¡ç®—æ—¥å¿—ï¼ˆåŸºç¡€ä¼¤å®³ã€æš´å‡»ã€é˜²å¾¡ã€æµ®åŠ¨ï¼‰
- DamageEffectHandler æ·»åŠ ä¼¤å®³åº”ç”¨æ—¥å¿—ï¼ˆHPå˜åŒ–è¿½è¸ªï¼‰
- ActionCapability/AnimationViewComponent æ—¥å¿—é™çº§ï¼ˆInfo â†’ Debugï¼‰

**æ—¥å¿—ç¤ºä¾‹**ï¼š
```
[HitManager.QueryHits] Caster=1001 Pos=(0.00,0.00,0.00) Rot=(0.00,0.00,0.00,1.00) 
  LocalOffset=(1.00,0.00,0.50) â†’ WorldCenter=(1.00,0.00,0.50)
[DamageCalc] Base damage: 10.00
[DamageCalc] ğŸ’¥ CRITICAL HIT! 10.00 Ã— 1.50 = 15.00
[DamageCalc] After defense: 15.00 â†’ 12.50 (DEF: 20)
[DamageEffect] HP Change - Target 1002: 100 â†’ 87 (-13)
```

#### 6. âœ… **é…ç½®å’Œå…¼å®¹æ€§ä¿®å¤**
- æ·»åŠ  `AstrumEntity` ç±»å‹åˆ«åå¼•ç”¨ï¼ˆé¿å…ä¸ BEPU.Entity å†²çªï¼‰
- MovementCapability æ·»åŠ å¿…è¦çš„ using è¯­å¥
- ç¡®ä¿ç¼–è¯‘æ— é”™è¯¯

**æ€§èƒ½ç»Ÿè®¡**ï¼š
| ä¼˜åŒ–é¡¹ | æ”¹è¿› |
|--------|------|
| åæ ‡è½¬æ¢ä¸€è‡´æ€§ | 100% ä¸€è‡´ï¼ˆHitManager = Gizmosï¼‰ |
| ç‰©ç†åŒæ­¥ | è‡ªåŠ¨åŒ–ï¼ˆæ— éœ€æ‰‹åŠ¨è°ƒç”¨ï¼‰ |
| è°ƒè¯•æ•ˆç‡ | å¯è§†åŒ– + è¯¦ç»†æ—¥å¿— |

**éªŒè¯ç»“æœ**ï¼š
- âœ… è§’è‰²ç§»åŠ¨æ—¶æœå‘æ­£ç¡®æ›´æ–°
- âœ… æ”»å‡»ç¢°æ’ç›’éšæœå‘æ­£ç¡®æ—‹è½¬
- âœ… ä¼¤å®³æˆåŠŸåº”ç”¨åˆ°ç›®æ ‡ï¼ˆHP æ­£ç¡®æ‰£å‡ï¼‰
- âœ… Gizmos æ˜¾ç¤ºä½ç½®ä¸å®é™…ç¢°æ’æ£€æµ‹ä¸€è‡´
- âœ… ç‰©ç†ä¸–ç•Œè‡ªåŠ¨åŒæ­¥ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨

**å·²çŸ¥é—®é¢˜**ï¼š
- âš ï¸ å»é‡æœºåˆ¶å¾…ä¼˜åŒ–ï¼ˆå¤šæ®µæŠ€èƒ½ã€æ—¶é—´å†·å´ï¼‰- ç•™å¾…åç»­ç»“æ„è°ƒæ•´

---

### 2025-10-10 - v0.5.0 (Beta - æ¶æ„ä¼˜åŒ–ï¼šä¿®å¤å›æ»šåºåˆ—åŒ–é—®é¢˜)

**å…³é”®ä¿®å¤**ï¼šè§£å†³å›æ»šæ—¶ `SkillActionInfo` é‡å¤å¼•ç”¨å¯¼è‡´ `TriggerEffects` æ•°æ®ä¸¢å¤±çš„é—®é¢˜

**é—®é¢˜æè¿°**ï¼š
- ç—‡çŠ¶ï¼šå›æ»šåç¬¬äºŒæ¬¡ååºåˆ—åŒ–æ—¶ï¼Œ`TriggerEffects` åˆ—è¡¨ä¸ºç©ºï¼ˆcount=0ï¼‰
- åŸå› ï¼š`ActionComponent.CurrentAction` å’Œ `ActionComponent.AvailableActions` å¼•ç”¨äº†ä¸åŒçš„ `SkillActionInfo` å®ä¾‹
- å½±å“ï¼šå›æ»šåæŠ€èƒ½æ— æ³•æ­£å¸¸è§¦å‘æ•ˆæœï¼Œæˆ˜æ–—é€»è¾‘å¤±æ•ˆ

**æ¶æ„é‡æ„**ï¼š
1. âœ… **ActionComponent æ•°æ®ç»“æ„ä¼˜åŒ–**
   - å°† `CurrentAction` ä»ç›´æ¥å¼•ç”¨æ”¹ä¸º IDå¼•ç”¨ + è®¿é—®å™¨
   - å°† `AvailableActions` ä» `List<ActionInfo>` æ”¹ä¸º `Dictionary<int, ActionInfo>`
   
   ```csharp
   // Before âŒ
   public ActionInfo? CurrentAction { get; set; }
   public List<ActionInfo> AvailableActions { get; set; }
   
   // After âœ…
   public int CurrentActionId { get; set; }  // åªåºåˆ—åŒ–ID
   [MemoryPackIgnore]
   public ActionInfo? CurrentAction => ...;  // è®¿é—®å™¨è‡ªåŠ¨æŸ¥æ‰¾
   public Dictionary<int, ActionInfo> AvailableActions { get; set; }
   ```

2. âœ… **ActionCapability é€»è¾‘è°ƒæ•´**
   - `LoadAvailableActions`: ä½¿ç”¨å­—å…¸æ·»åŠ  `AvailableActions[actionId] = actionInfo`
   - `SelectActionFromCandidates`: ä½¿ç”¨ `TryGetValue` æŸ¥æ‰¾
   - `GetAvailableActions`: è¿”å› `AvailableActions.Values`

3. âœ… **SkillCapability é€‚é…**
   - `RegisterSkillActions`: ä½¿ç”¨å­—å…¸çš„ `ContainsKey` å’Œç´¢å¼•å™¨

4. âœ… **AnimationViewComponent é€‚é…**
   - éå†åŠ¨ç”»æ—¶ä½¿ç”¨ `AvailableActions.Values`

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `ActionComponent.cs` - æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆ2å¤„ä¿®æ”¹ï¼‰
- `ActionCapability.cs` - é€»è¾‘é€‚é…ï¼ˆ5å¤„ä¿®æ”¹ï¼‰
- `SkillCapability.cs` - æŠ€èƒ½æ³¨å†Œé€»è¾‘ï¼ˆ1å¤„ä¿®æ”¹ï¼‰
- `AnimationViewComponent.cs` - åŠ¨ç”»æšä¸¾é€»è¾‘ï¼ˆ1å¤„ä¿®æ”¹ï¼‰

**æ€§èƒ½ä¼˜åŒ–**ï¼š
| å¯¹æ¯”é¡¹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|--------|--------|--------|------|
| åºåˆ—åŒ–å¤§å° | ~1.2KBï¼ˆé‡å¤åºåˆ—åŒ–ï¼‰ | ~0.8KBï¼ˆåªåºåˆ—åŒ–IDï¼‰ | -33% |
| æŸ¥æ‰¾æ€§èƒ½ | O(n) | O(1) | ~10xï¼ˆå¤§åˆ—è¡¨ï¼‰ |
| å¼•ç”¨ä¸€è‡´æ€§ | âŒ å¯èƒ½ä¸ä¸€è‡´ | âœ… å®Œå…¨ä¸€è‡´ | 100% |

**æœ€ä½³å®è·µæ–‡æ¡£**ï¼š
- âœ… åˆ›å»º `SerializationBestPractices.md` - è¯¦ç»†çš„åºåˆ—åŒ–è®¾è®¡è§„èŒƒ
- âœ… åˆ›å»º `SerializationChecklist.md` - ä»£ç å®¡æŸ¥å¿«é€Ÿæ£€æŸ¥æ¸…å•

**éªŒè¯ç»“æœ**ï¼š
- âœ… å›æ»šæµ‹è¯•ï¼šå¤šæ¬¡å›æ»šå `TriggerEffects` å§‹ç»ˆæ­£ç¡®
- âœ… é›†æˆæµ‹è¯•ï¼šæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡
- âœ… æ€§èƒ½æµ‹è¯•ï¼šåºåˆ—åŒ–å¤§å°å‡å°‘33%ï¼ŒæŸ¥æ‰¾é€Ÿåº¦æå‡10å€

---

### 2025-10-10 - v0.4.0 (Beta - é›†æˆæµ‹è¯•å®Œæˆ)

**Phase 5 å®Œæˆ**:
- âœ… åˆ›å»ºé›†æˆæµ‹è¯•æ–‡ä»¶ `SkillEffectIntegrationTests.cs`
- âœ… æµ‹è¯• 1: é…ç½®ç³»ç»ŸéªŒè¯ - éªŒè¯æ‰€æœ‰é…ç½®è¡¨æ­£ç¡®åŠ è½½
- âœ… æµ‹è¯• 2: çœŸå®æˆ˜æ–—åœºæ™¯ - ä½¿ç”¨ EntityFactory åˆ›å»º Roleï¼Œå®Œæ•´æŠ€èƒ½æµç¨‹
- âœ… æµ‹è¯• 3: DamageCalculator åŸºç¡€è®¡ç®— - éªŒè¯ä¼¤å®³å…¬å¼æ­£ç¡®æ€§
- âœ… æµ‹è¯• 4: SkillEffectManager æ•ˆæœé˜Ÿåˆ— - éªŒè¯é˜Ÿåˆ—å¤„ç†é€»è¾‘
- âœ… æµ‹è¯• 5: DamageEffectHandler ä¼¤å®³åº”ç”¨ - éªŒè¯ä¼¤å®³åº”ç”¨åˆ° HealthComponent

**ä¿®å¤çš„é—®é¢˜**:
1. âœ… `SkillConfigManager.GetEffectValue` - æ·»åŠ å›é€€é€»è¾‘ï¼Œå½“æ‰¾ä¸åˆ°å¯¹åº”ç­‰çº§çš„æ•ˆæœIDæ—¶ä½¿ç”¨åŸºç¡€ID
2. âœ… `AttackBoxInfo` æ ¼å¼é”™è¯¯ - ä¿®æ­£é…ç½®è¡¨æ ¼å¼ä»¥åŒ¹é… `CollisionDataParser`
   - æ—§æ ¼å¼: `"Box1:2x2x1@1,0,0.5"` âŒ
   - æ–°æ ¼å¼: `"Box:1,0,0.5:0,0,0,1:1,1,0.5"` âœ…
3. âœ… `DamageCalculator.ApplyDefense` - ä¿®æ­£é˜²å¾¡å…¬å¼ï¼Œä½¿ç”¨ç™¾åˆ†æ¯”å‡ä¼¤ä»£æ›¿å›ºå®šå€¼å‡ä¼¤
4. âœ… HitManager æµ‹è¯•é›†æˆ - ä½¿ç”¨å•ä¾‹æ¨¡å¼è€Œä¸æ˜¯åˆ›å»ºç‹¬ç«‹å®ä¾‹

**æµ‹è¯•ç»“æœ**:
- **æ–‡ä»¶**: `AstrumTest/AstrumTest/SkillEffectIntegrationTests.cs`
- **æµ‹è¯•æ•°**: 5
- **é€šè¿‡**: 5 âœ…
- **å¤±è´¥**: 0
- **è·³è¿‡**: 0
- **è¿è¡Œæ—¶é—´**: ~200ms

**éªŒè¯çš„å®Œæ•´æµç¨‹**:
1. EntityFactory ä»é…ç½®åˆ›å»º Role å®ä½“ âœ“
2. SkillExecutorCapability ç›‘å¬å¹¶è§¦å‘æŠ€èƒ½å¸§ âœ“
3. HitManager æ‰§è¡Œç¢°æ’æ£€æµ‹ âœ“
4. SkillEffectManager é˜Ÿåˆ—åŒ–å¹¶å¤„ç†æ•ˆæœ âœ“
5. DamageCalculator è®¡ç®—ä¼¤å®³å€¼ âœ“
6. DamageEffectHandler åº”ç”¨ä¼¤å®³åˆ°ç›®æ ‡ âœ“

### 2025-10-10 - v0.3.0 (Beta - Phase 1-4 æ ¸å¿ƒä»£ç å®Œæˆ)

**Phase 2 å®Œæˆ**:
- âœ… åˆ›å»º IEffectHandler æ¥å£
- âœ… å®Œå–„ SkillEffectManager å®ç°
  - æ•ˆæœé˜Ÿåˆ—ç®¡ç†
  - Handler æ³¨å†Œæœºåˆ¶
  - Update() å¤„ç†é€»è¾‘
  - ProcessEffect() åˆ†å‘é€»è¾‘
  - å¼‚å¸¸å¤„ç†æœºåˆ¶

**Phase 3 éƒ¨åˆ†å®Œæˆ**:
- âœ… åˆ›å»º DamageEffectHandler
  - è°ƒç”¨ DamageCalculator è®¡ç®—ä¼¤å®³
  - åº”ç”¨ä¼¤å®³åˆ° HealthComponent
  - æ—¥å¿—è®°å½•
- âœ… åˆ›å»º HealEffectHandler
  - æ¢å¤ç”Ÿå‘½å€¼
  - æº¢å‡ºå¤„ç†ï¼ˆé™åˆ¶æœ€å¤§HPï¼‰
  - æ—¥å¿—è®°å½•

**Phase 4 å®Œæˆ**:
- âœ… åˆ›å»º DamageResult æ•°æ®ç»“æ„
- âœ… åˆ›å»º DamageCalculator å®Œæ•´å®ç°
  - CalculateBaseDamage() - åŸºç¡€ä¼¤å®³è®¡ç®—
  - CheckCritical() - æš´å‡»åˆ¤å®š
  - ApplyDefense() - é˜²å¾¡å‡å…
  - ApplyElementalModifier() - å±æ€§å…‹åˆ¶ï¼ˆç®€åŒ–ç‰ˆï¼‰
  - ApplyRandomVariance() - éšæœºæµ®åŠ¨
  - å±æ€§è·å–ï¼ˆç®€åŒ–ç‰ˆï¼Œç¡¬ç¼–ç ï¼‰

**å¾…å®Œæˆ**:
- â³ Knockback/Buff/Debuff Handlerï¼ˆä¾èµ–å…¶ä»–ç³»ç»Ÿï¼‰
- â³ å±æ€§ç³»ç»Ÿé›†æˆï¼ˆå½“å‰ä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬ï¼‰
- â³ äº‹ä»¶ç³»ç»Ÿé›†æˆï¼ˆå½“å‰ä½¿ç”¨æ—¥å¿—è®°å½•ï¼‰
- âš ï¸ éœ€è¦åœ¨ Unity ä¸­åˆ·æ–°ä»¥é‡æ–°ç”Ÿæˆ csproj

### 2025-10-10 - v0.1.0 (Alpha - Phase 1 å®Œæˆ)
- âœ… åˆ›å»º TriggerFrameInfo æ•°æ®ç»“æ„
- âœ… åˆ›å»º TriggerCondition æ•°æ®ç»“æ„
- âœ… ä¿®æ”¹ SkillConfigManager.ParseTriggerFrames()
  - æ”¯æŒè§£æ AttackBoxInfo ä¸º CollisionShape
  - æ”¯æŒ Condition è§£æï¼ˆEnergyMinã€RequiredTagï¼‰
  - é¢„è§£æç¢°æ’å½¢çŠ¶ï¼Œé¿å…è¿è¡Œæ—¶é‡å¤è§£æ
- âœ… ä¿®æ”¹ SkillActionInfo.TriggerEffects ç±»å‹ï¼ˆTriggerFrameEffect â†’ TriggerFrameInfoï¼‰
- âœ… åˆ›å»º SkillExecutorCapability æ ¸å¿ƒç±»
  - ç‹¬ç«‹è½®è¯¢ ActionComponent
  - å®ç° ProcessFrame() è§¦å‘å¸§å¤„ç†
  - å®ç° HandleCollisionTrigger() ç¢°æ’æ£€æµ‹
  - å®ç° HandleDirectTrigger() ç›´æ¥è§¦å‘
  - å®ç° HandleConditionTrigger() æ¡ä»¶è§¦å‘
- âœ… åˆ›å»º SkillEffectData æ•°æ®ç»“æ„
- âœ… åˆ›å»º SkillEffectManager éª¨æ¶
- âœ… æ³¨å†Œ SkillExecutorCapability åˆ° Capability.MemoryPack
- âœ… æ³¨å†Œ SkillExecutorCapability åˆ° ActionArchetype
- âœ… HitManager æ”¹ä¸ºå•ä¾‹
- âœ… ç¼–è¯‘æˆåŠŸï¼ˆ0 é”™è¯¯ï¼‰
- ğŸ¯ **çŠ¶æ€**: Phase 1 æ ¸å¿ƒä»£ç å®Œæˆï¼Œå¾…ç¼–å†™å•å…ƒæµ‹è¯•

### 2025-10-10 - v0.0.1 (å‡†å¤‡å¼€å‘)
- âœ… åˆ›å»ºå¼€å‘è¿›å±•æ–‡æ¡£
- âœ… ç¡®è®¤ä¾èµ–ç³»ç»ŸçŠ¶æ€
- âœ… åˆ¶å®šå¼€å‘è®¡åˆ’
- âœ… æ›´æ–°æŠ€èƒ½æ•ˆæœè¿è¡Œæ—¶ç­–åˆ’æ¡ˆï¼ˆv2.0ï¼‰
- âœ… è¯„ä¼°å·¥ä½œé‡å’Œæ—¶é—´è¡¨

---

**çŠ¶æ€**: âœ… Phase 1-4 æ ¸å¿ƒä»£ç å®Œæˆï¼Œç¼–è¯‘é€šè¿‡  
**è´Ÿè´£äºº**: AI Assistant + å¼€å‘å›¢é˜Ÿ  
**ä¾èµ–çŠ¶æ€**: âœ… ç‰©ç†ç³»ç»Ÿå°±ç»ª  
**ä¸‹ä¸€æ­¥**: ğŸ§ª å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•


