# æŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨ç­–åˆ’æ¡ˆ

**ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-09  
**æœ€åæ›´æ–°**: 2025-10-09  
**çŠ¶æ€**: è§„åˆ’é˜¶æ®µ  

> ğŸ“– **ç›¸å…³æ–‡æ¡£**ï¼š
> - [åŠ¨ä½œç¼–è¾‘å™¨ç­–åˆ’æ¡ˆ](../åŠ¨ä½œç¼–è¾‘å™¨/åŠ¨ä½œç¼–è¾‘å™¨ç­–åˆ’æ¡ˆ.md) - åŸºç¡€æ¶æ„å‚è€ƒ
> - [æŠ€èƒ½ç³»ç»Ÿç­–åˆ’æ¡ˆ](../../Combat-System/æŠ€èƒ½ç³»ç»Ÿç­–åˆ’æ¡ˆ.md) - æŠ€èƒ½ç³»ç»Ÿè®¾è®¡
> - [åŠ¨ä½œç³»ç»Ÿç­–åˆ’æ¡ˆ](../../Combat-System/ActionSystem/åŠ¨ä½œç³»ç»Ÿç­–åˆ’æ¡ˆ.md) - åŠ¨ä½œç³»ç»Ÿè®¾è®¡

---

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [è®¾è®¡ç†å¿µ](#è®¾è®¡ç†å¿µ)
3. [ç»§æ‰¿ä¸æ‰©å±•](#ç»§æ‰¿ä¸æ‰©å±•)
4. [æŠ€èƒ½ä¸“å±åŠŸèƒ½](#æŠ€èƒ½ä¸“å±åŠŸèƒ½)
5. [æ—¶é—´è½´æ‰©å±•](#æ—¶é—´è½´æ‰©å±•)
6. [æ•°æ®ç»“æ„](#æ•°æ®ç»“æ„)
7. [UI/UXè®¾è®¡](#uiuxè®¾è®¡)
8. [æŠ€æœ¯å®ç°](#æŠ€æœ¯å®ç°)
9. [å¼€å‘ä¼˜å…ˆçº§](#å¼€å‘ä¼˜å…ˆçº§)
10. [åç»­è§„åˆ’](#åç»­è§„åˆ’)

---

## æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

æŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨æ˜¯åŸºäºåŠ¨ä½œç¼–è¾‘å™¨æ‰©å±•çš„ä¸“ç”¨å·¥å…·ï¼Œç”¨äºç¼–è¾‘ **SkillActionTable** é…ç½®è¡¨æ•°æ®ã€‚SkillAction æ˜¯ Action çš„ç‰¹æ®Šç±»å‹ï¼ŒåŒ…å«æŠ€èƒ½ç³»ç»Ÿä¸“å±çš„é…ç½®æ•°æ®ï¼ˆè§¦å‘å¸§æ•ˆæœã€ç¢°æ’ç›’ã€æ¶ˆè€—ç­‰ï¼‰ã€‚

### 1.2 æ ¸å¿ƒç›®æ ‡

- **ç»§æ‰¿åŠ¨ä½œç¼–è¾‘å™¨** - å¤ç”¨æ‰€æœ‰åŠ¨ä½œç¼–è¾‘å™¨çš„åŠŸèƒ½ï¼ˆæ—¶é—´è½´ã€å–æ¶ˆæ ‡ç­¾ã€åŠ¨ç”»é¢„è§ˆç­‰ï¼‰
- **æŠ€èƒ½ä¸“å±æ‰©å±•** - å¢åŠ æŠ€èƒ½æ•ˆæœè§¦å‘ã€ç¢°æ’ç›’é…ç½®ç­‰æŠ€èƒ½ç‰¹æœ‰åŠŸèƒ½
- **å¯è§†åŒ–æ•ˆæœç¼–è¾‘** - åœ¨æ—¶é—´è½´ä¸Šç›´è§‚ç¼–è¾‘æŠ€èƒ½æ•ˆæœçš„è§¦å‘æ—¶æœº
- **å…³è”æ•ˆæœè¡¨** - ä¸ SkillEffectTable ç´§å¯†é›†æˆï¼Œæ”¯æŒæ•ˆæœé¢„è§ˆå’Œå¿«é€Ÿé…ç½®

### 1.3 å…³é”®ç‰¹æ€§

- ğŸ”— **å®Œæ•´ç»§æ‰¿** - åŠ¨ä½œç¼–è¾‘å™¨çš„æ‰€æœ‰åŠŸèƒ½ï¼ˆå–æ¶ˆæ ‡ç­¾ã€ç‰¹æ•ˆã€éŸ³æ•ˆã€ç›¸æœºéœ‡åŠ¨ï¼‰
- ğŸ¯ **æŠ€èƒ½æ•ˆæœè½¨é“** - æ–°å¢"æŠ€èƒ½æ•ˆæœ"è½¨é“ï¼Œå¯è§†åŒ–é…ç½®è§¦å‘å¸§
- ğŸ’¥ **æ•ˆæœé¢„è§ˆ** - å®æ—¶æŸ¥çœ‹æŠ€èƒ½æ•ˆæœæ•°æ®ï¼ˆä¼¤å®³ã€èŒƒå›´ã€ç±»å‹ç­‰ï¼‰
- ğŸ¨ **ç¢°æ’ç›’å¯è§†åŒ–** - æ”»å‡»ç¢°æ’ç›’çš„å¯è§†åŒ–é…ç½®å’Œé¢„è§ˆ
- ğŸ”„ **åŒå‘å…³è”** - ä¸ SkillTable å’Œ SkillEffectTable çš„åŒå‘å…³è”

---

## è®¾è®¡ç†å¿µ

### 2.1 ç»§æ‰¿ä¼˜å…ˆ

**è®¾è®¡åŸåˆ™**ï¼šæœ€å¤§åŒ–å¤ç”¨åŠ¨ä½œç¼–è¾‘å™¨çš„æ¶æ„å’Œä»£ç 

```
æŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨ = åŠ¨ä½œç¼–è¾‘å™¨ + æŠ€èƒ½ä¸“å±æ‰©å±•
```

**ç»§æ‰¿ç­–ç•¥**ï¼š
- ç»§æ‰¿æ‰€æœ‰æ¨¡å—ç±»ï¼ˆActionListModule â†’ SkillActionListModuleï¼‰
- ç»§æ‰¿æ—¶é—´è½´ç³»ç»Ÿï¼ˆå®Œå…¨å¤ç”¨ï¼‰
- ç»§æ‰¿æ•°æ®æŒä¹…åŒ–ï¼ˆæ‰©å±• SkillActionTable çš„è¯»å†™ï¼‰
- ç»§æ‰¿çª—å£å¸ƒå±€ï¼ˆä¿æŒä¸€è‡´çš„ç”¨æˆ·ä½“éªŒï¼‰

### 2.2 æŠ€èƒ½ç‰¹åŒ–

**æ ¸å¿ƒåŸåˆ™**ï¼šåœ¨åŠ¨ä½œç¼–è¾‘å™¨åŸºç¡€ä¸Šï¼Œå¢å¼ºæŠ€èƒ½ç³»ç»Ÿç‰¹æœ‰çš„ç¼–è¾‘èƒ½åŠ›

**æŠ€èƒ½ä¸“å±åŠŸèƒ½**ï¼š
1. **è§¦å‘å¸§æ•ˆæœ** - Frame:Type:EffectId çš„å¯è§†åŒ–ç¼–è¾‘ï¼ˆå¯é€‰ HitBox/Conditionï¼‰
2. **ç¢°æ’ç›’é…ç½®** - AttackBoxInfo çš„ç¼–è¾‘å’Œé¢„è§ˆ
3. **æ•ˆæœå…³è”** - ä¸ SkillEffectTable çš„æŸ¥è¯¢å’Œå±•ç¤º
4. **æŠ€èƒ½æˆæœ¬** - ActualCost å’Œ ActualCooldown çš„é…ç½®

### 2.3 è¡¨æ ¼å…³è”

**æ•°æ®å…³ç³»**ï¼š
```
SkillActionTable (æŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨)
    â†“ ActionId
ActionTable (åŠ¨ä½œç¼–è¾‘å™¨)
    â†’ åŠ¨ç”»ã€è¡¨ç°æ•°æ®
    
SkillActionTable
    â†“ TriggerFrames: Frame:Type:EffectIdï¼ˆå¯é€‰ HitBox/Conditionï¼‰
SkillEffectTable (æŠ€èƒ½æ•ˆæœè¡¨)
    â†’ æ•ˆæœæ•°æ®ã€æ•°å€¼ã€å‚æ•°
    
SkillActionTable
    â†“ SkillId
SkillTable (æŠ€èƒ½ç¼–è¾‘å™¨)
    â†’ æŠ€èƒ½åŸºæœ¬ä¿¡æ¯ã€åŠ¨ä½œåˆ—è¡¨
```

---

## ç»§æ‰¿ä¸æ‰©å±•

### 3.1 å®Œæ•´ç»§æ‰¿çš„åŠŸèƒ½

ä»åŠ¨ä½œç¼–è¾‘å™¨**å®Œæ•´ç»§æ‰¿**ä»¥ä¸‹åŠŸèƒ½ï¼š

#### 3.1.1 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
- âœ… **åŠ¨ä½œåˆ—è¡¨æ¨¡å—** - åŠ¨ä½œçš„åˆ›å»ºã€åˆ é™¤ã€å¤åˆ¶ã€æ’åº
- âœ… **åŠ¨ä½œé…ç½®æ¨¡å—** - åŸºç¡€ä¿¡æ¯ã€å–æ¶ˆæ ‡ç­¾ã€å‘½ä»¤ç»‘å®š
- âœ… **åŠ¨ç”»é¢„è§ˆæ¨¡å—** - 3D æ¨¡å‹å’ŒåŠ¨ç”»å®æ—¶é¢„è§ˆ
- âœ… **æ—¶é—´è½´æ¨¡å—** - å¤šè½¨é“æ—¶é—´è½´ç³»ç»Ÿ

#### 3.1.2 æ—¶é—´è½´è½¨é“
- âœ… **è¢«å–æ¶ˆæ ‡ç­¾è½¨é“** - BeCancelledTag é…ç½®
- âœ… **ç‰¹æ•ˆè½¨é“** - Visual Effect é…ç½®ï¼ˆé¢„ç•™ï¼‰
- âœ… **éŸ³æ•ˆè½¨é“** - Sound Effect é…ç½®ï¼ˆé¢„ç•™ï¼‰
- âœ… **ç›¸æœºéœ‡åŠ¨è½¨é“** - Camera Shake é…ç½®ï¼ˆé¢„ç•™ï¼‰

#### 3.1.3 æ•°æ®ç³»ç»Ÿ
- âœ… **CSV è¯»å†™** - åŸºäº Luban æ¡†æ¶çš„é…ç½®è¡¨è¯»å†™
- âœ… **æ•°æ®éªŒè¯** - å®Œæ•´æ€§æ£€æŸ¥å’Œé”™è¯¯æç¤º
- âœ… **è„æ ‡è®°** - ä¿®æ”¹è·Ÿè¸ªå’Œä¿å­˜æç¤º

### 3.2 æ‰©å±•çš„åŠŸèƒ½

åœ¨ç»§æ‰¿åŸºç¡€ä¸Š**æ–°å¢**æŠ€èƒ½ä¸“å±åŠŸèƒ½ï¼š

#### 3.2.1 æ–°å¢è½¨é“
- ğŸ†• **æŠ€èƒ½æ•ˆæœè½¨é“** - è§¦å‘å¸§æ•ˆæœçš„å¯è§†åŒ–ç¼–è¾‘
- ğŸ†• **ç¢°æ’ç›’è½¨é“** - æ”»å‡»ç¢°æ’ç›’çš„æ—¶é—´è½´å±•ç¤ºï¼ˆå¯é€‰ï¼‰

#### 3.2.2 æ–°å¢é…ç½®åŒº
- ğŸ†• **æŠ€èƒ½ä¿¡æ¯é¢æ¿** - æ˜¾ç¤ºæ‰€å±æŠ€èƒ½IDã€æŠ€èƒ½åç§°
- ğŸ†• **æŠ€èƒ½æˆæœ¬é…ç½®** - ActualCost å’Œ ActualCooldown
- ğŸ†• **ç¢°æ’ç›’ç¼–è¾‘å™¨** - AttackBoxInfo çš„å¯è§†åŒ–ç¼–è¾‘

#### 3.2.3 æ–°å¢åŠŸèƒ½
- ğŸ†• **æ•ˆæœé¢„è§ˆçª—å£** - æŸ¥çœ‹ SkillEffectTable çš„è¯¦ç»†æ•°æ®
- ğŸ†• **æ•ˆæœå¿«é€Ÿé€‰æ‹©** - æ•ˆæœIDçš„ä¸‹æ‹‰é€‰æ‹©å’Œæœç´¢
- ğŸ†• **æŠ€èƒ½å…³è”æŸ¥çœ‹** - æŸ¥çœ‹è¯¥åŠ¨ä½œå±äºå“ªä¸ªæŠ€èƒ½

---

## æŠ€èƒ½ä¸“å±åŠŸèƒ½

### 4.1 è§¦å‘å¸§æ•ˆæœç¼–è¾‘

#### åŠŸèƒ½æè¿°
åœ¨æ—¶é—´è½´ä¸Šå¯è§†åŒ–ç¼–è¾‘æŠ€èƒ½æ•ˆæœçš„è§¦å‘æ—¶æœºå’Œç±»å‹ã€‚

#### æ•°æ®ç»“æ„
```csharp
TriggerFrameEffect
â”œâ”€â”€ Frame (int) - è§¦å‘å¸§å·
â”œâ”€â”€ Type (string) - è§¦å‘ç±»å‹ (Collision/Direct/Condition)
â”œâ”€â”€ HitBox (optional) - å³æ—¶æ£€æµ‹ç”¨ç¢°æ’ç›’
â”œâ”€â”€ Condition (optional) - å³æ—¶æ£€æµ‹ç”¨æ¡ä»¶å‚æ•°
â””â”€â”€ EffectId (int) - æŠ€èƒ½æ•ˆæœID
```

#### UIè®¾è®¡
```
æ—¶é—´è½´è½¨é“ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŠ€èƒ½æ•ˆæœ â”‚  [+]                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Frame 5   â”‚ [Collision] ä¼¤å®³:150          â”‚ â† æ•ˆæœäº‹ä»¶
â”‚ Frame 12  â”‚ [Direct]    å‡»é€€:3.0          â”‚ â† æ•ˆæœäº‹ä»¶
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### äº¤äº’æ–¹å¼
- **æ·»åŠ **: å³é”®æ—¶é—´è½´ â†’ "æ·»åŠ æŠ€èƒ½æ•ˆæœ" â†’ é€‰æ‹©æ•ˆæœç±»å‹å’ŒID
- **ç¼–è¾‘**: åŒå‡»æ•ˆæœäº‹ä»¶ â†’ å¼¹å‡ºæ•ˆæœç¼–è¾‘é¢æ¿
- **åˆ é™¤**: é€‰ä¸­åæŒ‰ Delete é”®æˆ–å³é”®èœå•åˆ é™¤
- **æ‹–åŠ¨**: æ‹–æ‹½æ•ˆæœäº‹ä»¶å¯è°ƒæ•´è§¦å‘å¸§ä½ç½®
- **é¢„è§ˆ**: æ‚¬åœæ˜¾ç¤ºæ•ˆæœè¯¦æƒ…ï¼ˆç±»å‹ã€æ•°å€¼ã€èŒƒå›´ç­‰ï¼‰

### 4.2 æŠ€èƒ½æ•ˆæœé€‰æ‹©å™¨

#### åŠŸèƒ½æè¿°
æä¾›å‹å¥½çš„ SkillEffectTable æ•ˆæœé€‰æ‹©ç•Œé¢ã€‚

#### UIè®¾è®¡
```
â”Œâ”€ é€‰æ‹©æŠ€èƒ½æ•ˆæœ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  æœç´¢: [________________]  [ğŸ”]     â”‚
â”‚                                      â”‚
â”‚  æ•ˆæœåˆ—è¡¨:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ 4001 - ç‰©ç†ä¼¤å®³ (150.0)        â”‚â”‚
â”‚  â”‚ 4002 - å‡»é€€æ•ˆæœ (3.0)          â”‚â”‚
â”‚  â”‚ 4003 - ç‰©ç†ä¼¤å®³ (80.0)         â”‚â”‚
â”‚  â”‚ ...                             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                      â”‚
â”‚  è¯¦ç»†ä¿¡æ¯:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ æ•ˆæœID: 4001                    â”‚â”‚
â”‚  â”‚ æ•ˆæœç±»å‹: ä¼¤å®³                  â”‚â”‚
â”‚  â”‚ æ•ˆæœæ•°å€¼: 150.0                 â”‚â”‚
â”‚  â”‚ ç›®æ ‡ç±»å‹: æ•Œäºº                  â”‚â”‚
â”‚  â”‚ æ•ˆæœèŒƒå›´: 2.0                   â”‚â”‚
â”‚  â”‚ è§†è§‰æ•ˆæœID: 5001                â”‚â”‚
â”‚  â”‚ éŸ³æ•ˆID: 6001                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                      â”‚
â”‚           [ç¡®å®š]    [å–æ¶ˆ]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åŠŸèƒ½ç‰¹æ€§
- **æœç´¢è¿‡æ»¤**: æ ¹æ®æ•ˆæœIDã€ç±»å‹ã€æ•°å€¼æœç´¢
- **åˆ†ç±»æ˜¾ç¤º**: æŒ‰æ•ˆæœç±»å‹ï¼ˆä¼¤å®³ã€æ²»ç–—ã€buffç­‰ï¼‰åˆ†ç±»
- **è¯¦ç»†é¢„è§ˆ**: æ˜¾ç¤ºæ•ˆæœçš„æ‰€æœ‰å‚æ•°
- **å¿«é€Ÿåˆ›å»º**: å¦‚æœéœ€è¦çš„æ•ˆæœä¸å­˜åœ¨ï¼Œå¯å¿«é€Ÿè·³è½¬åˆ° SkillEffectTable åˆ›å»º

### 4.3 ç¢°æ’ç›’ç¼–è¾‘å™¨

#### åŠŸèƒ½æè¿°
å¯è§†åŒ–ç¼–è¾‘æ”»å‡»ç¢°æ’ç›’ä¿¡æ¯ï¼ˆAttackBoxInfoï¼‰ã€‚

#### æ•°æ®æ ¼å¼
```
AttackBoxInfo å­—ç¬¦ä¸²æ ¼å¼:
"Box1:5x2x1,Box2:3x3x1"

è§£æä¸º:
â”œâ”€â”€ Box1: 5(é•¿) x 2(å®½) x 1(é«˜)
â””â”€â”€ Box2: 3(é•¿) x 3(å®½) x 1(é«˜)
```

#### UIè®¾è®¡
```
â”Œâ”€ æ”»å‡»ç¢°æ’ç›’é…ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  ç¢°æ’ç›’åˆ—è¡¨:                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Box1: 5.0 x 2.0 x 1.0    [ç¼–è¾‘]â”‚â”‚
â”‚  â”‚ Box2: 3.0 x 3.0 x 1.0    [åˆ é™¤]â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                      â”‚
â”‚  [+ æ·»åŠ æ–°ç¢°æ’ç›’]                    â”‚
â”‚                                      â”‚
â”‚  é¢„è§ˆ (3D):                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”                 â”‚â”‚
â”‚  â”‚         â”‚Box1 â”‚                 â”‚â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”             â”‚â”‚
â”‚  â”‚     â”‚    Box2      â”‚             â”‚â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                      â”‚
â”‚         [åº”ç”¨]    [å–æ¶ˆ]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç¼–è¾‘æ–¹å¼
- **åˆ—è¡¨ç¼–è¾‘**: åœ¨åˆ—è¡¨ä¸­æ·»åŠ /åˆ é™¤/ä¿®æ”¹ç¢°æ’ç›’å‚æ•°
- **3Dé¢„è§ˆ**: åœ¨é¢„è§ˆçª—å£ä¸­å¯è§†åŒ–æ˜¾ç¤ºç¢°æ’ç›’
- **ä¸è§’è‰²å¯¹é½**: ç¢°æ’ç›’ç›¸å¯¹äºè§’è‰²æ¨¡å‹çš„ä½ç½®å’Œå¤§å°
- **å®æ—¶æ›´æ–°**: ä¿®æ”¹å‚æ•°æ—¶å®æ—¶æ›´æ–°é¢„è§ˆ

### 4.4 æŠ€èƒ½æˆæœ¬é…ç½®

#### åŠŸèƒ½æè¿°
é…ç½®æŠ€èƒ½çš„å®é™…æ¶ˆè€—å’Œå†·å´æ—¶é—´ã€‚

#### UIè®¾è®¡
```
â”Œâ”€ æŠ€èƒ½æˆæœ¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  å®é™…æ³•åŠ›æ¶ˆè€—:  [____20____]         â”‚
â”‚  (SkillTableä¸­çš„DisplayCostä»…ç”¨äºUIå±•ç¤º) â”‚
â”‚                                      â”‚
â”‚  å®é™…å†·å´æ—¶é—´:  [____300___] å¸§      â”‚
â”‚  (çº¦ 5.0 ç§’)                         â”‚
â”‚  (SkillTableä¸­çš„DisplayCooldownä»…ç”¨äºUIå±•ç¤º) â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è¯´æ˜
- **ActualCost**: æŠ€èƒ½å®é™…æ¶ˆè€—çš„æ³•åŠ›å€¼ï¼ˆè¿è¡Œæ—¶ä½¿ç”¨ï¼‰
- **ActualCooldown**: æŠ€èƒ½å®é™…å†·å´å¸§æ•°ï¼ˆ60å¸§ = 1ç§’ï¼‰
- **ä¸å±•ç¤ºå€¼åŒºåˆ†**: å±•ç¤ºå€¼åœ¨ SkillTable ä¸­é…ç½®ï¼Œå®é™…å€¼åœ¨ SkillActionTable ä¸­é…ç½®

---

## æ—¶é—´è½´æ‰©å±•

### 5.1 æ–°å¢è½¨é“ï¼šæŠ€èƒ½æ•ˆæœè½¨é“

#### è½¨é“é…ç½®
```csharp
TimelineTrackConfig
{
    TrackId = "SkillEffects",
    TrackName = "æŠ€èƒ½æ•ˆæœ",
    TrackColor = Color.red,
    EventType = TimelineEventType.Instant,
    CanHaveMultipleEvents = true,
    AllowOverlap = true
}
```

#### äº‹ä»¶æ¸²æŸ“
```csharp
SkillEffectEventRenderer
â”œâ”€â”€ ç»˜åˆ¶è±å½¢æ ‡è®°ï¼ˆè§¦å‘ç‚¹ï¼‰
â”œâ”€â”€ æ˜¾ç¤ºæ•ˆæœç±»å‹å›¾æ ‡ï¼ˆâš”ï¸ä¼¤å®³ / ğŸ’šæ²»ç–— / ğŸ’¥å‡»é€€ï¼‰
â”œâ”€â”€ æ˜¾ç¤ºæ•ˆæœIDå’Œæ•°å€¼
â””â”€â”€ æ‚¬åœæ˜¾ç¤ºè¯¦ç»†tooltip
```

#### äº‹ä»¶æ•°æ®
```csharp
TimelineEvent (æŠ€èƒ½æ•ˆæœ)
â”œâ”€â”€ EventId (string) - "SkillEffect_{Frame}"
â”œâ”€â”€ StartFrame (int) - è§¦å‘å¸§å·
â”œâ”€â”€ EventType (TimelineEventType.Instant)
â””â”€â”€ EventData (Dictionary<string, object>)
    â”œâ”€â”€ Type (string) - "Collision"/"Direct"/"Condition"
    â”œâ”€â”€ HitBox (object) - { shape,size/radius,height,offset }
    â”œâ”€â”€ Condition (object) - { EnergyMin, RequiredTag }
    â”œâ”€â”€ EffectId (int) - æŠ€èƒ½æ•ˆæœID
    â””â”€â”€ EffectData (SkillEffectTable) - ç¼“å­˜çš„æ•ˆæœæ•°æ®
```

### 5.2 äº‹ä»¶äº¤äº’å¢å¼º

#### å³é”®èœå•æ‰©å±•
```
å³é”®æŠ€èƒ½æ•ˆæœäº‹ä»¶:
â”œâ”€â”€ ç¼–è¾‘æ•ˆæœ...
â”œâ”€â”€ æ›´æ”¹è§¦å‘ç±»å‹
â”‚   â”œâ”€â”€ Collision (ç¢°æ’è§¦å‘)
â”‚   â”œâ”€â”€ Direct (ç›´æ¥è§¦å‘)
â”‚   â””â”€â”€ Condition (æ¡ä»¶è§¦å‘)
â”œâ”€â”€ æŸ¥çœ‹æ•ˆæœè¯¦æƒ…...
â”œâ”€â”€ è·³è½¬åˆ°æ•ˆæœè¡¨...
â”œâ”€â”€ åˆ é™¤
â””â”€â”€ å¤åˆ¶åˆ°å‰ªè´´æ¿
```

#### å¿«æ·é”®æ”¯æŒ
- `Ctrl + E` - ç¼–è¾‘é€‰ä¸­çš„æŠ€èƒ½æ•ˆæœ
- `Ctrl + D` - å¤åˆ¶é€‰ä¸­çš„æŠ€èƒ½æ•ˆæœ
- `Delete` - åˆ é™¤é€‰ä¸­çš„æŠ€èƒ½æ•ˆæœ
- `F` - èšç„¦åˆ°é€‰ä¸­çš„æ•ˆæœ

---

## æ•°æ®ç»“æ„

### 6.1 SkillActionEditorData

```csharp
/// <summary>
/// æŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨æ•°æ® - ç»§æ‰¿è‡ª ActionEditorData
/// </summary>
public class SkillActionEditorData : ActionEditorData
{
    // ===== ç»§æ‰¿è‡ª ActionEditorData çš„å­—æ®µ =====
    // public int ActionId;
    // public string ActionName;
    // public List<CancelTag> CancelTags;
    // public List<BeCancelledTag> BeCancelledTags;
    // public List<ActionCommand> Commands;
    // ... ç­‰æ‰€æœ‰åŠ¨ä½œå­—æ®µ
    
    // ===== æŠ€èƒ½ä¸“å±å­—æ®µ =====
    
    [TitleGroup("æŠ€èƒ½ä¿¡æ¯")]
    [LabelText("æ‰€å±æŠ€èƒ½ID"), ReadOnly]
    [InfoBox("å…³è”åˆ° SkillTable", InfoMessageType.Info)]
    public int SkillId;
    
    [TitleGroup("æŠ€èƒ½ä¿¡æ¯")]
    [LabelText("æŠ€èƒ½åç§°"), ReadOnly]
    [ShowInInspector]
    private string SkillName => GetSkillName(SkillId);
    
    [TitleGroup("æŠ€èƒ½æˆæœ¬")]
    [LabelText("å®é™…æ³•åŠ›æ¶ˆè€—"), Range(0, 1000)]
    [InfoBox("è¿è¡Œæ—¶å®é™…æ¶ˆè€—çš„æ³•åŠ›å€¼", InfoMessageType.None)]
    public int ActualCost = 0;
    
    [TitleGroup("æŠ€èƒ½æˆæœ¬")]
    [LabelText("å®é™…å†·å´æ—¶é—´(å¸§)"), Range(0, 1800)]
    [InfoBox("1ç§’ = 60å¸§ï¼Œ300å¸§ = 5ç§’", InfoMessageType.None)]
    public int ActualCooldown = 0;
    
    [TitleGroup("æ”»å‡»ç¢°æ’ç›’")]
    [LabelText("ç¢°æ’ç›’ä¿¡æ¯")]
    [InfoBox("æ ¼å¼: Box1:5x2x1,Box2:3x3x1", InfoMessageType.None)]
    [OnValueChanged("OnAttackBoxInfoChanged")]
    public string AttackBoxInfo = "";
    
    [TitleGroup("æŠ€èƒ½æ•ˆæœ")]
    [LabelText("è§¦å‘å¸§æ•ˆæœåˆ—è¡¨")]
    [InfoBox("åœ¨æ—¶é—´è½´ä¸Šå¯è§†åŒ–ç¼–è¾‘", InfoMessageType.Warning)]
    [TableList(ShowIndexLabels = true)]
    public List<TriggerFrameData> TriggerFrames = new List<TriggerFrameData>();
    
    // ===== è¾…åŠ©æ–¹æ³• =====
    
    /// <summary>
    /// ä»æ—¶é—´è½´äº‹ä»¶åŒæ­¥è§¦å‘å¸§æ•°æ®
    /// </summary>
    public void SyncFromTimelineEvents(List<TimelineEvent> skillEffectEvents)
    {
        TriggerFrames.Clear();
        foreach (var evt in skillEffectEvents)
        {
            TriggerFrames.Add(new TriggerFrameData
            {
                Frame = evt.StartFrame,
                Type = (string)evt.EventData["Type"],
                EffectId = (int)evt.EventData["EffectId"],
                HitBox = (HitBoxData)evt.EventData.GetValueOrDefault("HitBox"),
                Condition = (TriggerCondition)evt.EventData.GetValueOrDefault("Condition")
            });
        }
    }
    
    /// <summary>
    /// è½¬æ¢ä¸ºæ—¶é—´è½´äº‹ä»¶
    /// </summary>
    public List<TimelineEvent> ConvertToTimelineEvents()
    {
        var events = new List<TimelineEvent>();
        foreach (var trigger in TriggerFrames)
        {
            events.Add(new TimelineEvent
            {
                EventId = $"SkillEffect_{trigger.Frame}",
                TrackId = "SkillEffects",
                StartFrame = trigger.Frame,
                EventType = TimelineEventType.Instant,
                EventData = new Dictionary<string, object>
                {
                    ["Type"] = trigger.Type,
                    ["EffectId"] = trigger.EffectId,
                    ["HitBox"] = trigger.HitBox,
                    ["Condition"] = trigger.Condition
                }
            });
        }
        return events;
    }
}
```

### 6.2 TriggerFrameData

```csharp
/// <summary>
/// è§¦å‘å¸§æ•°æ®ï¼ˆç¼–è¾‘å™¨æ•°æ®ç»“æ„ï¼‰
/// </summary>
[Serializable]
public class TriggerFrameData
{
    [TableColumnWidth(80, Resizable = false)]
    [LabelText("å¸§å·")]
    public int Frame;
    
    [TableColumnWidth(100, Resizable = false)]
    [LabelText("è§¦å‘ç±»å‹")]
    [ValueDropdown("GetTriggerTypes")]
    public string Type = "Direct";
    
    [TableColumnWidth(80, Resizable = false)]
    [LabelText("æ•ˆæœID")]
    [Button("é€‰æ‹©")]
    public int EffectId;
    
    [TableColumnWidth(200)]
    [LabelText("æ•ˆæœé¢„è§ˆ")]
    [ReadOnly, ShowInInspector]
    private string EffectPreview => GetEffectPreview(EffectId);
    
    private static IEnumerable<string> GetTriggerTypes()
    {
        return new[] { "Collision", "Direct", "Condition" };
    }
    
    private string GetEffectPreview(int effectId)
    {
        // ä» SkillEffectTable æŸ¥è¯¢æ•ˆæœæ•°æ®
        var effect = SkillConfigManager.Instance.GetSkillEffect(effectId);
        if (effect == null) return "æœªæ‰¾åˆ°æ•ˆæœ";
        
        return $"{GetEffectTypeName(effect.EffectType)} - {effect.EffectValue}";
    }
}
```

---

## UI/UXè®¾è®¡

### 7.1 çª—å£å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨                     [æœ€å°åŒ–] [æœ€å¤§åŒ–] [å…³é—­]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                          â”‚                        â”‚
â”‚  æŠ€èƒ½åŠ¨ä½œ   â”‚      3D åŠ¨ç”»é¢„è§ˆ         â”‚   æŠ€èƒ½åŠ¨ä½œé…ç½®         â”‚
â”‚  åˆ—è¡¨       â”‚                          â”‚                        â”‚
â”‚             â”‚                          â”‚  - åŸºç¡€ä¿¡æ¯            â”‚
â”‚ [æ–°å»º]      â”‚    [æ¨¡å‹å’ŒåŠ¨ç”»å±•ç¤º]      â”‚  - æŠ€èƒ½ä¿¡æ¯            â”‚
â”‚ [å¤åˆ¶]      â”‚                          â”‚  - æŠ€èƒ½æˆæœ¬            â”‚
â”‚ [åˆ é™¤]      â”‚                          â”‚  - å–æ¶ˆæ ‡ç­¾            â”‚
â”‚             â”‚                          â”‚  - ç¢°æ’ç›’é…ç½®          â”‚
â”‚ SkillAction1â”‚                          â”‚  - å‘½ä»¤ç»‘å®š            â”‚
â”‚ SkillAction2â”‚                          â”‚                        â”‚
â”‚ SkillAction3â”‚                          â”‚                        â”‚
â”‚ ...         â”‚                          â”‚                        â”‚
â”‚             â”‚                          â”‚                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     é€šç”¨æ—¶é—´è½´ç³»ç»Ÿ                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è¢«å–æ¶ˆæ ‡ç­¾ â”‚ ===â– ===  ===â– ===                          â”‚  â”‚
â”‚  â”‚ æŠ€èƒ½æ•ˆæœ   â”‚  â—†(Direct)  â—†(Collision) â—†(Direct)       â”‚  â”‚ â† æ–°å¢
â”‚  â”‚ ç‰¹æ•ˆ       â”‚                                            â”‚  â”‚
â”‚  â”‚ éŸ³æ•ˆ       â”‚                                            â”‚  â”‚
â”‚  â”‚ ç›¸æœºéœ‡åŠ¨   â”‚                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 å…³é”®å·®å¼‚å¯¹æ¯”

#### åŠ¨ä½œç¼–è¾‘å™¨ vs æŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨

| åŠŸèƒ½æ¨¡å— | åŠ¨ä½œç¼–è¾‘å™¨ | æŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨ |
|---------|-----------|---------------|
| åŠ¨ä½œåˆ—è¡¨ | âœ… ActionTable | âœ… SkillActionTable |
| åŸºç¡€é…ç½® | âœ… å–æ¶ˆæ ‡ç­¾ã€å‘½ä»¤ | âœ… ç»§æ‰¿ + æŠ€èƒ½ä¿¡æ¯ |
| æ—¶é—´è½´è½¨é“ | âœ… 4ç§è½¨é“ | âœ… 5ç§è½¨é“ï¼ˆæ–°å¢æŠ€èƒ½æ•ˆæœï¼‰ |
| åŠ¨ç”»é¢„è§ˆ | âœ… 3Dé¢„è§ˆ | âœ… å®Œå…¨ç›¸åŒ |
| æˆæœ¬é…ç½® | âŒ æ—  | âœ… ActualCost/Cooldown |
| ç¢°æ’ç›’ç¼–è¾‘ | âŒ æ—  | âœ… AttackBoxInfo |
| æ•ˆæœå…³è” | âŒ æ—  | âœ… SkillEffectTable |
| æŠ€èƒ½å…³è” | âŒ æ—  | âœ… SkillTable |

### 7.3 é…ç½®é¢æ¿å¸ƒå±€

```
â”Œâ”€ æŠ€èƒ½åŠ¨ä½œé…ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  [åŸºç¡€ä¿¡æ¯] â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ åŠ¨ä½œID: 3001      (åªè¯»)          â”‚ â”‚
â”‚  â”‚ åŠ¨ä½œåç§°: [Knight_Skill1_Dash]   â”‚ â”‚
â”‚  â”‚ åŠ¨ä½œæ—¶é•¿: [____30____] å¸§         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  [æŠ€èƒ½ä¿¡æ¯] â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ‰€å±æŠ€èƒ½ID: 2001  (åªè¯»)          â”‚ â”‚
â”‚  â”‚ æŠ€èƒ½åç§°: å†²åˆºæ–©  (åªè¯»)          â”‚ â”‚
â”‚  â”‚ [è·³è½¬åˆ°æŠ€èƒ½ç¼–è¾‘å™¨]                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  [æŠ€èƒ½æˆæœ¬] â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å®é™…æ³•åŠ›æ¶ˆè€—: [____20____]        â”‚ â”‚
â”‚  â”‚ å®é™…å†·å´æ—¶é—´: [____300___] å¸§     â”‚ â”‚
â”‚  â”‚ (çº¦ 5.0 ç§’)                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  [æ”»å‡»ç¢°æ’ç›’] â–¼                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Box1: 5.0 x 2.0 x 1.0   [ç¼–è¾‘]   â”‚ â”‚
â”‚  â”‚ Box2: 3.0 x 3.0 x 1.0   [åˆ é™¤]   â”‚ â”‚
â”‚  â”‚ [+ æ·»åŠ æ–°ç¢°æ’ç›’]                   â”‚ â”‚
â”‚  â”‚ [3Dé¢„è§ˆ]                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  [å–æ¶ˆæ ‡ç­¾] â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ (ä¸åŠ¨ä½œç¼–è¾‘å™¨ç›¸åŒ)                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  [å‘½ä»¤ç»‘å®š] â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ (ä¸åŠ¨ä½œç¼–è¾‘å™¨ç›¸åŒ)                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€æœ¯å®ç°

### 8.1 ç»§æ‰¿æ¶æ„

```csharp
// çª—å£ç»§æ‰¿
SkillActionEditorWindow : ActionEditorWindow
{
    // é‡å†™æ•°æ®åŠ è½½
    protected override LoadData() { /* åŠ è½½ SkillActionTable */ }
    
    // é‡å†™ä¿å­˜
    protected override SaveData() { /* ä¿å­˜ SkillActionTable */ }
    
    // æ–°å¢æŠ€èƒ½æ•ˆæœæ¨¡å—
    private SkillEffectModule _skillEffectModule;
}

// æ¨¡å—ç»§æ‰¿
SkillActionListModule : ActionListModule
{
    // é‡å†™åˆ—è¡¨é¡¹æ¸²æŸ“
    protected override DrawListItem() { /* æ˜¾ç¤ºæŠ€èƒ½ID */ }
}

SkillActionConfigModule : ActionConfigModule
{
    // æ‰©å±•é…ç½®é¢æ¿
    protected override DrawConfig() 
    { 
        base.DrawConfig();  // å…ˆç»˜åˆ¶åŸºç±»å†…å®¹
        DrawSkillInfo();     // å†ç»˜åˆ¶æŠ€èƒ½ä¿¡æ¯
        DrawSkillCost();     // æŠ€èƒ½æˆæœ¬
        DrawAttackBoxes();   // ç¢°æ’ç›’
    }
}

// æ•°æ®ç»§æ‰¿
SkillActionEditorData : ActionEditorData
{
    // æ–°å¢æŠ€èƒ½ä¸“å±å­—æ®µ
    public int SkillId;
    public int ActualCost;
    public int ActualCooldown;
    public string AttackBoxInfo;
    public List<TriggerFrameData> TriggerFrames;
}
```

### 8.2 æ—¶é—´è½´æ‰©å±•

```csharp
// æ³¨å†ŒæŠ€èƒ½æ•ˆæœè½¨é“
TimelineTrackRegistry.RegisterTrack(new TimelineTrackConfig
{
    TrackId = "SkillEffects",
    TrackName = "æŠ€èƒ½æ•ˆæœ",
    TrackColor = new Color(1f, 0.3f, 0.3f),
    EventType = TimelineEventType.Instant,
    CanHaveMultipleEvents = true,
    AllowOverlap = true,
    EventRenderer = new SkillEffectEventRenderer()
});

// æŠ€èƒ½æ•ˆæœäº‹ä»¶æ¸²æŸ“å™¨
class SkillEffectEventRenderer : ITimelineEventRenderer
{
    public void DrawEvent(Rect rect, TimelineEvent evt)
    {
        // ç»˜åˆ¶è±å½¢æ ‡è®°
        DrawDiamond(rect);
        
        // æ ¹æ®è§¦å‘ç±»å‹æ˜¾ç¤ºä¸åŒå›¾æ ‡
        string icon = GetTriggerIcon(evt.EventData["Type"]);
        GUI.Label(rect, icon);
        
        // æ˜¾ç¤ºæ•ˆæœID
        int effectId = (int)evt.EventData["EffectId"];
        GUI.Label(rect, $"E{effectId}", SmallLabelStyle);
    }
    
    public void DrawTooltip(TimelineEvent evt)
    {
        int effectId = (int)evt.EventData["EffectId"];
        var effect = SkillConfigManager.Instance.GetSkillEffect(effectId);
        
        GUILayout.Label($"æŠ€èƒ½æ•ˆæœ {effectId}");
        GUILayout.Label($"ç±»å‹: {effect.EffectType}");
        GUILayout.Label($"æ•°å€¼: {effect.EffectValue}");
        GUILayout.Label($"èŒƒå›´: {effect.EffectRange}");
    }
}
```

### 8.3 æ•°æ®æŒä¹…åŒ–

```csharp
// è¯»å–å™¨æ‰©å±•
class SkillActionDataReader : ActionDataReader
{
    public override SkillActionEditorData ReadFromCSV(int actionId)
    {
        // 1. å…ˆè°ƒç”¨åŸºç±»è¯»å– ActionTable
        var baseData = base.ReadFromCSV(actionId);
        
        // 2. è¯»å– SkillActionTable
        var skillActionRow = SkillActionTable.Get(actionId);
        
        // 3. ç»„åˆæˆ SkillActionEditorData
        var skillActionData = CreateInstance<SkillActionEditorData>();
        CopyBaseData(baseData, skillActionData);
        
        skillActionData.SkillId = skillActionRow.SkillId;
        skillActionData.ActualCost = skillActionRow.ActualCost;
        skillActionData.ActualCooldown = skillActionRow.ActualCooldown;
        skillActionData.AttackBoxInfo = skillActionRow.AttackBoxInfo;
        skillActionData.TriggerFrames = ParseTriggerFrames(skillActionRow.TriggerFrames);
        
        return skillActionData;
    }
}

// å†™å…¥å™¨æ‰©å±•
class SkillActionDataWriter : ActionDataWriter
{
    public override void WriteToCSV(SkillActionEditorData data)
    {
        // 1. å…ˆè°ƒç”¨åŸºç±»å†™å…¥ ActionTable
        base.WriteToCSV(data);
        
        // 2. å†™å…¥ SkillActionTable
        var skillActionRow = new SkillActionTableData
        {
            ActionId = data.ActionId,
            SkillId = data.SkillId,
            ActualCost = data.ActualCost,
            ActualCooldown = data.ActualCooldown,
            AttackBoxInfo = data.AttackBoxInfo,
            TriggerFrames = SerializeTriggerFrames(data.TriggerFrames)
        };
        
        SkillActionTableWriter.Write(skillActionRow);
    }
}
```

---

## å¼€å‘ä¼˜å…ˆçº§

### Phase 1: åŸºç¡€ç»§æ‰¿ (1-2å¤©)

**ç›®æ ‡**: æ­å»ºæŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨çš„åŸºæœ¬æ¡†æ¶

- âœ… åˆ›å»º SkillActionEditorWindowï¼ˆç»§æ‰¿ ActionEditorWindowï¼‰
- âœ… åˆ›å»º SkillActionEditorDataï¼ˆç»§æ‰¿ ActionEditorDataï¼‰
- âœ… åˆ›å»º SkillActionListModuleï¼ˆç»§æ‰¿ ActionListModuleï¼‰
- âœ… åˆ›å»º SkillActionConfigModuleï¼ˆç»§æ‰¿ ActionConfigModuleï¼‰
- âœ… å®ç°åŸºæœ¬çš„çª—å£æ‰“å¼€å’Œæ•°æ®åŠ è½½
- âœ… éªŒè¯åŠ¨ä½œç¼–è¾‘å™¨çš„æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### Phase 2: æŠ€èƒ½ä¸“å±å­—æ®µ (2-3å¤©)

**ç›®æ ‡**: å®ç°æŠ€èƒ½ä¸“å±çš„æ•°æ®ç¼–è¾‘

- âœ… åœ¨é…ç½®é¢æ¿æ·»åŠ "æŠ€èƒ½ä¿¡æ¯"åŒºåŸŸ
  - æ˜¾ç¤ºæ‰€å±æŠ€èƒ½ID
  - æ˜¾ç¤ºæŠ€èƒ½åç§°ï¼ˆä» SkillTable æŸ¥è¯¢ï¼‰
  - æ·»åŠ "è·³è½¬åˆ°æŠ€èƒ½ç¼–è¾‘å™¨"æŒ‰é’®
- âœ… å®ç°"æŠ€èƒ½æˆæœ¬"é…ç½®
  - ActualCost è¾“å…¥æ¡†
  - ActualCooldown è¾“å…¥æ¡†ï¼ˆå¸¦ç§’æ•°æ¢ç®—æç¤ºï¼‰
- âœ… å®ç°"æ”»å‡»ç¢°æ’ç›’"ç®€å•ç¼–è¾‘
  - å­—ç¬¦ä¸²æ ¼å¼çš„æ–‡æœ¬æ¡†
  - æ ¼å¼éªŒè¯å’Œæç¤º
- âœ… å®ç°æ•°æ®çš„è¯»å†™
  - SkillActionDataReader
  - SkillActionDataWriter

### Phase 3: æŠ€èƒ½æ•ˆæœè½¨é“ (3-4å¤©)

**ç›®æ ‡**: åœ¨æ—¶é—´è½´ä¸Šå¯è§†åŒ–æŠ€èƒ½æ•ˆæœè§¦å‘

- âœ… æ³¨å†Œ"æŠ€èƒ½æ•ˆæœ"è½¨é“
- âœ… å®ç° SkillEffectEventRenderer
  - ç»˜åˆ¶è±å½¢æ ‡è®°
  - æ˜¾ç¤ºè§¦å‘ç±»å‹å›¾æ ‡
  - æ˜¾ç¤ºæ•ˆæœID
- âœ… å®ç°è§¦å‘å¸§äº‹ä»¶çš„äº¤äº’
  - æ·»åŠ ï¼šå³é”®èœå• â†’ æ·»åŠ æŠ€èƒ½æ•ˆæœ
  - ç¼–è¾‘ï¼šåŒå‡»æ‰“å¼€æ•ˆæœé€‰æ‹©å™¨
  - åˆ é™¤ï¼šDeleteé”®æˆ–å³é”®èœå•
  - æ‹–åŠ¨ï¼šè°ƒæ•´è§¦å‘å¸§ä½ç½®
- âœ… å®ç°æŠ€èƒ½æ•ˆæœé€‰æ‹©å™¨
  - æ•ˆæœåˆ—è¡¨å±•ç¤º
  - æœç´¢è¿‡æ»¤
  - è¯¦ç»†ä¿¡æ¯é¢„è§ˆ
- âœ… æ•°æ®åŒæ­¥
  - TriggerFrames â†” TimelineEvents åŒå‘åŒæ­¥

### Phase 4: ç¢°æ’ç›’å¯è§†åŒ– (2-3å¤©ï¼Œå¯é€‰)

**ç›®æ ‡**: æä¾›ç¢°æ’ç›’çš„å¯è§†åŒ–ç¼–è¾‘å’Œé¢„è§ˆ

- âœ… å®ç°ç¢°æ’ç›’ç¼–è¾‘é¢æ¿
  - åˆ—è¡¨æ·»åŠ /åˆ é™¤ç¢°æ’ç›’
  - å‚æ•°ç¼–è¾‘ï¼ˆé•¿å®½é«˜ï¼‰
- âœ… å®ç°ç¢°æ’ç›’3Dé¢„è§ˆ
  - åœ¨è§’è‰²æ¨¡å‹ä¸Šç»˜åˆ¶ç¢°æ’ç›’
  - æ”¯æŒé€‰ä¸­å’Œé«˜äº®
- âœ… å®ç°ç¢°æ’ç›’è½¨é“ï¼ˆå¯é€‰ï¼‰
  - åœ¨æ—¶é—´è½´ä¸Šæ˜¾ç¤ºç¢°æ’ç›’æ¿€æ´»çš„æ—¶é—´æ®µ

### Phase 5: æ•ˆæœå…³è”å¢å¼º (1-2å¤©)

**ç›®æ ‡**: å¢å¼ºä¸ SkillEffectTable çš„é›†æˆ

- âœ… åœ¨æŠ€èƒ½æ•ˆæœäº‹ä»¶ä¸Šæ‚¬åœæ˜¾ç¤ºè¯¦ç»†tooltip
  - æ•ˆæœç±»å‹ã€æ•°å€¼ã€èŒƒå›´
  - è§†è§‰æ•ˆæœIDã€éŸ³æ•ˆID
- âœ… å®ç°"è·³è½¬åˆ°æ•ˆæœè¡¨"åŠŸèƒ½
- âœ… å®ç°æ•ˆæœæ•°æ®ç¼“å­˜ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
- âœ… æ”¯æŒæ•ˆæœçš„å¿«é€Ÿåˆ›å»ºï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰

---

## åç»­è§„åˆ’

### 10.1 Phase 6: é«˜çº§åŠŸèƒ½ (æœªæ¥)

- **æŠ€èƒ½è¿æ‹›é¢„è§ˆ** - æŸ¥çœ‹æŠ€èƒ½åŒ…å«çš„æ‰€æœ‰åŠ¨ä½œçš„è¿ç»­é¢„è§ˆ
- **æŠ€èƒ½æ ‘å¯è§†åŒ–** - å±•ç¤ºæŠ€èƒ½çš„åˆ†æ”¯å’Œå˜ç§
- **æ‰¹é‡ç¼–è¾‘** - æ‰¹é‡ä¿®æ”¹å¤šä¸ªæŠ€èƒ½åŠ¨ä½œçš„å±æ€§
- **æ¨¡æ¿ç³»ç»Ÿ** - ä¿å­˜å¸¸ç”¨çš„æŠ€èƒ½åŠ¨ä½œé…ç½®ä¸ºæ¨¡æ¿

### 10.2 ä¸å…¶ä»–ç³»ç»Ÿé›†æˆ

- **ä¸æŠ€èƒ½ç¼–è¾‘å™¨è”åŠ¨** - åœ¨æŠ€èƒ½ç¼–è¾‘å™¨ä¸­å¯ä»¥å¿«é€Ÿè·³è½¬åˆ°æŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨
- **ä¸æˆ˜æ–—ç¼–è¾‘å™¨é›†æˆ** - å®æ—¶æµ‹è¯•æŠ€èƒ½æ•ˆæœå’Œæˆ˜æ–—è¡¨ç°
- **ä¸ç‰¹æ•ˆç¼–è¾‘å™¨é›†æˆ** - é…ç½®æŠ€èƒ½æ•ˆæœæ—¶å¯é¢„è§ˆå¯¹åº”çš„è§†è§‰ç‰¹æ•ˆ

### 10.3 æ€§èƒ½ä¼˜åŒ–

- **å»¶è¿ŸåŠ è½½** - å¤§é‡æŠ€èƒ½åŠ¨ä½œæ—¶åˆ†é¡µåŠ è½½
- **æ•°æ®ç¼“å­˜** - ç¼“å­˜ SkillEffectTable æ•°æ®
- **å¢é‡ä¿å­˜** - åªä¿å­˜ä¿®æ”¹çš„å­—æ®µ

---

## é™„å½•

### A. è§¦å‘ç±»å‹è¯´æ˜

| è§¦å‘ç±»å‹ | è‹±æ–‡ | æè¿° | ä½¿ç”¨åœºæ™¯ |
|---------|------|------|---------|
| ç¢°æ’è§¦å‘ | Collision | å½“æ”»å‡»ç¢°æ’ç›’ä¸æ•Œäººç¢°æ’æ—¶è§¦å‘ | è¿‘æˆ˜æ”»å‡»ã€å†²åˆºæŠ€èƒ½ |
| ç›´æ¥è§¦å‘ | Direct | åˆ°è¾¾æŒ‡å®šå¸§æ—¶ç›´æ¥è§¦å‘ | è¿œç¨‹æ”»å‡»ã€buffæŠ€èƒ½ |
| æ¡ä»¶è§¦å‘ | Condition | æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶è§¦å‘ | è¿å‡»åŠ æˆã€æš´å‡»æ•ˆæœ |

### B. æ•ˆæœç±»å‹è¯´æ˜

| æ•ˆæœç±»å‹ID | åç§° | æè¿° |
|-----------|------|------|
| 1 | ä¼¤å®³ | é€ æˆä¼¤å®³ |
| 2 | æ²»ç–— | æ¢å¤ç”Ÿå‘½å€¼ |
| 3 | å‡»é€€ | å‡»é€€ç›®æ ‡ |
| 4 | Buff | å¢ç›Šæ•ˆæœ |
| 5 | Debuff | å‡ç›Šæ•ˆæœ |

### C. æ•°æ®æµç¨‹å›¾

```
æŠ€èƒ½åŠ¨ä½œç¼–è¾‘å™¨æ•°æ®æµ

1. åŠ è½½æ•°æ®:
   ActionTable.csv â”€â”€â”
                     â”œâ”€â”€> SkillActionEditorData (åˆå¹¶)
   SkillActionTable.csv â”˜

2. ç¼–è¾‘:
   SkillActionEditorData â”€â”€> æ—¶é—´è½´äº‹ä»¶ (TriggerFrames â†’ TimelineEvents)

3. ä¿å­˜:
   SkillActionEditorData â”€â”€â”
                           â”œâ”€â”€> ActionTable.csv
   TimelineEvents â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                           â””â”€â”€> SkillActionTable.csv
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**ç»´æŠ¤è€…**: Astrum Team  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-09

Â© Astrum Skill Action Editor Design Document

