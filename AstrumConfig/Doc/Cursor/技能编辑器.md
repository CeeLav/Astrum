# å‡†å¤‡æŠ€èƒ½ç¼–è¾‘å™¨å¼€å‘
_Exported on 10/8/2025 at 15:08:44 GMT+8 from Cursor (1.7.39)_

---

**User**

é˜…è¯»é¡¹ç›®æ–‡æ¡£ï¼Œå°¤å…¶æ˜¯ç¼–è¾‘å™¨ç›¸å…³çš„ï¼Œä»¥åŠç›¸å…³ä»£ç ï¼Œæˆ‘ä»¬å‡†å¤‡å¼€å§‹æŠ€èƒ½ç¼–è¾‘å™¨ç›¸å…³å¼€å‘

---

**Cursor**

[MODE: RESEARCH]

æˆ‘å¼€å§‹é˜…è¯»é¡¹ç›®æ–‡æ¡£å’Œç¼–è¾‘å™¨ç›¸å…³ä»£ç ï¼Œä»¥äº†è§£æŠ€èƒ½ç¼–è¾‘å™¨çš„å¼€å‘èƒŒæ™¯ã€‚

ç°åœ¨è®©æˆ‘ç»§ç»­æŸ¥çœ‹æŠ€èƒ½ç›¸å…³çš„é…ç½®è¡¨å’Œæ•°æ®ç»“æ„ï¼Œä»¥ä¾¿æ›´å¥½åœ°äº†è§£æŠ€èƒ½ç¼–è¾‘å™¨çš„éœ€æ±‚ï¼š

ç°åœ¨è®©æˆ‘æœ€åæŸ¥çœ‹ä¸€ä¸‹è§’è‰²ç¼–è¾‘å™¨çš„æ¶æ„æ–‡ä»¶å®šä¹‰ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£å¦‚ä½•æ„å»ºæŠ€èƒ½ç¼–è¾‘å™¨ï¼š

æ ¹æ®æˆ‘å¯¹é¡¹ç›®æ–‡æ¡£å’Œä»£ç çš„æ·±å…¥é˜…è¯»ï¼Œç°åœ¨æˆ‘å¯¹é¡¹ç›®æœ‰äº†å…¨é¢çš„ç†è§£ã€‚è®©æˆ‘ä¸ºæ‚¨æ€»ç»“å…³é”®ä¿¡æ¯ï¼Œå¹¶ä¸ºæŠ€èƒ½ç¼–è¾‘å™¨å¼€å‘åšå‡†å¤‡ï¼š

## ğŸ“‹ é¡¹ç›®æ¶æ„æ€»ç»“

### æ•´ä½“æ¶æ„
**Astrum é¡¹ç›®**é‡‡ç”¨äº†ç°ä»£åŒ–çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼š
- **Unity 6000.2.0b7** + **.NET 9.0**
- **ECCæ¶æ„**ï¼ˆEntity-Component-Capabilityï¼‰
- **å¸§åŒæ­¥**æ¸¸æˆé€»è¾‘
- **Luban** é…ç½®è¡¨ç®¡ç†ç³»ç»Ÿï¼ˆCSVæ ¼å¼ï¼‰
- **MemoryPack** åºåˆ—åŒ–
- **YooAsset** èµ„æºç®¡ç†

### ç¼–è¾‘å™¨æ¶æ„ï¼ˆåŸºäºè§’è‰²ç¼–è¾‘å™¨ç»éªŒï¼‰

**æŠ€æœ¯æ ˆ**ï¼š
- **Odin Inspector 3.3.1.13** - è‡ªåŠ¨ç”Ÿæˆè¯¦æƒ…UI
- **Animancer Lite 8.2.2** - åŠ¨ç”»æ’­æ”¾ç³»ç»Ÿ
- **CsvHelper 33.1.0** - CSVè¯»å†™
- **PreviewRenderUtility** - 3Dåœºæ™¯é¢„è§ˆ

**æ¶æ„æ¨¡å¼**ï¼ˆä¸‰å±‚åˆ†ç¦»ï¼‰ï¼š
```
Services/       - å·¥å…·ç±»å±‚ï¼ˆConfigTableHelper, AnimationHelperï¼‰
Modules/        - UIæ¨¡å—å±‚ï¼ˆRoleListModule, RolePreviewModuleï¼‰
Windows/        - çª—å£ç»„åˆå±‚ï¼ˆRoleEditorWindowï¼‰
```

**æ•°æ®æµ**ï¼š
```
CSVæ–‡ä»¶ â†’ LubanCSVReader â†’ EditorData(ScriptableObject) â†’ PropertyTree(Odin) â†’ UI
```

---

## ğŸ¯ æŠ€èƒ½ç³»ç»Ÿæ¶æ„ï¼ˆä¸‰å±‚è®¾è®¡ï¼‰

### è¡¨æ ¼å…³ç³»
```
SkillTable (æŠ€èƒ½æ¦‚å¿µ)
  â”œâ”€ skillActionIds[] â†’ SkillActionTable
  â””â”€ displayInfo (å±•ç¤ºæ•°æ®ï¼šå†·å´ã€æ¶ˆè€—ç­‰)

SkillActionTable (æŠ€èƒ½åŠ¨ä½œ)
  â”œâ”€ actionId â†’ ActionTable (actionType = "Skill")
  â”œâ”€ triggerFrames (è§¦å‘å¸§ä¿¡æ¯)
  â””â”€ skillSpecificData (æŠ€èƒ½ä¸“ç”¨å±æ€§)

SkillEffectTable (æŠ€èƒ½æ•ˆæœ)
  â””â”€ pureEffectData (æ•ˆæœç±»å‹ã€æ•°å€¼ã€å‚æ•°)

ActionTable (åŠ¨ä½œè¡¨ - å·²å­˜åœ¨)
  â””â”€ performanceData (åŠ¨ç”»è·¯å¾„ã€ç‰¹æ•ˆã€éŸ³æ•ˆ)
```

### é…ç½®è¡¨ç»“æ„

**å·²æœ‰çš„æŠ€èƒ½é…ç½®è¡¨**ï¼š
1. `#SkillTable.csv` - æŠ€èƒ½åŸºæœ¬ä¿¡æ¯
2. `#SkillActionTable.csv` - æŠ€èƒ½åŠ¨ä½œé…ç½®
3. `#SkillEffectTable.csv` - æŠ€èƒ½æ•ˆæœé…ç½®
4. `#ActionTable.csv` - åŠ¨ä½œè¡¨ï¼ˆå…±äº«ï¼‰

---

## ğŸ› ï¸ è§’è‰²ç¼–è¾‘å™¨æ ¸å¿ƒç‰¹æ€§

### æˆåŠŸçš„è®¾è®¡ç‚¹

1. **æ•°æ®æ¨¡å‹**ï¼š
   - `RoleEditorData` ç»§æ‰¿è‡ª `ScriptableObject`ï¼ˆæ”¯æŒUndoï¼‰
   - ä½¿ç”¨ Odin ç‰¹æ€§è£…é¥°ï¼ˆ`[TitleGroup]`, `[LabelText]`ç­‰ï¼‰
   - åˆå¹¶ `EntityBaseTable` å’Œ `RoleBaseTable` æ•°æ®

2. **ä¸‰åˆ—å¸ƒå±€**ï¼š
   - å·¦ä¾§ï¼šåˆ—è¡¨æ¨¡å—ï¼ˆæœç´¢ã€ç­›é€‰ã€CRUDï¼‰
   - ä¸­é—´ï¼šè¯¦æƒ…é¢æ¿ï¼ˆOdinè‡ªåŠ¨ç”ŸæˆUIï¼‰
   - å³ä¾§ï¼šé¢„è§ˆé¢æ¿ï¼ˆ3Dæ¨¡å‹ + åŠ¨ç”»æ§åˆ¶ï¼‰

3. **CSVè¯»å†™æ¡†æ¶**ï¼š
   ```csharp
   LubanCSVReader/Writer
     â”œâ”€ TableFieldAttributeï¼ˆå­—æ®µæ˜ å°„ï¼‰
     â”œâ”€ LubanTableConfigï¼ˆè¡¨é…ç½®ï¼‰
     â””â”€ è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½ï¼ˆä¿ç•™5ä¸ªç‰ˆæœ¬ï¼‰
   ```

4. **é¢„è§ˆç³»ç»Ÿ**ï¼š
   - `PreviewRenderUtility` æ¸²æŸ“3Dåœºæ™¯
   - `Animancer` æ’­æ”¾åŠ¨ç”»
   - ç›¸æœºæ§åˆ¶ï¼ˆæ—‹è½¬ã€ç¼©æ”¾ï¼‰
   - å…³é—­ Root Motion é˜²æ­¢ä½ç§»

5. **éªŒè¯ç³»ç»Ÿ**ï¼š
   - `RoleDataValidator` æ•°æ®éªŒè¯
   - æœªä¿å­˜æé†’
   - é”™è¯¯ä¿¡æ¯æ”¶é›†

---

## ğŸš€ æŠ€èƒ½ç¼–è¾‘å™¨å¼€å‘è§„åˆ’

### éœ€è¦çš„æ ¸å¿ƒåŠŸèƒ½

åŸºäºæŠ€èƒ½ç³»ç»Ÿç­–åˆ’æ¡ˆå’Œè§’è‰²ç¼–è¾‘å™¨ç»éªŒï¼ŒæŠ€èƒ½ç¼–è¾‘å™¨åº”åŒ…å«ï¼š

1. **æŠ€èƒ½åˆ—è¡¨æ¨¡å—**ï¼š
   - æŠ€èƒ½åˆ—è¡¨ï¼ˆæŒ‰ç±»å‹åˆ†ç»„ï¼‰
   - æœç´¢å’Œç­›é€‰
   - CRUDæ“ä½œ

2. **æŠ€èƒ½è¯¦æƒ…ç¼–è¾‘**ï¼š
   - æŠ€èƒ½åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€æè¿°ã€ç±»å‹ï¼‰
   - æŠ€èƒ½åŠ¨ä½œåˆ—è¡¨ï¼ˆSkillActionIdsï¼‰
   - å±•ç¤ºä¿¡æ¯ï¼ˆå†·å´ã€æ¶ˆè€—ã€ç­‰çº§ï¼‰

3. **æŠ€èƒ½åŠ¨ä½œç¼–è¾‘**ï¼š
   - å…³è” ActionTable
   - æ”»å‡»ç¢°æ’ç›’é…ç½®
   - è§¦å‘å¸§ä¿¡æ¯ç¼–è¾‘
   - å®é™…å¼€é”€å’Œå†·å´

4. **æŠ€èƒ½æ•ˆæœç¼–è¾‘**ï¼š
   - æ•ˆæœç±»å‹é€‰æ‹©ï¼ˆä¼¤å®³ã€æ²»ç–—ã€æ§åˆ¶ç­‰ï¼‰
   - æ•ˆæœæ•°å€¼é…ç½®
   - ç›®æ ‡ç±»å‹ã€èŒƒå›´ã€æŒç»­æ—¶é—´
   - è§†è§‰/éŸ³æ•ˆé…ç½®

5. **é¢„è§ˆç³»ç»Ÿ**ï¼ˆå¯é€‰ï¼‰ï¼š
   - æŠ€èƒ½åŠ¨ä½œé¢„è§ˆï¼ˆå¤ç”¨ RolePreviewModuleï¼‰
   - è§¦å‘å¸§æ—¶é—´è½´å¯è§†åŒ–
   - æ•ˆæœèŒƒå›´å¯è§†åŒ–

### æ•°æ®æ˜ å°„éœ€æ±‚

éœ€è¦åˆ›å»ºä»¥ä¸‹æ˜ å°„ç±»ï¼š
```csharp
SkillTableData       // æ˜ å°„ SkillTable.csv
SkillActionTableData // æ˜ å°„ SkillActionTable.csv  
SkillEffectTableData // æ˜ å°„ SkillEffectTable.csv
```

### å¤ç”¨ç°æœ‰æ¶æ„

å¯ä»¥ç›´æ¥å¤ç”¨ï¼š
- âœ… `LubanCSVReader/Writer` æ¡†æ¶
- âœ… `ConfigTableHelper` æœåŠ¡
- âœ… `EditorConfig` é…ç½®
- âœ… `RolePreviewModule`ï¼ˆåŠ¨ç”»é¢„è§ˆï¼‰
- âœ… Odin Inspector UIç”Ÿæˆæ¨¡å¼

---

## ğŸ“Š å…³é”®é…ç½®è·¯å¾„

å·²åœ¨ `EditorConfig.cs` ä¸­å®šä¹‰ï¼š
```csharp
SKILL_TABLE_PATH = "AstrumConfig/Tables/Datas/Skill/#SkillTable.csv"
SKILL_ACTION_TABLE_PATH = "AstrumConfig/Tables/Datas/Skill/#SkillActionTable.csv"
SKILL_EFFECT_TABLE_PATH = "AstrumConfig/Tables/Datas/Skill/#SkillEffectTable.csv"
ACTION_TABLE_PATH = "AstrumConfig/Tables/Datas/Entity/#ActionTable.csv"
```

---

## âœ… ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®

å‡†å¤‡å¼€å§‹æŠ€èƒ½ç¼–è¾‘å™¨å¼€å‘æ—¶ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºè¿›è¡Œï¼š

1. **é˜¶æ®µ1ï¼šæ•°æ®å±‚**
   - åˆ›å»º `SkillEditorData` æ¨¡å‹ï¼ˆåˆå¹¶ä¸‰å±‚æ•°æ®ï¼‰
   - åˆ›å»ºè¡¨æ•°æ®æ˜ å°„ç±»ï¼ˆ`SkillTableData`ç­‰ï¼‰
   - å®ç° `SkillDataReader/Writer`

2. **é˜¶æ®µ2ï¼šUIå±‚**
   - åˆ›å»º `SkillListModule`
   - åˆ›å»º `SkillEditorWindow`ï¼ˆä¸‰åˆ—å¸ƒå±€ï¼‰
   - ä½¿ç”¨ Odin è‡ªåŠ¨ç”Ÿæˆè¯¦æƒ…UI

3. **é˜¶æ®µ3ï¼šé«˜çº§åŠŸèƒ½**
   - è§¦å‘å¸§ç¼–è¾‘å™¨ï¼ˆæ—¶é—´è½´å¯è§†åŒ–ï¼‰
   - æŠ€èƒ½æ•ˆæœé¢„è§ˆ
   - æ•°æ®éªŒè¯å’Œé”™è¯¯æç¤º

4. **é˜¶æ®µ4ï¼šé›†æˆä¼˜åŒ–**
   - ä¸ ActionTable é›†æˆ
   - ä¸è§’è‰²ç¼–è¾‘å™¨è”åŠ¨
   - æ‰¹é‡ç¼–è¾‘åŠŸèƒ½

---

**æ‚¨å¸Œæœ›ç°åœ¨å°±å¼€å§‹æŠ€èƒ½ç¼–è¾‘å™¨çš„å¼€å‘å—ï¼Ÿ** æˆ‘å¯ä»¥æŒ‰ç…§ä¸è§’è‰²ç¼–è¾‘å™¨ç›¸åŒçš„é«˜è´¨é‡æ ‡å‡†ï¼Œä»é˜¶æ®µ1å¼€å§‹é€æ­¥å®ç°ã€‚æ‚¨æœ‰ä»€ä¹ˆç‰¹å®šçš„ä¼˜å…ˆçº§æˆ–ç‰¹æ®Šéœ€æ±‚å—ï¼Ÿ

```plaintext
Services/       - å·¥å…·ç±»å±‚ï¼ˆConfigTableHelper, AnimationHelperï¼‰
Modules/        - UIæ¨¡å—å±‚ï¼ˆRoleListModule, RolePreviewModuleï¼‰
Windows/        - çª—å£ç»„åˆå±‚ï¼ˆRoleEditorWindowï¼‰
```

```plaintext
CSVæ–‡ä»¶ â†’ LubanCSVReader â†’ EditorData(ScriptableObject) â†’ PropertyTree(Odin) â†’ UI
```

```plaintext
SkillTable (æŠ€èƒ½æ¦‚å¿µ)
  â”œâ”€ skillActionIds[] â†’ SkillActionTable
  â””â”€ displayInfo (å±•ç¤ºæ•°æ®ï¼šå†·å´ã€æ¶ˆè€—ç­‰)

SkillActionTable (æŠ€èƒ½åŠ¨ä½œ)
  â”œâ”€ actionId â†’ ActionTable (actionType = "Skill")
  â”œâ”€ triggerFrames (è§¦å‘å¸§ä¿¡æ¯)
  â””â”€ skillSpecificData (æŠ€èƒ½ä¸“ç”¨å±æ€§)

SkillEffectTable (æŠ€èƒ½æ•ˆæœ)
  â””â”€ pureEffectData (æ•ˆæœç±»å‹ã€æ•°å€¼ã€å‚æ•°)

ActionTable (åŠ¨ä½œè¡¨ - å·²å­˜åœ¨)
  â””â”€ performanceData (åŠ¨ç”»è·¯å¾„ã€ç‰¹æ•ˆã€éŸ³æ•ˆ)
```

```csharp
   LubanCSVReader/Writer
     â”œâ”€ TableFieldAttributeï¼ˆå­—æ®µæ˜ å°„ï¼‰
     â”œâ”€ LubanTableConfigï¼ˆè¡¨é…ç½®ï¼‰
     â””â”€ è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½ï¼ˆä¿ç•™5ä¸ªç‰ˆæœ¬ï¼‰
```

```csharp
SkillTableData       // æ˜ å°„ SkillTable.csv
SkillActionTableData // æ˜ å°„ SkillActionTable.csv  
SkillEffectTableData // æ˜ å°„ SkillEffectTable.csv
```

```csharp
SKILL_TABLE_PATH = "AstrumConfig/Tables/Datas/Skill/#SkillTable.csv"
SKILL_ACTION_TABLE_PATH = "AstrumConfig/Tables/Datas/Skill/#SkillActionTable.csv"
SKILL_EFFECT_TABLE_PATH = "AstrumConfig/Tables/Datas/Skill/#SkillEffectTable.csv"
ACTION_TABLE_PATH = "AstrumConfig/Tables/Datas/Entity/#ActionTable.csv"
```

---

**User**

åˆ›å»ºæ•°æ®å±‚å§

---

**Cursor**

[MODE: RESEARCH]

å¥½çš„ï¼Œæˆ‘å¼€å§‹åˆ›å»ºæŠ€èƒ½ç¼–è¾‘å™¨çš„æ•°æ®å±‚ã€‚åŸºäºå¯¹è§’è‰²ç¼–è¾‘å™¨çš„æ·±å…¥åˆ†æï¼Œæˆ‘å°†åˆ›å»ºå®Œæ•´çš„æ•°æ®å±‚æ¶æ„ã€‚

è®©æˆ‘å…ˆåˆ›å»ºä»»åŠ¡æ¸…å•ï¼Œç„¶åå¼€å§‹å®æ–½ï¼š

ç°åœ¨å¼€å§‹åˆ›å»ºæ•°æ®å±‚ã€‚é¦–å…ˆåˆ›å»ºè¡¨æ•°æ®æ˜ å°„ç±»ï¼š

```csharp
using Astrum.Editor.RoleEditor.Persistence.Core;
using System.Collections.Generic;

namespace Astrum.Editor.RoleEditor.Persistence.Mappings
{
    /// <summary>
    /// SkillTableæ•°æ®æ˜ å°„
    /// </summary>
    public class SkillTableData
    {
        [TableField(0, "id")]
        public int Id { get; set; }
        
        [TableField(1, "name")]
        public string Name { get; set; }
        
        [TableField(2, "description")]
        public string Description { get; set; }
        
        [TableField(3, "skillType")]
        public int SkillType { get; set; }
        
        [TableField(4, "skillActionIds")]
        public string SkillActionIdsRaw { get; set; }
        
        [TableField(5, "displayCooldown")]
        public float DisplayCooldown { get; set; }
        
        [TableField(6, "displayCost")]
        public int DisplayCost { get; set; }
        
        [TableField(7, "requiredLevel")]
        public int RequiredLevel { get; set; }
        
        [TableField(8, "maxLevel")]
        public int MaxLevel { get; set; }
        
        [TableField(9, "iconId")]
        public int IconId { get; set; }
        
        /// <summary>
        /// è§£ææŠ€èƒ½åŠ¨ä½œIDæ•°ç»„
        /// </summary>
        public List<int> GetSkillActionIds()
        {
            var result = new List<int>();
            
            if (string.IsNullOrEmpty(SkillActionIdsRaw))
                return result;
            
            // æ ¼å¼: "3001,3002" æˆ– "3001"
            var parts = SkillActionIdsRaw.Split(',');
            foreach (var part in parts)
            {
                if (int.TryParse(part.Trim(), out int actionId))
                {
                    result.Add(actionId);
                }
            }
            
            return result;
        }
        
        /// <summary>
        /// è®¾ç½®æŠ€èƒ½åŠ¨ä½œIDæ•°ç»„
        /// </summary>
        public void SetSkillActionIds(List<int> actionIds)
        {
            if (actionIds == null || actionIds.Count == 0)
            {
                SkillActionIdsRaw = string.Empty;
                return;
            }
            
            SkillActionIdsRaw = string.Join(",", actionIds);
        }
        
        /// <summary>
        /// è·å–è¡¨é…ç½®
        /// </summary>
        public static LubanTableConfig GetTableConfig()
        {
            return new LubanTableConfig
            {
                FilePath = "AstrumConfig/Tables/Datas/Skill/#SkillTable.csv",
                HeaderLines = 4,
                HasEmptyFirstColumn = true,
                Header = new TableHeader
                {
                    VarNames = new List<string>
                    {
                        "id", "name", "description", "skillType", "skillActionIds",
                        "displayCooldown", "displayCost", "requiredLevel", "maxLevel", "iconId"
                    },
                    Types = new List<string>
                    {
                        "int", "string", "string", "int", "(array#sep=,),int",
                        "float", "int", "int", "int", "int"
                    },
                    Groups = new List<string>
                    {
                        "", "", "", "", "", "", "", "", "", ""
                    },
                    Descriptions = new List<string>
                    {
                        "æŠ€èƒ½ID", "æŠ€èƒ½åç§°", "æŠ€èƒ½æè¿°", "æŠ€èƒ½ç±»å‹", "æŠ€èƒ½åŠ¨ä½œIDåˆ—è¡¨",
                        "å±•ç¤ºå†·å´æ—¶é—´", "å±•ç¤ºæ³•åŠ›æ¶ˆè€—", "å­¦ä¹ æ‰€éœ€ç­‰çº§", "æŠ€èƒ½æœ€å¤§ç­‰çº§", "å›¾æ ‡ID"
                    }
                }
            };
        }
    }
}

```

```csharp
using Astrum.Editor.RoleEditor.Persistence.Core;
using System.Collections.Generic;

namespace Astrum.Editor.RoleEditor.Persistence.Mappings
{
    /// <summary>
    /// SkillActionTableæ•°æ®æ˜ å°„
    /// </summary>
    public class SkillActionTableData
    {
        [TableField(0, "actionId")]
        public int ActionId { get; set; }
        
        [TableField(1, "skillId")]
        public int SkillId { get; set; }
        
        [TableField(2, "attackBoxInfo")]
        public string AttackBoxInfo { get; set; }
        
        [TableField(3, "actualCost")]
        public int ActualCost { get; set; }
        
        [TableField(4, "actualCooldown")]
        public int ActualCooldown { get; set; }
        
        [TableField(5, "triggerFrames")]
        public string TriggerFrames { get; set; }
        
        /// <summary>
        /// è§£æè§¦å‘å¸§ä¿¡æ¯
        /// æ ¼å¼: "Frame5:Collision:4001,Frame8:Direct:4002"
        /// </summary>
        public List<TriggerFrameInfo> ParseTriggerFrames()
        {
            var result = new List<TriggerFrameInfo>();
            
            if (string.IsNullOrEmpty(TriggerFrames))
                return result;
            
            var parts = TriggerFrames.Split(',');
            foreach (var part in parts)
            {
                var trimmed = part.Trim();
                if (string.IsNullOrEmpty(trimmed))
                    continue;
                
                var segments = trimmed.Split(':');
                if (segments.Length >= 3)
                {
                    // è§£æå¸§å·ï¼ˆå»æ‰"Frame"å‰ç¼€ï¼‰
                    var frameStr = segments[0].Replace("Frame", "").Trim();
                    if (int.TryParse(frameStr, out int frame) &&
                        int.TryParse(segments[2].Trim(), out int effectId))
                    {
                        result.Add(new TriggerFrameInfo
                        {
                            Frame = frame,
                            TriggerType = segments[1].Trim(),
                            EffectId = effectId
                        });
                    }
                }
            }
            
            return result;
        }
        
        /// <summary>
        /// è®¾ç½®è§¦å‘å¸§ä¿¡æ¯
        /// </summary>
        public void SetTriggerFrames(List<TriggerFrameInfo> triggerFrames)
        {
            if (triggerFrames == null || triggerFrames.Count == 0)
            {
                TriggerFrames = string.Empty;
                return;
            }
            
            var parts = new List<string>();
            foreach (var info in triggerFrames)
            {
                parts.Add($"Frame{info.Frame}:{info.TriggerType}:{info.EffectId}");
            }
            
            TriggerFrames = string.Join(",", parts);
        }
        
        /// <summary>
        /// è·å–è¡¨é…ç½®
        /// </summary>
        public static LubanTableConfig GetTableConfig()
        {
            return new LubanTableConfig
            {
                FilePath = "AstrumConfig/Tables/Datas/Skill/#SkillActionTable.csv",
                HeaderLines = 4,
                HasEmptyFirstColumn = true,
                Header = new TableHeader
                {
                    VarNames = new List<string>
                    {
                        "actionId", "skillId", "attackBoxInfo", "actualCost",
                        "actualCooldown", "triggerFrames"
                    },
                    Types = new List<string>
                    {
                        "int", "int", "string", "int", "int", "string"
                    },
                    Groups = new List<string>
                    {
                        "", "", "", "", "", ""
                    },
                    Descriptions = new List<string>
                    {
                        "åŠ¨ä½œID", "æŠ€èƒ½ID", "æ”»å‡»ç¢°æ’ç›’ä¿¡æ¯", "å®é™…æ³•åŠ›æ¶ˆè€—",
                        "å®é™…å†·å´æ—¶é—´(å¸§)", "è§¦å‘å¸§ä¿¡æ¯"
                    }
                }
            };
        }
    }
    
    /// <summary>
    /// è§¦å‘å¸§ä¿¡æ¯
    /// </summary>
    public class TriggerFrameInfo
    {
        /// <summary>å¸§å·</summary>
        public int Frame { get; set; }
        
        /// <summary>è§¦å‘ç±»å‹ï¼ˆCollision/Direct/Conditionï¼‰</summary>
        public string TriggerType { get; set; }
        
        /// <summary>æ•ˆæœID</summary>
        public int EffectId { get; set; }
        
        public override string ToString()
        {
            return $"Frame{Frame}:{TriggerType}:{EffectId}";
        }
    }
}

```

```csharp
using Astrum.Editor.RoleEditor.Persistence.Core;
using System.Collections.Generic;

namespace Astrum.Editor.RoleEditor.Persistence.Mappings
{
    /// <summary>
    /// SkillEffectTableæ•°æ®æ˜ å°„
    /// </summary>
    public class SkillEffectTableData
    {
        [TableField(0, "skillEffectId")]
        public int SkillEffectId { get; set; }
        
        [TableField(1, "effectType")]
        public int EffectType { get; set; }
        
        [TableField(2, "effectValue")]
        public float EffectValue { get; set; }
        
        [TableField(3, "targetType")]
        public int TargetType { get; set; }
        
        [TableField(4, "effectDuration")]
        public float EffectDuration { get; set; }
        
        [TableField(5, "effectRange")]
        public float EffectRange { get; set; }
        
        [TableField(6, "castTime")]
        public float CastTime { get; set; }
        
        [TableField(7, "effectParams")]
        public string EffectParams { get; set; }
        
        [TableField(8, "visualEffectId")]
        public int VisualEffectId { get; set; }
        
        [TableField(9, "soundEffectId")]
        public int SoundEffectId { get; set; }
        
        /// <summary>
        /// è§£ææ•ˆæœå‚æ•°
        /// æ ¼å¼: "DamageType:Physical,Knockback:5.0"
        /// </summary>
        public Dictionary<string, string> ParseEffectParams()
        {
            var result = new Dictionary<string, string>();
            
            if (string.IsNullOrEmpty(EffectParams))
                return result;
            
            var pairs = EffectParams.Split(',');
            foreach (var pair in pairs)
            {
                var parts = pair.Split(':');
                if (parts.Length == 2)
                {
                    result[parts[0].Trim()] = parts[1].Trim();
                }
            }
            
            return result;
        }
        
        /// <summary>
        /// è®¾ç½®æ•ˆæœå‚æ•°
        /// </summary>
        public void SetEffectParams(Dictionary<string, string> parameters)
        {
            if (parameters == null || parameters.Count == 0)
            {
                EffectParams = string.Empty;
                return;
            }
            
            var parts = new List<string>();
            foreach (var kvp in parameters)
            {
                parts.Add($"{kvp.Key}:{kvp.Value}");
            }
            
            EffectParams = string.Join(",", parts);
        }
        
        /// <summary>
        /// è·å–è¡¨é…ç½®
        /// </summary>
        public static LubanTableConfig GetTableConfig()
        {
            return new LubanTableConfig
            {
                FilePath = "AstrumConfig/Tables/Datas/Skill/#SkillEffectTable.csv",
                HeaderLines = 4,
                HasEmptyFirstColumn = true,
                Header = new TableHeader
                {
                    VarNames = new List<string>
                    {
                        "skillEffectId", "effectType", "effectValue", "targetType",
                        "effectDuration", "effectRange", "castTime", "effectParams",
                        "visualEffectId", "soundEffectId"
                    },
                    Types = new List<string>
                    {
                        "int", "int", "float", "int",
                        "float", "float", "float", "string",
                        "int", "int"
                    },
                    Groups = new List<string>
                    {
                        "", "", "", "", "", "", "", "", "", ""
                    },
                    Descriptions = new List<string>
                    {
                        "æŠ€èƒ½æ•ˆæœID", "æ•ˆæœç±»å‹", "æ•ˆæœæ•°å€¼", "ç›®æ ‡ç±»å‹",
                        "æ•ˆæœæŒç»­æ—¶é—´", "æ•ˆæœèŒƒå›´", "æ–½æ³•æ—¶é—´", "æ•ˆæœå‚æ•°",
                        "è§†è§‰æ•ˆæœID", "éŸ³æ•ˆID"
                    }
                }
            };
        }
    }
}

```

ç°åœ¨åˆ›å»ºæŠ€èƒ½ç¼–è¾‘å™¨æ•°æ®æ¨¡å‹ï¼š

```csharp
using System;
using System.Collections.Generic;
using System.Linq;
using Sirenix.OdinInspector;
using UnityEngine;
using Astrum.Editor.RoleEditor.Persistence.Mappings;

namespace Astrum.Editor.RoleEditor.Data
{
    /// <summary>
    /// æŠ€èƒ½ç¼–è¾‘å™¨æ•°æ®æ¨¡å‹ï¼ˆåˆå¹¶ SkillTableã€SkillActionTableã€SkillEffectTableï¼‰
    /// ä½¿ç”¨ Odin Inspector ç‰¹æ€§
    /// </summary>
    [CreateAssetMenu(fileName = "SkillData", menuName = "Astrum/Skill Editor Data")]
    public class SkillEditorData : ScriptableObject
    {
        // ===== SkillTable æ•°æ® =====
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯")]
        [LabelText("æŠ€èƒ½ID"), ReadOnly]
        [InfoBox("æŠ€èƒ½å”¯ä¸€æ ‡è¯†ç¬¦", InfoMessageType.Info)]
        public int SkillId;
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯")]
        [LabelText("æŠ€èƒ½åç§°")]
        [ValidateInput("ValidateSkillName", "æŠ€èƒ½åç§°ä¸èƒ½ä¸ºç©º")]
        public string SkillName = "";
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯")]
        [LabelText("æŠ€èƒ½æè¿°"), TextArea(2, 4)]
        public string SkillDescription = "";
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯")]
        [LabelText("æŠ€èƒ½ç±»å‹"), EnumToggleButtons]
        [InfoBox("1=æ”»å‡», 2=æ§åˆ¶, 3=ä½ç§», 4=Buff", InfoMessageType.None)]
        public SkillTypeEnum SkillType = SkillTypeEnum.æ”»å‡»;
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯/å±•ç¤ºä¿¡æ¯")]
        [LabelText("å±•ç¤ºå†·å´æ—¶é—´(ç§’)"), Range(0, 300)]
        [SuffixLabel("ç§’", true)]
        public float DisplayCooldown = 5f;
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯/å±•ç¤ºä¿¡æ¯")]
        [LabelText("å±•ç¤ºæ³•åŠ›æ¶ˆè€—"), Range(0, 1000)]
        public int DisplayCost = 20;
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯/ç­‰çº§ä¿¡æ¯")]
        [LabelText("å­¦ä¹ æ‰€éœ€ç­‰çº§"), Range(1, 100)]
        public int RequiredLevel = 1;
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯/ç­‰çº§ä¿¡æ¯")]
        [LabelText("æŠ€èƒ½æœ€å¤§ç­‰çº§"), Range(1, 100)]
        public int MaxLevel = 10;
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯/å±•ç¤ºä¿¡æ¯")]
        [LabelText("å›¾æ ‡ID")]
        [InfoBox("å…³è”å›¾æ ‡èµ„æºID", InfoMessageType.None)]
        public int IconId = 0;
        
        // ===== SkillAction åˆ—è¡¨ =====
        
        [TitleGroup("æŠ€èƒ½åŠ¨ä½œé…ç½®")]
        [LabelText("æŠ€èƒ½åŠ¨ä½œåˆ—è¡¨")]
        [InfoBox("ä¸€ä¸ªæŠ€èƒ½å¯ä»¥åŒ…å«å¤šä¸ªåŠ¨ä½œï¼ˆè¿æ‹›ã€æ´¾ç”Ÿç­‰ï¼‰", InfoMessageType.Info)]
        [ListDrawerSettings(
            CustomAddFunction = "AddNewSkillAction",
            OnBeginListElementGUI = "BeginDrawSkillAction",
            Expanded = true,
            DraggableItems = true,
            ShowIndexLabels = true,
            ListElementLabelName = "ActionDisplayName"
        )]
        public List<SkillActionData> SkillActions = new List<SkillActionData>();
        
        // ===== ç¼–è¾‘å™¨è¾…åŠ©å­—æ®µ =====
        
        [HideInInspector]
        public bool IsNew = false;
        
        [HideInInspector]
        public bool IsDirty = false;
        
        [HideInInspector]
        public List<string> ValidationErrors = new List<string>();
        
        // ===== æ–¹æ³• =====
        
        /// <summary>
        /// åˆ›å»ºé»˜è®¤æŠ€èƒ½æ•°æ®
        /// </summary>
        public static SkillEditorData CreateDefault(int id)
        {
            var data = CreateInstance<SkillEditorData>();
            data.SkillId = id;
            data.SkillName = $"NewSkill_{id}";
            data.SkillDescription = "æ–°æŠ€èƒ½";
            data.SkillType = SkillTypeEnum.æ”»å‡»;
            data.DisplayCooldown = 5f;
            data.DisplayCost = 20;
            data.RequiredLevel = 1;
            data.MaxLevel = 10;
            data.IconId = 0;
            data.IsNew = true;
            data.IsDirty = true;
            
            // æ·»åŠ ä¸€ä¸ªé»˜è®¤åŠ¨ä½œ
            data.SkillActions.Add(SkillActionData.CreateDefault(3000 + id));
            
            return data;
        }
        
        /// <summary>
        /// å…‹éš†æŠ€èƒ½æ•°æ®
        /// </summary>
        public SkillEditorData Clone()
        {
            var clone = CreateInstance<SkillEditorData>();
            
            // å¤åˆ¶åŸºæœ¬ä¿¡æ¯
            clone.SkillId = this.SkillId;
            clone.SkillName = this.SkillName;
            clone.SkillDescription = this.SkillDescription;
            clone.SkillType = this.SkillType;
            clone.DisplayCooldown = this.DisplayCooldown;
            clone.DisplayCost = this.DisplayCost;
            clone.RequiredLevel = this.RequiredLevel;
            clone.MaxLevel = this.MaxLevel;
            clone.IconId = this.IconId;
            
            // æ·±æ‹·è´æŠ€èƒ½åŠ¨ä½œåˆ—è¡¨
            clone.SkillActions = new List<SkillActionData>();
            foreach (var action in this.SkillActions)
            {
                clone.SkillActions.Add(action.Clone());
            }
            
            // ç¼–è¾‘å™¨çŠ¶æ€
            clone.ValidationErrors = new List<string>();
            clone.IsNew = true;
            clone.IsDirty = true;
            
            return clone;
        }
        
        /// <summary>
        /// è·å–æŠ€èƒ½åŠ¨ä½œIDåˆ—è¡¨
        /// </summary>
        public List<int> GetSkillActionIds()
        {
            return SkillActions.Select(a => a.ActionId).ToList();
        }
        
        /// <summary>
        /// æ ‡è®°ä¸ºå·²ä¿®æ”¹
        /// </summary>
        public void MarkDirty()
        {
            IsDirty = true;
        }
        
        /// <summary>
        /// æ¸…é™¤ä¿®æ”¹æ ‡è®°
        /// </summary>
        public void ClearDirty()
        {
            IsDirty = false;
            IsNew = false;
        }
        
        // ===== Odin å›è°ƒ =====
        
        private bool ValidateSkillName(string name)
        {
            return !string.IsNullOrWhiteSpace(name);
        }
        
        private SkillActionData AddNewSkillAction()
        {
            int newActionId = 3000;
            if (SkillActions.Count > 0)
            {
                newActionId = SkillActions.Max(a => a.ActionId) + 1;
            }
            
            return SkillActionData.CreateDefault(newActionId);
        }
        
        private void BeginDrawSkillAction(int index)
        {
            // åœ¨ç»˜åˆ¶åˆ—è¡¨å…ƒç´ å‰çš„å›è°ƒ
        }
    }
    
    /// <summary>
    /// æŠ€èƒ½åŠ¨ä½œæ•°æ®ï¼ˆå¯¹åº” SkillActionTableï¼‰
    /// </summary>
    [Serializable]
    public class SkillActionData
    {
        [TitleGroup("åŠ¨ä½œåŸºæœ¬ä¿¡æ¯")]
        [LabelText("åŠ¨ä½œID")]
        [ReadOnly]
        public int ActionId;
        
        [TitleGroup("åŠ¨ä½œåŸºæœ¬ä¿¡æ¯")]
        [LabelText("åŠ¨ä½œåç§°ï¼ˆæ¥è‡ªActionTableï¼‰")]
        [ReadOnly, DisplayAsString]
        public string ActionName = "";
        
        [TitleGroup("æŠ€èƒ½å‚æ•°")]
        [LabelText("æ”»å‡»ç¢°æ’ç›’ä¿¡æ¯")]
        [InfoBox("æ ¼å¼: Box1:5x2x1,Box2:3x3x1", InfoMessageType.None)]
        public string AttackBoxInfo = "";
        
        [TitleGroup("æŠ€èƒ½å‚æ•°")]
        [LabelText("å®é™…æ³•åŠ›æ¶ˆè€—"),
```

---

**User**

æ³¨æ„ SkillActionTableä¸ ActionTable æ•°æ®è¦ä¸€ä¸€å¯¹åº”çš„ï¼Œç»§ç»­å§

---

**Cursor**

æ˜ç™½äº†ï¼SkillActionTable ä¸ ActionTable æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚è®©æˆ‘ç»§ç»­åˆ›å»ºæ•°æ®æ¨¡å‹ï¼Œå¹¶åœ¨è®¾è®¡ä¸­ä½“ç°è¿™ä¸ªçº¦æŸï¼š

```csharp
using System;
using System.Collections.Generic;
using System.Linq;
using Sirenix.OdinInspector;
using UnityEngine;
using Astrum.Editor.RoleEditor.Persistence.Mappings;

namespace Astrum.Editor.RoleEditor.Data
{
    /// <summary>
    /// æŠ€èƒ½ç¼–è¾‘å™¨æ•°æ®æ¨¡å‹ï¼ˆåˆå¹¶ SkillTableã€SkillActionTable å’Œ SkillEffectTableï¼‰
    /// ä½¿ç”¨ Odin Inspector ç‰¹æ€§
    /// </summary>
    [CreateAssetMenu(fileName = "SkillData", menuName = "Astrum/Skill Editor Data")]
    public class SkillEditorData : ScriptableObject
    {
        // ===== SkillTable æ•°æ® =====
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯")]
        [LabelText("æŠ€èƒ½ID"), ReadOnly]
        [InfoBox("æŠ€èƒ½IDæ˜¯å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¸å¯ä¿®æ”¹", InfoMessageType.Info)]
        public int SkillId;
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯")]
        [LabelText("æŠ€èƒ½åç§°")]
        [ValidateInput("ValidateSkillName", "æŠ€èƒ½åç§°ä¸èƒ½ä¸ºç©º")]
        public string SkillName = "";
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯")]
        [LabelText("æŠ€èƒ½æè¿°"), TextArea(2, 4)]
        public string SkillDescription = "";
        
        [TitleGroup("æŠ€èƒ½åŸºæœ¬ä¿¡æ¯")]
        [LabelText("æŠ€èƒ½ç±»å‹"), EnumToggleButtons]
        [InfoBox("1=æ”»å‡», 2=æ§åˆ¶, 3=ä½ç§», 4=buff", InfoMessageType.None)]
        public SkillTypeEnum SkillType = SkillTypeEnum.æ”»å‡»;
        
        [TitleGroup("æŠ€èƒ½é…ç½®/ç­‰çº§ä¸æ¶ˆè€—")]
        [LabelText("å­¦ä¹ æ‰€éœ€ç­‰çº§"), Range(1, 100)]
        public int RequiredLevel = 1;
        
        [TitleGroup("æŠ€èƒ½é…ç½®/ç­‰çº§ä¸æ¶ˆè€—")]
        [LabelText("æŠ€èƒ½æœ€å¤§ç­‰çº§"), Range(1, 100)]
        public int MaxLevel = 10;
        
        [TitleGroup("æŠ€èƒ½é…ç½®/ç­‰çº§ä¸æ¶ˆè€—")]
        [LabelText("å±•ç¤ºå†·å´æ—¶é—´(ç§’)"), Range(0, 300)]
        [InfoBox("ç”¨äºUIæ˜¾ç¤ºçš„å†·å´æ—¶é—´", InfoMessageType.None)]
        public float DisplayCooldown = 5.0f;
        
        [TitleGroup("æŠ€èƒ½é…ç½®/ç­‰çº§ä¸æ¶ˆè€—")]
        [LabelText("å±•ç¤ºæ³•åŠ›æ¶ˆè€—"), Range(0, 1000)]
        [InfoBox("ç”¨äºUIæ˜¾ç¤ºçš„æ³•åŠ›æ¶ˆè€—", InfoMessageType.None)]
        public int DisplayCost = 20;
        
        [TitleGroup("æŠ€èƒ½é…ç½®/è§†è§‰æ•ˆæœ")]
        [LabelText("å›¾æ ‡ID")]
        public int IconId = 0;
        
        // ===== æŠ€èƒ½åŠ¨ä½œåˆ—è¡¨ (å…³è” SkillActionTable å’Œ ActionTable) =====
        
        [TitleGroup("æŠ€èƒ½åŠ¨ä½œ")]
        [InfoBox("æŠ€èƒ½åŠ¨ä½œå¯¹åº”ActionTableä¸­çš„åŠ¨ä½œï¼Œæ¯ä¸ªActionIdå¿…é¡»åœ¨ActionTableä¸­å­˜åœ¨", InfoMessageType.Warning)]
        [ListDrawerSettings(ShowIndexLabels = true, ListElementLabelName = "ActionDisplayName")]
        [OnValueChanged("OnSkillActionsChanged")]
        public List<SkillActionData> SkillActions = new List<SkillActionData>();
        
        // ===== ç¼–è¾‘å™¨è¾…åŠ©å­—æ®µ =====
        
        [HideInInspector]
        public bool IsNew = false;
        
        [HideInInspector]
        public bool IsDirty = false;
        
        [HideInInspector]
        public List<string> ValidationErrors = new List<string>();
        
        // ===== æ–¹æ³• =====
        
        /// <summary>
        /// åˆ›å»ºé»˜è®¤æŠ€èƒ½æ•°æ®
        /// </summary>
        public static SkillEditorData CreateDefault(int id)
        {
            var data = CreateInstance<SkillEditorData>();
            data.SkillId = id;
            data.SkillName = $"NewSkill_{id}";
            data.SkillDescription = "æ–°æŠ€èƒ½";
            data.SkillType = SkillTypeEnum.æ”»å‡»;
            data.RequiredLevel = 1;
            data.MaxLevel = 10;
            data.DisplayCooldown = 5.0f;
            data.DisplayCost = 20;
            data.IconId = 0;
            data.SkillActions = new List<SkillActionData>();
            data.IsNew = true;
            data.IsDirty = true;
            return data;
        }
        
        /// <summary>
        /// å…‹éš†æŠ€èƒ½æ•°æ®
        /// </summary>
        public SkillEditorData Clone()
        {
            var clone = CreateInstance<SkillEditorData>();
            
            // å¤åˆ¶æŠ€èƒ½åŸºæœ¬ä¿¡æ¯
            clone.SkillId = this.SkillId;
            clone.SkillName = this.SkillName;
            clone.SkillDescription = this.SkillDescription;
            clone.SkillType = this.SkillType;
            clone.RequiredLevel = this.RequiredLevel;
            clone.MaxLevel = this.MaxLevel;
            clone.DisplayCooldown = this.DisplayCooldown;
            clone.DisplayCost = this.DisplayCost;
            clone.IconId = this.IconId;
            
            // æ·±æ‹·è´æŠ€èƒ½åŠ¨ä½œåˆ—è¡¨
            clone.SkillActions = new List<SkillActionData>();
            foreach (var action in this.SkillActions)
            {
                clone.SkillActions.Add(action.Clone());
            }
            
            // ç¼–è¾‘å™¨çŠ¶æ€
            clone.ValidationErrors = new List<string>();
            clone.IsNew = true;
            clone.IsDirty = true;
            
            return clone;
        }
        
        /// <summary>
        /// æ ‡è®°ä¸ºå·²ä¿®æ”¹
        /// </summary>
        public void MarkDirty()
        {
            IsDirty = true;
        }
        
        /// <summary>
        /// æ¸…é™¤ä¿®æ”¹æ ‡è®°
        /// </summary>
        public void ClearDirty()
        {
            IsDirty = false;
            IsNew = false;
        }
        
        /// <summary>
        /// è·å–æ‰€æœ‰æŠ€èƒ½åŠ¨ä½œçš„ActionIdåˆ—è¡¨
        /// </summary>
        public List<int> GetSkillActionIds()
        {
            return SkillActions.Select(a => a.ActionId).ToList();
        }
        
        /// <summary>
        /// æ·»åŠ æŠ€èƒ½åŠ¨ä½œ
        /// </summary>
        public void AddSkillAction(int actionId)
        {
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
            if (SkillActions.Any(a => a.ActionId == actionId))
            {
                Debug.LogWarning($"[SkillEditorData] ActionId {actionId} å·²å­˜åœ¨äºæŠ€èƒ½åŠ¨ä½œåˆ—è¡¨ä¸­");
                return;
            }
            
            var actionData = new SkillActionData
            {
                ActionId = actionId,
                SkillId = this.SkillId,
                AttackBoxInfo = "",
                ActualCost = this.DisplayCost,
                ActualCooldown = (int)(this.DisplayCooldown * 60), // è½¬æ¢ä¸ºå¸§æ•°
                TriggerFrames = new List<TriggerFrameInfo>()
            };
            
            SkillActions.Add(actionData);
            MarkDirty();
        }
        
        /// <summary>
        /// ç§»é™¤æŠ€èƒ½åŠ¨ä½œ
        /// </summary>
        public void RemoveSkillAction(int actionId)
        {
            var removed = SkillActions.RemoveAll(a => a.ActionId == actionId);
            if (removed > 0)
            {
                MarkDirty();
            }
        }
        
        // ===== Odin å›è°ƒ =====
        
        private bool ValidateSkillName(string name)
        {
            return !string.IsNullOrWhiteSpace(name);
        }
        
        private void OnSkillActionsChanged()
        {
            MarkDirty();
        }
    }
    
    /// <summary>
    /// æŠ€èƒ½åŠ¨ä½œæ•°æ®ï¼ˆå¯¹åº” SkillActionTableï¼ŒåŒæ—¶å…³è” ActionTableï¼‰
    /// </summary>
    [Serializable]
    public class SkillActionData
    {
        [TitleGroup("åŠ¨ä½œå…³è”")]
        [LabelText("åŠ¨ä½œID")]
        [InfoBox("å¿…é¡»å¯¹åº”ActionTableä¸­çš„åŠ¨ä½œID", InfoMessageType.Warning)]
        [OnValueChanged("OnActionIdChanged")]
        public int ActionId;
        
        [TitleGroup("åŠ¨ä½œå…³è”")]
        [LabelText("æ‰€å±æŠ€èƒ½ID"), ReadOnly]
        public int SkillId;
        
        [TitleGroup("åŠ¨ä½œå…³è”")]
        [LabelText("åŠ¨ä½œåç§°"), ReadOnly]
        [ShowInInspector]
        public string ActionName => GetActionName();
        
        [TitleGroup("æŠ€èƒ½ä¸“ç”¨é…ç½®/æ”»å‡»é…ç½®")]
        [LabelText("æ”»å‡»ç¢°æ’ç›’ä¿¡æ¯")]
        [InfoBox("æ ¼å¼: Box1:5x2x1,Box2:3x3x1", InfoMessageType.None)]
        public string AttackBoxInfo = "";
        
        [TitleGroup("æŠ€èƒ½ä¸“ç”¨é…ç½®/æ¶ˆè€—ä¸å†·å´")]
        [LabelText("å®é™…æ³•åŠ›æ¶ˆè€—"), Range(0, 1000)]
        [InfoBox("å®é™…é‡Šæ”¾æ—¶çš„æ³•åŠ›æ¶ˆè€—ï¼ˆå¯ä¸å±•ç¤ºå€¼ä¸åŒï¼‰", InfoMessageType.None)]
        public int ActualCost = 15;
        
        [TitleGroup("æŠ€èƒ½ä¸“ç”¨é…ç½®/æ¶ˆè€—ä¸å†·å´")]
        [LabelText("å®é™…å†·å´æ—¶é—´(å¸§)"), Range(0, 3600)]
        [InfoBox("å®é™…å†·å´æ—¶é—´ï¼Œå•ä½ï¼šå¸§ï¼ˆ60å¸§=1ç§’ï¼‰", InfoMessageType.None)]
        public int ActualCooldown = 270;
        
        [TitleGroup("æŠ€èƒ½ä¸“ç”¨é…ç½®/è§¦å‘å¸§é…ç½®")]
        [LabelText("è§¦å‘å¸§åˆ—è¡¨")]
        [ListDrawerSettings(ShowIndexLabels = true, ListElementLabelName = "DisplayName")]
        [InfoBox("é…ç½®æŠ€èƒ½æ•ˆæœåœ¨å“ªäº›å¸§è§¦å‘", InfoMessageType.Info)]
        public List<TriggerFrameInfo> TriggerFrames = new List<TriggerFrameInfo>();
        
        /// <summary>
        /// ç”¨äºOdinæ˜¾ç¤ºçš„åç§°
        /// </summary>
        [HideInInspector]
        public string ActionDisplayName => $"åŠ¨ä½œ {ActionId}: {ActionName}";
        
        /// <summary>
        /// å…‹éš†åŠ¨ä½œæ•°æ®
        /// </summary>
        public SkillActionData Clone()
        {
            var clone = new SkillActionData
            {
                ActionId = this.ActionId,
                SkillId = this.SkillId,
                AttackBoxInfo = this.AttackBoxInfo,
                ActualCost = this.ActualCost,
                ActualCooldown = this.ActualCooldown,
                TriggerFrames = new List<TriggerFrameInfo>()
            };
            
            // æ·±æ‹·è´è§¦å‘å¸§åˆ—è¡¨
            foreach (var trigger in this.TriggerFrames)
            {
                clone.TriggerFrames.Add(new TriggerFrameInfo
                {
                    Frame = trigger.Frame,
                    TriggerType = trigger.TriggerType,
                    EffectId = trigger.EffectId
                });
            }
            
            return clone;
        }
        
        /// <summary>
        /// è·å–åŠ¨ä½œåç§°ï¼ˆä»ActionTableæŸ¥è¯¢ï¼‰
        /// </summary>
        private string GetActionName()
        {
            // TODO: ä»ConfigTableHelperæŸ¥è¯¢ActionTableè·å–åŠ¨ä½œåç§°
            // è¿™é‡Œå…ˆè¿”å›å ä½ç¬¦ï¼Œåç»­åœ¨é›†æˆæ—¶å®ç°
            return $"Action_{ActionId}";
        }
        
        private void OnActionIdChanged()
        {
            // å½“ActionIdæ”¹å˜æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨æ›´æ–°å…³è”ä¿¡æ¯
        }
    }
    
    /// <summary>
    /// æŠ€èƒ½ç±»å‹æšä¸¾
    /// </summary>
    public enum SkillTypeEnum
    {
        æ”»å‡» = 1,
        æ§åˆ¶ = 2,
        ä½ç§» = 3,
        Buff = 4
    }
}

```

ç°åœ¨åˆ›å»ºæ•°æ®éªŒè¯å™¨ï¼š

```csharp
using System.Collections.Generic;
using System.Linq;
using Astrum.Editor.RoleEditor.Services;

namespace Astrum.Editor.RoleEditor.Data
{
    /// <summary>
    /// æŠ€èƒ½æ•°æ®éªŒè¯å™¨
    /// </summary>
    public static class SkillDataValidator
    {
        private const int MIN_SKILL_ID = 2000;
        private const int MAX_SKILL_ID = 9999;
        
        /// <summary>
        /// éªŒè¯æŠ€èƒ½æ•°æ®
        /// </summary>
        public static bool Validate(SkillEditorData data, out List<string> errors)
        {
            errors = new List<string>();
            
            if (data == null)
            {
                errors.Add("æŠ€èƒ½æ•°æ®ä¸ºç©º");
                return false;
            }
            
            // éªŒè¯æŠ€èƒ½ID
            ValidateSkillId(data, errors);
            
            // éªŒè¯æŠ€èƒ½åç§°
            ValidateSkillName(data, errors);
            
            // éªŒè¯æŠ€èƒ½ç±»å‹
            ValidateSkillType(data, errors);
            
            // éªŒè¯ç­‰çº§é…ç½®
            ValidateLevelConfig(data, errors);
            
            // éªŒè¯æŠ€èƒ½åŠ¨ä½œåˆ—è¡¨
            ValidateSkillActions(data, errors);
            
            // éªŒè¯æŠ€èƒ½åŠ¨ä½œä¸ActionTableçš„å¯¹åº”å…³ç³»
            ValidateActionTableMapping(data, errors);
            
            // éªŒè¯è§¦å‘å¸§é…ç½®
            ValidateTriggerFrames(data, errors);
            
            return errors.Count == 0;
        }
        
        /// <summary>
        /// éªŒè¯æŠ€èƒ½ID
        /// </summary>
        private static void ValidateSkillId(SkillEditorData data, List<string> errors)
        {
            if (data.SkillId < MIN_SKILL_ID || data.SkillId > MAX_SKILL_ID)
            {
                errors.Add($"æŠ€èƒ½ID {data.SkillId} ä¸åœ¨æœ‰æ•ˆèŒƒå›´ [{MIN_SKILL_ID}, {MAX_SKILL_ID}] å†…");
            }
        }
        
        /// <summary>
        /// éªŒè¯æŠ€èƒ½åç§°
        /// </summary>
        private static void ValidateSkillName(SkillEditorData data, List<string> errors)
        {
            if (string.IsNullOrWhiteSpace(data.SkillName))
            {
                errors.Add("æŠ€èƒ½åç§°ä¸èƒ½ä¸ºç©º");
            }
            else if (data.SkillName.Length > 50)
            {
                errors.Add($"æŠ€èƒ½åç§°è¿‡é•¿ï¼ˆ{data.SkillName.Length} > 50ï¼‰");
            }
        }
        
        /// <summary>
        /// éªŒè¯æŠ€èƒ½ç±»å‹
        /// </summary>
        private static void ValidateSkillType(SkillEditorData data, List<string> errors)
        {
            if ((int)data.SkillType < 1 || (int)data.SkillType > 4)
            {
                errors.Add($"æŠ€èƒ½ç±»å‹ {data.SkillType} æ— æ•ˆï¼ˆæœ‰æ•ˆå€¼: 1-4ï¼‰");
            }
        }
        
        /// <summary>
        /// éªŒè¯ç­‰çº§é…ç½®
        /// </summary>
        private static void ValidateLevelConfig(SkillEditorData data, List<string> errors)
        {
            if (data.RequiredLevel < 1)
            {
                errors.Add($"å­¦ä¹ æ‰€éœ€ç­‰çº§ {data.RequiredLevel} æ— æ•ˆï¼ˆæœ€å°å€¼: 1ï¼‰");
            }
            
            if (data.MaxLevel < 1)
            {
                errors.Add($"æŠ€èƒ½æœ€å¤§ç­‰çº§ {data.MaxLevel} æ— æ•ˆï¼ˆæœ€å°å€¼: 1ï¼‰");
            }
            
            if (data.MaxLevel < data.RequiredLevel)
            {
                errors.Add($"æŠ€èƒ½æœ€å¤§ç­‰çº§ {data.MaxLevel} ä¸èƒ½å°äºå­¦ä¹ æ‰€éœ€ç­‰çº§ {data.RequiredLevel}");
            }
            
            if (data.DisplayCooldown < 0)
            {
                errors.Add($"å±•ç¤ºå†·å´æ—¶é—´ {data.DisplayCooldown} ä¸èƒ½ä¸ºè´Ÿæ•°");
            }
            
            if (data.DisplayCost < 0)
            {
                errors.Add($"å±•ç¤ºæ³•åŠ›æ¶ˆè€— {data.DisplayCost} ä¸èƒ½ä¸ºè´Ÿæ•°");
            }
        }
        
        /// <summary>
        /// éªŒè¯æŠ€èƒ½åŠ¨ä½œåˆ—è¡¨
        /// </summary>
        private static void ValidateSkillActions(SkillEditorData data, List<string> errors)
        {
            if (data.SkillActions == null || data.SkillActions.Count == 0)
            {
                errors.Add("æŠ€èƒ½å¿…é¡»è‡³å°‘åŒ…å«ä¸€ä¸ªæŠ€èƒ½åŠ¨ä½œ");
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„ActionId
            var actionIds = data.SkillActions.Select(a => a.ActionId).ToList();
            var duplicates = actionIds.GroupBy(x => x)
                .Where(g => g.Count() > 1)
                .Select(g => g.Key)
                .ToList();
            
            if (duplicates.Count > 0)
            {
                errors.Add($"æŠ€èƒ½åŠ¨ä½œåˆ—è¡¨ä¸­å­˜åœ¨é‡å¤çš„ActionId: {string.Join(", ", duplicates)}");
            }
            
            // éªŒè¯æ¯ä¸ªæŠ€èƒ½åŠ¨ä½œ
            for (int i = 0; i < data.SkillActions.Count; i++)
            {
                var action = data.SkillActions[i];
                
                if (action.ActionId <= 0)
                {
                    errors.Add($"æŠ€èƒ½åŠ¨ä½œ #{i+1}: ActionId {action.ActionId} æ— æ•ˆ");
                }
                
                if (action.SkillId != data.SkillId)
                {
                    errors.Add($"æŠ€èƒ½åŠ¨ä½œ #{i+1}: SkillId {action.SkillId} ä¸å½“å‰æŠ€èƒ½ID {data.SkillId} ä¸åŒ¹é…");
                }
                
                if (action.ActualCost < 0)
                {
                    errors.Add($"æŠ€èƒ½åŠ¨ä½œ #{i+1}: å®é™…æ³•åŠ›æ¶ˆè€— {action.ActualCost} ä¸èƒ½ä¸ºè´Ÿæ•°");
                }
                
                if (action.ActualCooldown < 0)
                {
                    errors.Add($"æŠ€èƒ½åŠ¨ä½œ #{i+1}: å®é™…å†·å´æ—¶é—´ {action.ActualCooldown} ä¸èƒ½ä¸ºè´Ÿæ•°");
                }
            }
        }
        
        /// <summary>
        /// éªŒè¯æŠ€èƒ½åŠ¨ä½œä¸ActionTableçš„å¯¹åº”å…³ç³»ï¼ˆå…³é”®éªŒè¯ï¼‰
        /// </summary>
        private static void ValidateActionTableMapping(SkillEditorData data, List<string> errors)
        {
            if (data.SkillActions == null || data.SkillActions.Count == 0)
                return;
            
            foreach (var action in data.SkillActions)
            {
                // æ£€æŸ¥ActionIdæ˜¯å¦åœ¨ActionTableä¸­å­˜åœ¨
                var actionTable = ConfigTableHelper.GetActionTable(action.ActionId);
                if (actionTable == null)
                {
                    errors.Add($"æŠ€èƒ½åŠ¨ä½œ ActionId {action.ActionId} åœ¨ ActionTable ä¸­ä¸å­˜åœ¨ï¼Œå¿…é¡»ä¸€ä¸€å¯¹åº”");
                }
                else
                {
                    // éªŒè¯ActionTypeæ˜¯å¦ä¸º"skill"
                    if (!string.IsNullOrEmpty(actionTable.ActionType) && 
                        !actionTable.ActionType.Equals("skill", System.StringComparison.OrdinalIgnoreCase))
                    {
                        errors.Add($"æŠ€èƒ½åŠ¨ä½œ ActionId {action.ActionId} çš„ ActionType ä¸æ˜¯ 'skill'ï¼ˆå½“å‰: '{actionTable.ActionType}'ï¼‰");
                    }
                }
            }
        }
        
        /// <summary>
        /// éªŒè¯è§¦å‘å¸§é…ç½®
        /// </summary>
        private static void ValidateTriggerFrames(SkillEditorData data, List<string> errors)
        {
            if (data.SkillActions == null)
                return;
            
            foreach (var action in data.SkillActions)
            {
                if (action.TriggerFrames == null || action.TriggerFrames.Count == 0)
                    continue;
                
                foreach (var trigger in action.TriggerFrames)
                {
                    if (trigger.Frame < 0)
                    {
                        errors.Add($"æŠ€èƒ½åŠ¨ä½œ {action.ActionId}: è§¦å‘å¸§ {trigger.Frame} ä¸èƒ½ä¸ºè´Ÿæ•°");
                    }
                    
                    if (string.IsNullOrWhiteSpace(trigger.TriggerType))
                    {
                        errors.Add($"æŠ€èƒ½åŠ¨ä½œ {action.ActionId}: è§¦å‘å¸§ {trigger.Frame} çš„è§¦å‘ç±»å‹ä¸èƒ½ä¸ºç©º");
                    }
                    else
                    {
                        // éªŒè¯è§¦å‘ç±»å‹æ˜¯å¦æœ‰æ•ˆ
                        var validTypes = new[] { "Collision", "Direct", "Condition" };
                        if (!validTypes.Contains(trigger.TriggerType))
                        {
                            errors.Add($"æŠ€èƒ½åŠ¨ä½œ {action.ActionId}: è§¦å‘å¸§ {trigger.Frame} çš„è§¦å‘ç±»å‹ '{trigger.TriggerType}' æ— æ•ˆï¼ˆæœ‰æ•ˆå€¼: {string.Join(", ", validTypes)}ï¼‰");
                        }
                    }
                    
                    if (trigger.EffectId <= 0)
                    {
                        errors.Add($"æŠ€èƒ½åŠ¨ä½œ {action.ActionId}: è§¦å‘å¸§ {trigger.Frame} çš„æ•ˆæœID {trigger.EffectId} æ— æ•ˆ");
                    }
                }
                
                // æ£€æŸ¥è§¦å‘å¸§æ˜¯å¦æŒ‰é¡ºåºæ’åˆ—
                var frames = action.TriggerFrames.Select(t => t.Frame).ToList();
                var sortedFrames = frames.OrderBy(f => f).ToList();
                if (!frames.SequenceEqual(sortedFrames))
                {
                    errors.Add($"æŠ€èƒ½åŠ¨ä½œ {action.ActionId}: è§¦å‘å¸§åº”æŒ‰å¸§å·ä»å°åˆ°å¤§æ’åˆ—");
                }
            }
        }
        
        /// <summary>
        /// å¿«é€ŸéªŒè¯ï¼ˆåªéªŒè¯å…³é”®å­—æ®µï¼‰
        /// </summary>
        public static bool QuickValidate(SkillEditorData data)
        {
            if (data == null)
                return false;
            
            if (string.IsNullOrWhiteSpace(data.SkillName))
                return false;
            
            if (data.SkillActions == null || data.SkillActions.Count == 0)
                return false;
            
            if (data.SkillActions.Any(a => a.ActionId <= 0))
                return false;
            
            return true;
        }
    }
}

```

ç°åœ¨åˆ›å»ºæ•°æ®è¯»å–å™¨ï¼š

```csharp
using System.Collections.Generic;
using System.Linq;
using UnityEngine;
using Astrum.Editor.RoleEditor.Data;
using Astrum.Editor.RoleEditor.Persistence.Core;
using Astrum.Editor.RoleEditor.Persistence.Mappings;

namespace Astrum.Editor.RoleEditor.Persistence
{
    /// <summary>
    /// æŠ€èƒ½æ•°æ®è¯»å–å™¨ - ä»CSVæ–‡ä»¶è¯»å–æŠ€èƒ½æ•°æ®
    /// </summary>
    public static class SkillDataReader
    {
        private const string LOG_PREFIX = "[SkillDataReader]";
        
        /// <summary>
        /// è¯»å–æ‰€æœ‰æŠ€èƒ½æ•°æ®
        /// </summary>
        public static List<SkillEditorData> ReadSkillData()
        {
            var result = new List<SkillEditorData>();
            
            try
            {
                // 1. è¯»å– SkillTable
                var skillTableConfig = SkillTableData.GetTableConfig();
                var skillTableList = LubanCSVReader.ReadTable<SkillTableData>(skillTableConfig);
                
                Debug.Log($"{LOG_PREFIX} è¯»å–åˆ° {skillTableList.Count} æ¡ SkillTable è®°å½•");
                
                // 2. è¯»å– SkillActionTable
                var skillActionTableConfig = SkillActionTableData.GetTableConfig();
                var skillActionTableList = LubanCSVReader.ReadTable<SkillActionTableData>(skillActionTableConfig);
                
                Debug.Log($"{LOG_PREFIX} è¯»å–åˆ° {skillActionTableList.Count} æ¡ SkillActionTable è®°å½•");
                
                // 3. æŒ‰SkillIdåˆ†ç»„SkillActionTable
                var actionsBySkillId = skillActionTableList
                    .GroupBy(a => a.SkillId)
                    .ToDictionary(g => g.Key, g => g.ToList());
                
                // 4. ç»„è£… SkillEditorData
                foreach (var skillTable in skillTableList)
                {
                    var editorData = ConvertToEditorData(skillTable, actionsBySkillId);
                    if (editorData != null)
                    {
                        result.Add(editorData);
                    }
                }
                
                Debug.Log($"{LOG_PREFIX} æˆåŠŸè¯»å– {result.Count} ä¸ªæŠ€èƒ½æ•°æ®");
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"{LOG_PREFIX} è¯»å–æŠ€èƒ½æ•°æ®å¤±è´¥: {ex.Message}\n{ex.StackTrace}");
            }
            
            return result;
        }
        
        /// <summary>
        /// è¯»å–å•ä¸ªæŠ€èƒ½æ•°æ®
        /// </summary>
        public static SkillEditorData ReadSkillById(int skillId)
        {
            var allSkills = ReadSkillData();
            return allSkills.FirstOrDefault(s => s.SkillId == skillId);
        }
        
        /// <summary>
        /// è½¬æ¢ä¸ºç¼–è¾‘å™¨æ•°æ®
        /// </summary>
        private static SkillEditorData ConvertToEditorData(
            SkillTableData skillTable, 
            Dictionary<int, List<SkillActionTableData>> actionsBySkillId)
        {
            var data = SkillEditorData.CreateInstance<SkillEditorData>();
            
            // æ˜ å°„ SkillTable å­—æ®µ
            data.SkillId = skillTable.Id;
            data.SkillName = skillTable.Name ?? "";
            data.SkillDescription = skillTable.Description ?? "";
            data.SkillType = (SkillTypeEnum)skillTable.SkillType;
            data.DisplayCooldown = skillTable.DisplayCooldown;
            data.DisplayCost = skillTable.DisplayCost;
            data.RequiredLevel = skillTable.RequiredLevel;
            data.MaxLevel = skillTable.MaxLevel;
            data.IconId = skillTable.IconId;
            
            // æ˜ å°„ SkillActionTable æ•°æ®
            data.SkillActions = new List<SkillActionData>();
            
            if (actionsBySkillId.TryGetValue(skillTable.Id, out var actions))
            {
                foreach (var actionTable in actions)
                {
                    var actionData = new SkillActionData
                    {
                        ActionId = actionTable.ActionId,
                        SkillId = actionTable.SkillId,
                        AttackBoxInfo = actionTable.AttackBoxInfo ?? "",
                        ActualCost = actionTable.ActualCost,
                        ActualCooldown = actionTable.ActualCooldown,
                        TriggerFrames = actionTable.ParseTriggerFrames()
                    };
                    
                    data.SkillActions.Add(actionData);
                }
                
                Debug.Log($"{LOG_PREFIX} æŠ€èƒ½ [{skillTable.Id}] {skillTable.Name} åŒ…å« {actions.Count} ä¸ªåŠ¨ä½œ");
            }
            else
            {
                // æŠ€èƒ½æ²¡æœ‰åŠ¨ä½œï¼Œä½¿ç”¨SkillTableä¸­çš„skillActionIds
                var actionIds = skillTable.GetSkillActionIds();
                if (actionIds.Count > 0)
                {
                    Debug.LogWarning($"{LOG_PREFIX} æŠ€èƒ½ [{skillTable.Id}] {skillTable.Name} åœ¨ SkillActionTable ä¸­æ²¡æœ‰è®°å½•ï¼Œ" +
                                   $"ä½†åœ¨ SkillTable ä¸­é…ç½®äº† {actionIds.Count} ä¸ªåŠ¨ä½œID");
                    
                    // åˆ›å»ºå ä½ç¬¦åŠ¨ä½œæ•°æ®
                    foreach (var actionId in actionIds)
                    {
                        var actionData = new SkillActionData
                        {
                            ActionId = actionId,
                            SkillId = skillTable.Id,
                            AttackBoxInfo = "",
                            ActualCost = skillTable.DisplayCost,
                            ActualCooldown = (int)(skillTable.DisplayCooldown * 60), // è½¬æ¢ä¸ºå¸§æ•°
                            TriggerFrames = new List<TriggerFrameInfo>()
                        };
                        
                        data.SkillActions.Add(actionData);
                    }
                }
                else
                {
                    Debug.LogWarning($"{LOG_PREFIX} æŠ€èƒ½ [{skillTable.Id}] {skillTable.Name} æ²¡æœ‰é…ç½®ä»»ä½•æŠ€èƒ½åŠ¨ä½œ");
                }
            }
            
            // åˆå§‹åŒ–ç¼–è¾‘å™¨çŠ¶æ€
            data.IsNew = false;
            data.IsDirty = false;
            data.ValidationErrors = new List<string>();
            
            return data;
        }
        
        /// <summary>
        /// éªŒè¯æ•°æ®å®Œæ•´æ€§
        /// </summary>
        public static bool ValidateDataIntegrity(out List<string> errors)
        {
            errors = new List<string>();
            
            try
            {
                // è¯»å–æ‰€æœ‰æŠ€èƒ½æ•°æ®
                var skills = ReadSkillData();
                
                // æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„æŠ€èƒ½ID
                var duplicateIds = skills.GroupBy(s => s.SkillId)
                    .Where(g => g.Count() > 1)
                    .Select(g => g.Key)
                    .ToList();
                
                if (duplicateIds.Count > 0)
                {
                    errors.Add($"å‘ç°é‡å¤çš„æŠ€èƒ½ID: {string.Join(", ", duplicateIds)}");
                }
                
                // æ£€æŸ¥æ¯ä¸ªæŠ€èƒ½çš„æ•°æ®æœ‰æ•ˆæ€§
                foreach (var skill in skills)
                {
                    if (!SkillDataValidator.Validate(skill, out var skillErrors))
                    {
                        errors.AddRange(skillErrors.Select(e => $"æŠ€èƒ½ [{skill.SkillId}] {skill.SkillName}: {e}"));
                    }
                }
                
                Debug.Log($"{LOG_PREFIX} æ•°æ®å®Œæ•´æ€§éªŒè¯å®Œæˆï¼Œå‘ç° {errors.Count} ä¸ªé—®é¢˜");
            }
            catch (System.Exception ex)
            {
                errors.Add($"éªŒè¯æ•°æ®å®Œæ•´æ€§æ—¶å‘ç”Ÿå¼‚å¸¸: {ex.Message}");
                Debug.LogError($"{LOG_PREFIX} {errors[errors.Count - 1]}");
            }
            
            return errors.Count == 0;
        }
        
        /// <summary>
        /// è·å–æ‰€æœ‰æŠ€èƒ½IDåˆ—è¡¨
        /// </summary>
        public static List<int> GetAllSkillIds()
        {
            try
            {
                var skillTableConfig = SkillTableData.GetTableConfig();
                var skillTableList = LubanCSVReader.ReadTable<SkillTableData>(skillTableConfig);
                return skillTableList.Select(s => s.Id).ToList();
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"{LOG_PREFIX} è·å–æŠ€èƒ½IDåˆ—è¡¨å¤±è´¥: {ex.Message}");
                return new List<int>();
            }
        }
        
        /// <summary>
        /// æ£€æŸ¥æŠ€èƒ½IDæ˜¯å¦å­˜åœ¨
        /// </summary>
        public static bool SkillIdExists(int skillId)
        {
            var allIds = GetAllSkillIds();
            return allIds.Contains(skillId);
        }
    }
}

```

ç°åœ¨åˆ›å»ºæ•°æ®å†™å…¥å™¨ï¼š

```csharp
using System.Collections.Generic;
using System.Linq;
using UnityEngine;
using Astrum.Editor.RoleEditor.Data;
using Astrum.Editor.RoleEditor.Persistence.Core;
using Astrum.Editor.RoleEditor.Persistence.Mappings;

namespace Astrum.Editor.RoleEditor.Persistence
{
    /// <summary>
    /// æŠ€èƒ½æ•°æ®å†™å…¥å™¨ - å°†æŠ€èƒ½æ•°æ®å†™å…¥CSVæ–‡ä»¶
    /// </summary>
    public static class SkillDataWriter
    {
        private const string LOG_PREFIX = "[SkillDataWriter]";
        
        /// <summary>
        /// å†™å…¥æ‰€æœ‰æŠ€èƒ½æ•°æ®
        /// </summary>
        public static bool WriteSkillData(List<SkillEditorData> skills)
        {
            if (skills == null || skills.Count == 0)
            {
                Debug.LogWarning($"{LOG_PREFIX} æŠ€èƒ½æ•°æ®åˆ—è¡¨ä¸ºç©ºï¼Œæ— éœ€å†™å…¥");
                return false;
            }
            
            try
            {
                // 1. è½¬æ¢ä¸ºè¡¨æ ¼æ•°æ®
                var skillTableList = new List<SkillTableData>();
                var skillActionTableList = new List<SkillActionTableData>();
                
                foreach (var skill in skills)
                {
                    // è½¬æ¢ SkillTable æ•°æ®
                    var skillTable = ConvertToSkillTableData(skill);
                    skillTableList.Add(skillTable);
                    
                    // è½¬æ¢ SkillActionTable æ•°æ®
                    foreach (var action in skill.SkillActions)
                    {
                        var actionTable = ConvertToSkillActionTableData(action);
                        skillActionTableList.Add(actionTable);
                    }
                }
                
                // 2. å†™å…¥ SkillTable
                var skillTableConfig = SkillTableData.GetTableConfig();
                bool skillTableSuccess = LubanCSVWriter.WriteTable(skillTableList, skillTableConfig);
                
                if (!skillTableSuccess)
                {
                    Debug.LogError($"{LOG_PREFIX} å†™å…¥ SkillTable å¤±è´¥");
                    return false;
                }
                
                Debug.Log($"{LOG_PREFIX} æˆåŠŸå†™å…¥ {skillTableList.Count} æ¡ SkillTable è®°å½•");
                
                // 3. å†™å…¥ SkillActionTable
                var skillActionTableConfig = SkillActionTableData.GetTableConfig();
                bool skillActionTableSuccess = LubanCSVWriter.WriteTable(skillActionTableList, skillActionTableConfig);
                
                if (!skillActionTableSuccess)
                {
                    Debug.LogError($"{LOG_PREFIX} å†™å…¥ SkillActionTable å¤±è´¥");
                    return false;
                }
                
                Debug.Log($"{LOG_PREFIX} æˆåŠŸå†™å…¥ {skillActionTableList.Count} æ¡ SkillActionTable è®°å½•");
                
                Debug.Log($"{LOG_PREFIX} æˆåŠŸå†™å…¥ {skills.Count} ä¸ªæŠ€èƒ½æ•°æ®");
                return true;
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"{LOG_PREFIX} å†™å…¥æŠ€èƒ½æ•°æ®å¤±è´¥: {ex.Message}\n{ex.StackTrace}");
                return false;
            }
        }
        
        /// <summary>
        /// å†™å…¥å•ä¸ªæŠ€èƒ½æ•°æ®
        /// </summary>
        public static bool WriteSkill(SkillEditorData skill)
        {
            // è¯»å–ç°æœ‰æ•°æ®
            var allSkills = SkillDataReader.ReadSkillData();
            
            // æŸ¥æ‰¾å¹¶æ›¿æ¢
            var existing = allSkills.FirstOrDefault(s => s.SkillId == skill.SkillId);
            if (existing != null)
            {
                allSkills.Remove(existing);
            }
            
            allSkills.Add(skill);
            
            // å†™å…¥æ‰€æœ‰æ•°æ®
            return WriteSkillData(allSkills);
        }
        
        /// <summary>
        /// åˆ é™¤æŠ€èƒ½æ•°æ®
        /// </summary>
        public static bool DeleteSkill(int skillId)
        {
            // è¯»å–ç°æœ‰æ•°æ®
            var allSkills = SkillDataReader.ReadSkillData();
            
            // ç§»é™¤æŒ‡å®šæŠ€èƒ½
            var removed = allSkills.RemoveAll(s => s.SkillId == skillId);
            
            if (removed == 0)
            {
                Debug.LogWarning($"{LOG_PREFIX} æœªæ‰¾åˆ°æŠ€èƒ½ID {skillId}ï¼Œæ— éœ€åˆ é™¤");
                return false;
            }
            
            Debug.Log($"{LOG_PREFIX} åˆ é™¤æŠ€èƒ½ {skillId}");
            
            // å†™å…¥æ‰€æœ‰æ•°æ®
            return WriteSkillData(allSkills);
        }
        
        /// <summary>
        /// è½¬æ¢ä¸º SkillTableData
        /// </summary>
        private static SkillTableData ConvertToSkillTableData(SkillEditorData skill)
        {
            var data = new SkillTableData
            {
                Id = skill.SkillId,
                Name = skill.SkillName,
                Description = skill.SkillDescription,
                SkillType = (int)skill.SkillType,
                DisplayCooldown = skill.DisplayCooldown,
                DisplayCost = skill.DisplayCost,
                RequiredLevel = skill.RequiredLevel,
                MaxLevel = skill.MaxLevel,
                IconId = skill.IconId
            };
            
            // è®¾ç½®æŠ€èƒ½åŠ¨ä½œIDåˆ—è¡¨
            var actionIds = skill.SkillActions.Select(a => a.ActionId).ToList();
            data.SetSkillActionIds(actionIds);
            
            return data;
        }
        
        /// <summary>
        /// è½¬æ¢ä¸º SkillActionTableData
        /// </summary>
        private static SkillActionTableData ConvertToSkillActionTableData(SkillActionData action)
        {
            var data = new SkillActionTableData
            {
                ActionId = action.ActionId,
                SkillId = action.SkillId,
                AttackBoxInfo = action.AttackBoxInfo ?? "",
                ActualCost = action.ActualCost,
                ActualCooldown = action.ActualCooldown
            };
            
            // è®¾ç½®è§¦å‘å¸§ä¿¡æ¯
            data.SetTriggerFrames(action.TriggerFrames);
            
            return data;
        }
        
        /// <summary>
        /// éªŒè¯å†™å…¥å‰çš„æ•°æ®
        /// </summary>
        public static bool ValidateBeforeWrite(List<SkillEditorData> skills, out List<string> errors)
        {
            errors = new List<string>();
            
            if (skills == null || skills.Count == 0)
            {
                errors.Add("æŠ€èƒ½æ•°æ®åˆ—è¡¨ä¸ºç©º");
                return false;
            }
            
            // æ£€æŸ¥é‡å¤çš„æŠ€èƒ½ID
            var duplicateIds = skills.GroupBy(s => s.SkillId)
                .Where(g => g.Count() > 1)
                .Select(g => g.Key)
                .ToList();
            
            if (duplicateIds.Count > 0)
            {
                errors.Add($"å­˜åœ¨é‡å¤çš„æŠ€èƒ½ID: {string.Join(", ", duplicateIds)}");
            }
            
            // éªŒè¯æ¯ä¸ªæŠ€èƒ½
            foreach (var skill in skills)
            {
                if (!SkillDataValidator.Validate(skill, out var skillErrors))
                {
                    errors.AddRange(skillErrors.Select(e => $"æŠ€èƒ½ [{skill.SkillId}] {skill.SkillName}: {e}"));
                }
            }
            
            // æ£€æŸ¥ SkillActionTable ä¸­çš„ ActionId æ˜¯å¦é‡å¤
            var allActionIds = skills.SelectMany(s => s.SkillActions.Select(a => a.ActionId)).ToList();
            var duplicateActionIds = allActionIds.GroupBy(x => x)
                .Where(g => g.Count() > 1)
                .Select(g => g.Key)
                .ToList();
            
            if (duplicateActionIds.Count > 0)
            {
                errors.Add($"SkillActionTable ä¸­å­˜åœ¨é‡å¤çš„ ActionIdï¼ˆè¿åä¸€ä¸€å¯¹åº”å…³ç³»ï¼‰: {string.Join(", ", duplicateActionIds)}");
            }
            
            return errors.Count == 0;
        }
        
        /// <summary>
        /// æ‰¹é‡æ›´æ–°æŠ€èƒ½æ•°æ®
        /// </summary>
        public static bool BatchUpdate(List<SkillEditorData> skillsToUpdate)
        {
            if (skillsToUpdate == null || skillsToUpdate.Count == 0)
            {
                Debug.LogWarning($"{LOG_PREFIX} æ²¡æœ‰éœ€è¦æ›´æ–°çš„æŠ€èƒ½");
                return false;
            }
            
            try
            {
                // è¯»å–ç°æœ‰æ•°æ®
                var allSkills = SkillDataReader.ReadSkillData();
                
                // æ›´æ–°æˆ–æ·»åŠ 
                foreach (var updateSkill in skillsToUpdate)
                {
                    var existing = allSkills.FirstOrDefault(s => s.SkillId == updateSkill.SkillId);
                    if (existing != null)
                    {
                        allSkills.Remove(existing);
                    }
                    allSkills.Add(updateSkill);
                }
                
                // å†™å…¥æ‰€æœ‰æ•°æ®
                return WriteSkillData(allSkills);
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"{LOG_PREFIX} æ‰¹é‡æ›´æ–°å¤±è´¥: {ex.Message}");
                return false;
            }
        }
        
        /// <summary>
        /// å¯¼å‡ºæŠ€èƒ½æ•°æ®åˆ°å¤‡ä»½æ–‡ä»¶
        /// </summary>
        public static bool ExportToBackup(List<SkillEditorData> skills, string backupSuffix = null)
        {
            if (string.IsNullOrEmpty(backupSuffix))
            {
                backupSuffix = System.DateTime.Now.ToString("yyyyMMdd_HHmmss");
            }
            
            try
            {
                // ä¿®æ”¹é…ç½®è·¯å¾„ä¸ºå¤‡ä»½è·¯å¾„
                var skillTableConfig = SkillTableData.GetTableConfig();
                skillTableConfig.FilePath = skillTableConfig.FilePath.Replace(".csv", $"_backup_{backupSuffix}.csv");
                
                var skillActionTableConfig = SkillActionTableData.GetTableConfig();
                skillActionTableConfig.FilePath = skillActionTableConfig.FilePath.Replace(".csv", $"_backup_{backupSuffix}.csv");
                
                // è½¬æ¢æ•°æ®
                var skillTableList = skills.Select(ConvertToSkillTableData).ToList();
                var skillActionTableList = skills.SelectMany(s => s.SkillActions.Select(ConvertToSkillActionTableData)).ToList();
                
                // å†™å…¥å¤‡ä»½æ–‡ä»¶
                bool success = LubanCSVWriter.WriteTable(skillTableList, skillTableConfig) &&
                               LubanCSVWriter.WriteTable(skillActionTableList, skillActionTableConfig);
                
                if (success)
                {
                    Debug.Log($"{LOG_PREFIX} æˆåŠŸå¯¼å‡ºå¤‡ä»½åˆ°: {backupSuffix}");
                }
                
                return success;
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"{LOG_PREFIX} å¯¼å‡ºå¤‡ä»½å¤±è´¥: {ex.Message}");
                return false;
            }
        }
    }
}

```

ç°åœ¨æ›´æ–° `TriggerFrameInfo` ä½¿å…¶åœ¨ Data å±‚ä¹Ÿå¯ç”¨ï¼Œå¹¶æ›´æ–° `SkillEditorData.cs`ï¼š

```csharp
using System;
using System.Collections.Generic;
using System.Linq;
using Sirenix.OdinInspector;
using UnityEngine;
using Astrum.Editor.RoleEditor.Persistence.Mappings;
```

```csharp
using Astrum.Editor.RoleEditor.Persistence.Core;
using System.Collections.Generic;

namespace Astrum.Editor.RoleEditor.Persistence.Mappings
{
    /// <summary>
    /// SkillActionTableæ•°æ®æ˜ å°„
    /// </summary>
    public class SkillActionTableData
    {
        [TableField(0, "actionId")]
        public int ActionId { get; set; }
        
        [TableField(1, "skillId")]
        public int SkillId { get; set; }
        
        [TableField(2, "attackBoxInfo")]
        public string AttackBoxInfo { get; set; }
        
        [TableField(3, "actualCost")]
        public int ActualCost { get; set; }
        
        [TableField(4, "actualCooldown")]
        public int ActualCooldown { get; set; }
        
        [TableField(5, "triggerFrames")]
        public string TriggerFrames { get; set; }
        
        /// <summary>
        /// è§£æè§¦å‘å¸§ä¿¡æ¯
        /// æ ¼å¼: "Frame5:Collision:4001,Frame8:Direct:4002"
        /// </summary>
        public List<TriggerFrameInfo> ParseTriggerFrames()
        {
            var result = new List<TriggerFrameInfo>();
            
            if (string.IsNullOrEmpty(TriggerFrames))
                return result;
            
            var parts = TriggerFrames.Split(',');
            foreach (var part in parts)
            {
                var trimmed = part.Trim();
                if (string.IsNullOrEmpty(trimmed))
                    continue;
                
                var segments = trimmed.Split(':');
                if (segments.Length >= 3)
                {
                    // è§£æå¸§å·ï¼ˆå»æ‰"Frame"å‰ç¼€ï¼‰
                    var frameStr = segments[0].Replace("Frame", "").Trim();
                    if (int.TryParse(frameStr, out int frame) &&
                        int.TryParse(segments[2].Trim(), out int effectId))
                    {
                        result.Add(new TriggerFrameInfo
                        {
                            Frame = frame,
                            TriggerType = segments[1].Trim(),
                            EffectId = effectId
                        });
                    }
                }
            }
            
            return result;
        }
        
        /// <summary>
        /// è®¾ç½®è§¦å‘å¸§ä¿¡æ¯
        /// </summary>
        public void SetTriggerFrames(List<TriggerFrameInfo> triggerFrames)
        {
            if (triggerFrames == null || triggerFrames.Count == 0)
            {
                TriggerFrames = string.Empty;
                return;
            }
            
            var parts = new List<string>();
            foreach (var info in triggerFrames)
            {
                parts.Add($"Frame{info.Frame}:{info.TriggerType}:{info.EffectId}");
            }
            
            TriggerFrames = string.Join(",", parts);
        }
        
        /// <summary>
        /// è·å–è¡¨é…ç½®
        /// </summary>
        public static LubanTableConfig GetTableConfig()
        {
            return new LubanTableConfig
            {
                FilePath = "AstrumConfig/Tables/Datas/Skill/#SkillActionTable.csv",
                HeaderLines = 4,
                HasEmptyFirstColumn = true,
                Header = new TableHeader
                {
                    VarNames = new List<string>
                    {
                        "actionId", "skillId", "attackBoxInfo", "actualCost",
                        "actualCooldown", "triggerFrames"
                    },
                    Types = new List<string>
                    {
                        "int", "int", "string", "int", "int", "string"
                    },
                    Groups = new List<string>
                    {
                        "", "", "", "", "", ""
                    },
                    Descriptions = new List<string>
                    {
                        "åŠ¨ä½œID", "æŠ€èƒ½ID", "æ”»å‡»ç¢°æ’ç›’ä¿¡æ¯", "å®é™…æ³•åŠ›æ¶ˆè€—",
                        "å®é™…å†·å´æ—¶é—´(å¸§)", "è§¦å‘å¸§ä¿¡æ¯"
                    }
                }
            };
        }
    }
    
    /// <summary>
    /// è§¦å‘å¸§ä¿¡æ¯ï¼ˆå¯åºåˆ—åŒ–ï¼‰
    /// </summary>
    [System.Serializable]
    public class TriggerFrameInfo
    {
        /// <summary>å¸§å·</summary>
        public int Frame { get; set; }
        
        /// <summary>è§¦å‘ç±»å‹ï¼ˆCollision/Direct/Conditionï¼‰</summary>
        public string TriggerType { get; set; } = "Direct";
        
        /// <summary>æ•ˆæœID</summary>
        public int EffectId { get; set; }
        
        /// <summary>ç”¨äºOdinæ˜¾ç¤º</summary>
        public string DisplayName => ToString();
        
        public override string ToString()
        {
            return $"Frame{Frame}:{TriggerType}:{EffectId}";
        }
    }
}


```

ç°åœ¨æ›´æ–°TODOåˆ—è¡¨å¹¶æ£€æŸ¥ç¼–è¯‘é”™è¯¯ï¼š

å¾ˆå¥½ï¼æ²¡æœ‰ç¼–è¯‘é”™è¯¯ã€‚ç°åœ¨åˆ›å»ºä¸€ä¸ªæµ‹è¯•è„šæœ¬æ¥æµ‹è¯•æ•°æ®å±‚åŠŸèƒ½ï¼š

```csharp
using UnityEngine;
using UnityEditor;
using Astrum.Editor.RoleEditor.Data;
using Astrum.Editor.RoleEditor.Persistence;
using Astrum.Editor.RoleEditor.Persistence.Mappings;
using System.Collections.Generic;
using System.Linq;

namespace Astrum.Editor.RoleEditor.Test
{
    /// <summary>
    /// æŠ€èƒ½æ•°æ®æµ‹è¯•å·¥å…·
    /// </summary>
    public static class SkillDataTest
    {
        private const string MENU_ROOT = "Tools/Role & Skill Editor/Skill Data Tests/";
        
        // ===== è¯»å–æµ‹è¯• =====
        
        [MenuItem(MENU_ROOT + "1. æµ‹è¯•è¯»å–æŠ€èƒ½æ•°æ®")]
        public static void TestReadSkillData()
        {
            Debug.Log("========== å¼€å§‹æµ‹è¯•è¯»å–æŠ€èƒ½æ•°æ® ==========");
            
            try
            {
                var skills = SkillDataReader.ReadSkillData();
                
                Debug.Log($"âœ“ æˆåŠŸè¯»å– {skills.Count} ä¸ªæŠ€èƒ½");
                
                foreach (var skill in skills)
                {
                    Debug.Log($"  - [{skill.SkillId}] {skill.SkillName}");
                    Debug.Log($"    ç±»å‹: {skill.SkillType}, ç­‰çº§: {skill.RequiredLevel}-{skill.MaxLevel}");
                    Debug.Log($"    åŠ¨ä½œæ•°é‡: {skill.SkillActions.Count}");
                    
                    foreach (var action in skill.SkillActions)
                    {
                        Debug.Log($"      â””â”€ åŠ¨ä½œ {action.ActionId}: {action.TriggerFrames.Count} ä¸ªè§¦å‘å¸§");
                    }
                }
                
                EditorUtility.DisplayDialog("æµ‹è¯•æˆåŠŸ", 
                    $"æˆåŠŸè¯»å– {skills.Count} ä¸ªæŠ€èƒ½æ•°æ®", "ç¡®å®š");
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"âœ— æµ‹è¯•å¤±è´¥: {ex.Message}\n{ex.StackTrace}");
                EditorUtility.DisplayDialog("æµ‹è¯•å¤±è´¥", 
                    $"è¯»å–æŠ€èƒ½æ•°æ®å¤±è´¥ï¼š{ex.Message}", "ç¡®å®š");
            }
            
            Debug.Log("========== æµ‹è¯•å®Œæˆ ==========");
        }
        
        [MenuItem(MENU_ROOT + "2. æµ‹è¯•è¯»å–å•ä¸ªæŠ€èƒ½")]
        public static void TestReadSingleSkill()
        {
            Debug.Log("========== å¼€å§‹æµ‹è¯•è¯»å–å•ä¸ªæŠ€èƒ½ ==========");
            
            try
            {
                int testSkillId = 2001; // æµ‹è¯•æŠ€èƒ½ID
                var skill = SkillDataReader.ReadSkillById(testSkillId);
                
                if (skill != null)
                {
                    Debug.Log($"âœ“ æˆåŠŸè¯»å–æŠ€èƒ½ [{skill.SkillId}] {skill.SkillName}");
                    Debug.Log($"  æè¿°: {skill.SkillDescription}");
                    Debug.Log($"  ç±»å‹: {skill.SkillType}");
                    Debug.Log($"  å†·å´: {skill.DisplayCooldown}ç§’, æ¶ˆè€—: {skill.DisplayCost}");
                    Debug.Log($"  åŠ¨ä½œåˆ—è¡¨:");
                    
                    foreach (var action in skill.SkillActions)
                    {
                        Debug.Log($"    - ActionId: {action.ActionId}");
                        Debug.Log($"      æ”»å‡»ç›’: {action.AttackBoxInfo}");
                        Debug.Log($"      å®é™…æ¶ˆè€—: {action.ActualCost}, å®é™…å†·å´: {action.ActualCooldown}å¸§");
                        Debug.Log($"      è§¦å‘å¸§: {string.Join(", ", action.TriggerFrames.Select(t => t.ToString()))}");
                    }
                    
                    EditorUtility.DisplayDialog("æµ‹è¯•æˆåŠŸ", 
                        $"æˆåŠŸè¯»å–æŠ€èƒ½ [{skill.SkillId}] {skill.SkillName}", "ç¡®å®š");
                }
                else
                {
                    Debug.LogWarning($"âœ— æœªæ‰¾åˆ°æŠ€èƒ½ID {testSkillId}");
                    EditorUtility.DisplayDialog("æµ‹è¯•è­¦å‘Š", 
                        $"æœªæ‰¾åˆ°æŠ€èƒ½ID {testSkillId}", "ç¡®å®š");
                }
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"âœ— æµ‹è¯•å¤±è´¥: {ex.Message}\n{ex.StackTrace}");
                EditorUtility.DisplayDialog("æµ‹è¯•å¤±è´¥", 
                    $"è¯»å–å•ä¸ªæŠ€èƒ½å¤±è´¥ï¼š{ex.Message}", "ç¡®å®š");
            }
            
            Debug.Log("========== æµ‹è¯•å®Œæˆ ==========");
        }
        
        // ===== éªŒè¯æµ‹è¯• =====
        
        [MenuItem(MENU_ROOT + "3. æµ‹è¯•æ•°æ®éªŒè¯")]
        public static void TestDataValidation()
        {
            Debug.Log("========== å¼€å§‹æµ‹è¯•æ•°æ®éªŒè¯ ==========");
            
            try
            {
                var skills = SkillDataReader.ReadSkillData();
                
                int validCount = 0;
                int invalidCount = 0;
                
                foreach (var skill in skills)
                {
                    if (SkillDataValidator.Validate(skill, out var errors))
                    {
                        validCount++;
                        Debug.Log($"âœ“ æŠ€èƒ½ [{skill.SkillId}] {skill.SkillName} éªŒè¯é€šè¿‡");
                    }
                    else
                    {
                        invalidCount++;
                        Debug.LogWarning($"âœ— æŠ€èƒ½ [{skill.SkillId}] {skill.SkillName} éªŒè¯å¤±è´¥:");
                        foreach (var error in errors)
                        {
                            Debug.LogWarning($"    - {error}");
                        }
                    }
                }
                
                Debug.Log($"éªŒè¯å®Œæˆ: {validCount} ä¸ªé€šè¿‡, {invalidCount} ä¸ªå¤±è´¥");
                
                EditorUtility.DisplayDialog("éªŒè¯å®Œæˆ", 
                    $"éªŒè¯ç»“æœ:\né€šè¿‡: {validCount} ä¸ª\nå¤±è´¥: {invalidCount} ä¸ª", "ç¡®å®š");
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"âœ— æµ‹è¯•å¤±è´¥: {ex.Message}\n{ex.StackTrace}");
                EditorUtility.DisplayDialog("æµ‹è¯•å¤±è´¥", 
                    $"æ•°æ®éªŒè¯å¤±è´¥ï¼š{ex.Message}", "ç¡®å®š");
            }
            
            Debug.Log("========== æµ‹è¯•å®Œæˆ ==========");
        }
        
        [MenuItem(MENU_ROOT + "4. æµ‹è¯•æ•°æ®å®Œæ•´æ€§")]
        public static void TestDataIntegrity()
        {
            Debug.Log("========== å¼€å§‹æµ‹è¯•æ•°æ®å®Œæ•´æ€§ ==========");
            
            try
            {
                if (SkillDataReader.ValidateDataIntegrity(out var errors))
                {
                    Debug.Log("âœ“ æ•°æ®å®Œæ•´æ€§éªŒè¯é€šè¿‡ï¼Œæ²¡æœ‰å‘ç°é—®é¢˜");
                    EditorUtility.DisplayDialog("éªŒè¯æˆåŠŸ", 
                        "æ•°æ®å®Œæ•´æ€§éªŒè¯é€šè¿‡", "ç¡®å®š");
                }
                else
                {
                    Debug.LogWarning($"âœ— æ•°æ®å®Œæ•´æ€§éªŒè¯å¤±è´¥ï¼Œå‘ç° {errors.Count} ä¸ªé—®é¢˜:");
                    foreach (var error in errors)
                    {
                        Debug.LogWarning($"  - {error}");
                    }
                    
                    EditorUtility.DisplayDialog("éªŒè¯å¤±è´¥", 
                        $"å‘ç° {errors.Count} ä¸ªé—®é¢˜ï¼Œè¯·æŸ¥çœ‹Console", "ç¡®å®š");
                }
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"âœ— æµ‹è¯•å¤±è´¥: {ex.Message}\n{ex.StackTrace}");
                EditorUtility.DisplayDialog("æµ‹è¯•å¤±è´¥", 
                    $"æ•°æ®å®Œæ•´æ€§éªŒè¯å¤±è´¥ï¼š{ex.Message}", "ç¡®å®š");
            }
            
            Debug.Log("========== æµ‹è¯•å®Œæˆ ==========");
        }
        
        // ===== ActionTable æ˜ å°„æµ‹è¯• =====
        
        [MenuItem(MENU_ROOT + "5. æµ‹è¯• ActionTable å¯¹åº”å…³ç³»")]
        public static void TestActionTableMapping()
        {
            Debug.Log("========== å¼€å§‹æµ‹è¯• ActionTable å¯¹åº”å…³ç³» ==========");
            
            try
            {
                var skills = SkillDataReader.ReadSkillData();
                
                int totalActions = 0;
                int validActions = 0;
                int invalidActions = 0;
                var invalidActionIds = new List<int>();
                
                foreach (var skill in skills)
                {
                    foreach (var action in skill.SkillActions)
                    {
                        totalActions++;
                        var actionTable = Services.ConfigTableHelper.GetActionTable(action.ActionId);
                        
                        if (actionTable != null)
                        {
                            validActions++;
                            Debug.Log($"âœ“ æŠ€èƒ½ [{skill.SkillId}] çš„åŠ¨ä½œ {action.ActionId} åœ¨ ActionTable ä¸­å­˜åœ¨");
                            Debug.Log($"    ActionName: {actionTable.Name}, ActionType: {actionTable.ActionType}");
                        }
                        else
                        {
                            invalidActions++;
                            invalidActionIds.Add(action.ActionId);
                            Debug.LogError($"âœ— æŠ€èƒ½ [{skill.SkillId}] çš„åŠ¨ä½œ {action.ActionId} åœ¨ ActionTable ä¸­ä¸å­˜åœ¨ï¼");
                        }
                    }
                }
                
                Debug.Log($"å¯¹åº”å…³ç³»æµ‹è¯•å®Œæˆ:");
                Debug.Log($"  æ€»åŠ¨ä½œæ•°: {totalActions}");
                Debug.Log($"  æœ‰æ•ˆ: {validActions}");
                Debug.Log($"  æ— æ•ˆ: {invalidActions}");
                
                if (invalidActions > 0)
                {
                    EditorUtility.DisplayDialog("æµ‹è¯•å¤±è´¥", 
                        $"å‘ç° {invalidActions} ä¸ªæ— æ•ˆçš„ActionIdï¼Œä¸æ»¡è¶³ä¸€ä¸€å¯¹åº”å…³ç³»\n" +
                        $"æ— æ•ˆID: {string.Join(", ", invalidActionIds)}", "ç¡®å®š");
                }
                else
                {
                    EditorUtility.DisplayDialog("æµ‹è¯•æˆåŠŸ", 
                        $"æ‰€æœ‰æŠ€èƒ½åŠ¨ä½œéƒ½ä¸ ActionTable æ­£ç¡®å¯¹åº”\næ€»è®¡: {totalActions} ä¸ªåŠ¨ä½œ", "ç¡®å®š");
                }
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"âœ— æµ‹è¯•å¤±è´¥: {ex.Message}\n{ex.StackTrace}");
                EditorUtility.DisplayDialog("æµ‹è¯•å¤±è´¥", 
                    $"ActionTable å¯¹åº”å…³ç³»æµ‹è¯•å¤±è´¥ï¼š{ex.Message}", "ç¡®å®š");
            }
            
            Debug.Log("========== æµ‹è¯•å®Œæˆ ==========");
        }
        
        // ===== å†™å…¥æµ‹è¯•ï¼ˆæ…ç”¨ï¼ï¼‰=====
        
        [MenuItem(MENU_ROOT + "å†™å…¥æµ‹è¯•/åˆ›å»ºæµ‹è¯•æŠ€èƒ½")]
        public static void TestCreateSkill()
        {
            Debug.Log("========== å¼€å§‹æµ‹è¯•åˆ›å»ºæŠ€èƒ½ ==========");
            
            try
            {
                // åˆ›å»ºæµ‹è¯•æŠ€èƒ½
                var testSkill = SkillEditorData.CreateDefault(9999);
                testSkill.SkillName = "æµ‹è¯•æŠ€èƒ½";
                testSkill.SkillDescription = "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æŠ€èƒ½";
                testSkill.SkillType = SkillTypeEnum.æ”»å‡»;
                
                // æ·»åŠ ä¸€ä¸ªæµ‹è¯•åŠ¨ä½œ
                testSkill.AddSkillAction(3001); // ä½¿ç”¨ç°æœ‰çš„ActionId
                
                // éªŒè¯
                if (!SkillDataValidator.Validate(testSkill, out var errors))
                {
                    Debug.LogError("âœ— æµ‹è¯•æŠ€èƒ½éªŒè¯å¤±è´¥:");
                    foreach (var error in errors)
                    {
                        Debug.LogError($"  - {error}");
                    }
                    return;
                }
                
                Debug.Log("âœ“ æµ‹è¯•æŠ€èƒ½åˆ›å»ºæˆåŠŸ:");
                Debug.Log($"  ID: {testSkill.SkillId}");
                Debug.Log($"  åç§°: {testSkill.SkillName}");
                Debug.Log($"  åŠ¨ä½œæ•°: {testSkill.SkillActions.Count}");
                
                EditorUtility.DisplayDialog("åˆ›å»ºæˆåŠŸ", 
                    "æµ‹è¯•æŠ€èƒ½åˆ›å»ºæˆåŠŸï¼ˆæœªå†™å…¥æ–‡ä»¶ï¼‰\n" +
                    "è¯·æŸ¥çœ‹ConsoleæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯", "ç¡®å®š");
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"âœ— æµ‹è¯•å¤±è´¥: {ex.Message}\n{ex.StackTrace}");
                EditorUtility.DisplayDialog("æµ‹è¯•å¤±è´¥", 
                    $"åˆ›å»ºæµ‹è¯•æŠ€èƒ½å¤±è´¥ï¼š{ex.Message}", "ç¡®å®š");
            }
            
            Debug.Log("========== æµ‹è¯•å®Œæˆ ==========");
        }
        
        // ===== å®ç”¨å·¥å…· =====
        
        [MenuItem(MENU_ROOT + "å·¥å…·/åˆ—å‡ºæ‰€æœ‰æŠ€èƒ½ID")]
        public static void ListAllSkillIds()
        {
            Debug.Log("========== æ‰€æœ‰æŠ€èƒ½IDåˆ—è¡¨ ==========");
            
            try
            {
                var skillIds = SkillDataReader.GetAllSkillIds();
                Debug.Log($"å…± {skillIds.Count} ä¸ªæŠ€èƒ½:");
                foreach (var id in skillIds)
                {
                    Debug.Log($"  - {id}");
                }
            }
            catch (System.Exception ex)
            {
                Debug.LogError($"âœ— è·å–å¤±è´¥: {ex.Message}");
            }
            
            Debug.Log("====================================");
        }
        
        [MenuItem(MENU_ROOT + "å·¥å…·/æ¸…é™¤ ConfigTableHelper ç¼“å­˜")]
        public static void ClearConfigCache()
        {
            Services.ConfigTableHelper.ClearCache();
            Debug.Log("âœ“ ConfigTableHelper ç¼“å­˜å·²æ¸…é™¤");
            EditorUtility.DisplayDialog("æ¸…é™¤æˆåŠŸ", 
                "ConfigTableHelper ç¼“å­˜å·²æ¸…é™¤", "ç¡®å®š");
        }
    }
}

```

ç°åœ¨æ£€æŸ¥ç¼–è¯‘é”™è¯¯å¹¶ç¼–è¯‘é¡¹ç›®ï¼š

---

**User**

ç»§ç»­

